"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/inngest/route";
exports.ids = ["app/api/inngest/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:module":
/*!******************************!*\
  !*** external "node:module" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:module");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finngest%2Froute&page=%2Fapi%2Finngest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finngest%2Froute.ts&appDir=C%3A%5CUsers%5Craze0%5CDocuments%5Chylo00%5Chylo00%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Craze0%5CDocuments%5Chylo00%5Chylo00&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finngest%2Froute&page=%2Fapi%2Finngest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finngest%2Froute.ts&appDir=C%3A%5CUsers%5Craze0%5CDocuments%5Chylo00%5Chylo00%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Craze0%5CDocuments%5Chylo00%5Chylo00&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_raze0_Documents_hylo00_hylo00_src_app_api_inngest_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/inngest/route.ts */ \"(rsc)/./src/app/api/inngest/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/inngest/route\",\n        pathname: \"/api/inngest\",\n        filename: \"route\",\n        bundlePath: \"app/api/inngest/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\raze0\\\\Documents\\\\hylo00\\\\hylo00\\\\src\\\\app\\\\api\\\\inngest\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_raze0_Documents_hylo00_hylo00_src_app_api_inngest_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/inngest/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbm5nZXN0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZpbm5nZXN0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGaW5uZ2VzdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNyYXplMCU1Q0RvY3VtZW50cyU1Q2h5bG8wMCU1Q2h5bG8wMCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDcmF6ZTAlNUNEb2N1bWVudHMlNUNoeWxvMDAlNUNoeWxvMDAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzZCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHlsbzAwLz84MjY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHJhemUwXFxcXERvY3VtZW50c1xcXFxoeWxvMDBcXFxcaHlsbzAwXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGlubmdlc3RcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2lubmdlc3Qvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9pbm5nZXN0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9pbm5nZXN0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxccmF6ZTBcXFxcRG9jdW1lbnRzXFxcXGh5bG8wMFxcXFxoeWxvMDBcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcaW5uZ2VzdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvaW5uZ2VzdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finngest%2Froute&page=%2Fapi%2Finngest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finngest%2Froute.ts&appDir=C%3A%5CUsers%5Craze0%5CDocuments%5Chylo00%5Chylo00%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Craze0%5CDocuments%5Chylo00%5Chylo00&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/inngest/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/inngest/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var inngest_next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! inngest/next */ \"(rsc)/./node_modules/inngest/next.js\");\n/* harmony import */ var _inngest_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/inngest/client */ \"(rsc)/./src/inngest/client.ts\");\n/* harmony import */ var _inngest_functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/inngest/functions */ \"(rsc)/./src/inngest/functions/index.ts\");\n\n\n\n/**\r\n * Inngest API handler for Next.js App Router\r\n * This serves the Inngest functions for remote invocation\r\n */ // Export the HTTP methods for Inngest to handle\nconst { GET, POST, PUT } = (0,inngest_next__WEBPACK_IMPORTED_MODULE_2__.serve)({\n    client: _inngest_client__WEBPACK_IMPORTED_MODULE_0__.inngest,\n    functions: _inngest_functions__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9pbm5nZXN0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFxQztBQUNNO0FBQ1E7QUFFbkQ7OztDQUdDLEdBRUQsZ0RBQWdEO0FBQ3pDLE1BQU0sRUFBRUcsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEdBQUcsRUFBRSxHQUFHTCxtREFBS0EsQ0FBQztJQUN0Q00sUUFBUUwsb0RBQU9BO0lBQ2ZNLFdBQVdMLDBEQUFnQkE7QUFDN0IsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL2h5bG8wMC8uL3NyYy9hcHAvYXBpL2lubmdlc3Qvcm91dGUudHM/NTM4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZXJ2ZSB9IGZyb20gXCJpbm5nZXN0L25leHRcIjtcclxuaW1wb3J0IHsgaW5uZ2VzdCB9IGZyb20gXCJAL2lubmdlc3QvY2xpZW50XCI7XHJcbmltcG9ydCBpbm5nZXN0RnVuY3Rpb25zIGZyb20gXCJAL2lubmdlc3QvZnVuY3Rpb25zXCI7XHJcblxyXG4vKipcclxuICogSW5uZ2VzdCBBUEkgaGFuZGxlciBmb3IgTmV4dC5qcyBBcHAgUm91dGVyXHJcbiAqIFRoaXMgc2VydmVzIHRoZSBJbm5nZXN0IGZ1bmN0aW9ucyBmb3IgcmVtb3RlIGludm9jYXRpb25cclxuICovXHJcblxyXG4vLyBFeHBvcnQgdGhlIEhUVFAgbWV0aG9kcyBmb3IgSW5uZ2VzdCB0byBoYW5kbGVcclxuZXhwb3J0IGNvbnN0IHsgR0VULCBQT1NULCBQVVQgfSA9IHNlcnZlKHtcclxuICBjbGllbnQ6IGlubmdlc3QsXHJcbiAgZnVuY3Rpb25zOiBpbm5nZXN0RnVuY3Rpb25zLFxyXG59KTsiXSwibmFtZXMiOlsic2VydmUiLCJpbm5nZXN0IiwiaW5uZ2VzdEZ1bmN0aW9ucyIsIkdFVCIsIlBPU1QiLCJQVVQiLCJjbGllbnQiLCJmdW5jdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/inngest/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/inngest/client.ts":
/*!*******************************!*\
  !*** ./src/inngest/client.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getInngestClient: () => (/* binding */ getInngestClient),\n/* harmony export */   inngest: () => (/* binding */ inngest)\n/* harmony export */ });\n/* harmony import */ var inngest__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! inngest */ \"(rsc)/./node_modules/inngest/components/Inngest.js\");\n/* harmony import */ var _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/console-logger */ \"(rsc)/./src/utils/console-logger.ts\");\n/* harmony import */ var _lib_config_itinerary_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/config/itinerary-config */ \"(rsc)/./src/lib/config/itinerary-config.ts\");\n\n\n\n/**\r\n * Inngest client bootstrap for AI-Generated Personalized Itinerary workflows\r\n * Initializes the Inngest client with configuration derived from our feature config helper.\r\n */ let inngestInstance = null;\nfunction getInngestClient() {\n    if (inngestInstance) {\n        return inngestInstance;\n    }\n    try {\n        const config = (0,_lib_config_itinerary_config__WEBPACK_IMPORTED_MODULE_1__.getItineraryConfig)();\n        inngestInstance = new inngest__WEBPACK_IMPORTED_MODULE_2__.Inngest({\n            id: \"hylo00-itinerary\",\n            name: \"Hylo00 AI Itinerary Generator\",\n            eventKey: config.inngest.eventKey,\n            signingKey: config.inngest.signingKey,\n            baseUrl: config.app.nodeEnv === \"development\" ? \"http://localhost:8288\" : undefined,\n            logger: {\n                debug: (message, ...args)=>{\n                    if (args.length > 0) {\n                        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(0, `INNGEST_DEBUG: ${message}`, \"client.ts\", \"debug\", {\n                            args\n                        });\n                    } else {\n                        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(0, `INNGEST_DEBUG: ${message}`, \"client.ts\", \"debug\");\n                    }\n                },\n                info: (message, ...args)=>{\n                    if (args.length > 0) {\n                        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(0, `INNGEST_INFO: ${message}`, \"client.ts\", \"info\", {\n                            args\n                        });\n                    } else {\n                        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(0, `INNGEST_INFO: ${message}`, \"client.ts\", \"info\");\n                    }\n                },\n                warn: (message, ...args)=>{\n                    if (args.length > 0) {\n                        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(0, `INNGEST_WARN: ${message}`, \"client.ts\", \"warn\", {\n                            args\n                        });\n                    } else {\n                        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(0, `INNGEST_WARN: ${message}`, \"client.ts\", \"warn\");\n                    }\n                },\n                error: (message, ...args)=>{\n                    if (args.length > 0) {\n                        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(0, `INNGEST_ERROR: ${message}`, \"client.ts\", \"error\", {\n                            args\n                        });\n                    } else {\n                        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(0, `INNGEST_ERROR: ${message}`, \"client.ts\", \"error\");\n                    }\n                }\n            }\n        });\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(0, \"INNGEST_CLIENT_INITIALIZED\", \"client.ts\", \"getInngestClient\", {\n            clientId: \"hylo00-itinerary\",\n            hasEventKey: Boolean(config.inngest.eventKey),\n            hasSigningKey: Boolean(config.inngest.signingKey),\n            isDevelopment: config.app.nodeEnv === \"development\"\n        });\n        return inngestInstance;\n    } catch (error) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(0, \"INNGEST_CLIENT_INITIALIZATION_FAILED\", \"client.ts\", \"getInngestClient\", error instanceof Error ? error : String(error));\n        throw error;\n    }\n}\nconst inngest = getInngestClient();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (inngest);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oeWxvMDAvLi9zcmMvaW5uZ2VzdC9jbGllbnQudHM/YmI0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbm5nZXN0IH0gZnJvbSAnaW5uZ2VzdCc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvY29uc29sZS1sb2dnZXInO1xyXG5pbXBvcnQgeyBnZXRJdGluZXJhcnlDb25maWcgfSBmcm9tICdAL2xpYi9jb25maWcvaXRpbmVyYXJ5LWNvbmZpZyc7XHJcblxyXG4vKipcclxuICogSW5uZ2VzdCBjbGllbnQgYm9vdHN0cmFwIGZvciBBSS1HZW5lcmF0ZWQgUGVyc29uYWxpemVkIEl0aW5lcmFyeSB3b3JrZmxvd3NcclxuICogSW5pdGlhbGl6ZXMgdGhlIElubmdlc3QgY2xpZW50IHdpdGggY29uZmlndXJhdGlvbiBkZXJpdmVkIGZyb20gb3VyIGZlYXR1cmUgY29uZmlnIGhlbHBlci5cclxuICovXHJcbmxldCBpbm5nZXN0SW5zdGFuY2U6IElubmdlc3QgfCBudWxsID0gbnVsbDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRJbm5nZXN0Q2xpZW50KCk6IElubmdlc3Qge1xyXG4gIGlmIChpbm5nZXN0SW5zdGFuY2UpIHtcclxuICAgIHJldHVybiBpbm5nZXN0SW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgY29uZmlnID0gZ2V0SXRpbmVyYXJ5Q29uZmlnKCk7XHJcblxyXG4gICAgaW5uZ2VzdEluc3RhbmNlID0gbmV3IElubmdlc3Qoe1xyXG4gICAgICBpZDogJ2h5bG8wMC1pdGluZXJhcnknLFxyXG4gICAgICBuYW1lOiAnSHlsbzAwIEFJIEl0aW5lcmFyeSBHZW5lcmF0b3InLFxyXG4gICAgICBldmVudEtleTogY29uZmlnLmlubmdlc3QuZXZlbnRLZXksXHJcbiAgICAgIHNpZ25pbmdLZXk6IGNvbmZpZy5pbm5nZXN0LnNpZ25pbmdLZXksXHJcbiAgICAgIGJhc2VVcmw6IGNvbmZpZy5hcHAubm9kZUVudiA9PT0gJ2RldmVsb3BtZW50JyA/ICdodHRwOi8vbG9jYWxob3N0OjgyODgnIDogdW5kZWZpbmVkLFxyXG4gICAgICBsb2dnZXI6IHtcclxuICAgICAgICBkZWJ1ZzogKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHtcclxuICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmxvZygwLCBgSU5OR0VTVF9ERUJVRzogJHttZXNzYWdlfWAsICdjbGllbnQudHMnLCAnZGVidWcnLCB7IGFyZ3MgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2dnZXIubG9nKDAsIGBJTk5HRVNUX0RFQlVHOiAke21lc3NhZ2V9YCwgJ2NsaWVudC50cycsICdkZWJ1ZycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5mbzogKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHtcclxuICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmxvZygwLCBgSU5OR0VTVF9JTkZPOiAke21lc3NhZ2V9YCwgJ2NsaWVudC50cycsICdpbmZvJywgeyBhcmdzIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmxvZygwLCBgSU5OR0VTVF9JTkZPOiAke21lc3NhZ2V9YCwgJ2NsaWVudC50cycsICdpbmZvJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3YXJuOiAobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xyXG4gICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsb2dnZXIubG9nKDAsIGBJTk5HRVNUX1dBUk46ICR7bWVzc2FnZX1gLCAnY2xpZW50LnRzJywgJ3dhcm4nLCB7IGFyZ3MgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2dnZXIubG9nKDAsIGBJTk5HRVNUX1dBUk46ICR7bWVzc2FnZX1gLCAnY2xpZW50LnRzJywgJ3dhcm4nKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiAobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xyXG4gICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsb2dnZXIubG9nKDAsIGBJTk5HRVNUX0VSUk9SOiAke21lc3NhZ2V9YCwgJ2NsaWVudC50cycsICdlcnJvcicsIHsgYXJncyB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5sb2coMCwgYElOTkdFU1RfRVJST1I6ICR7bWVzc2FnZX1gLCAnY2xpZW50LnRzJywgJ2Vycm9yJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGxvZ2dlci5sb2coMCwgJ0lOTkdFU1RfQ0xJRU5UX0lOSVRJQUxJWkVEJywgJ2NsaWVudC50cycsICdnZXRJbm5nZXN0Q2xpZW50Jywge1xyXG4gICAgICBjbGllbnRJZDogJ2h5bG8wMC1pdGluZXJhcnknLFxyXG4gICAgICBoYXNFdmVudEtleTogQm9vbGVhbihjb25maWcuaW5uZ2VzdC5ldmVudEtleSksXHJcbiAgICAgIGhhc1NpZ25pbmdLZXk6IEJvb2xlYW4oY29uZmlnLmlubmdlc3Quc2lnbmluZ0tleSksXHJcbiAgICAgIGlzRGV2ZWxvcG1lbnQ6IGNvbmZpZy5hcHAubm9kZUVudiA9PT0gJ2RldmVsb3BtZW50JyxcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBpbm5nZXN0SW5zdGFuY2U7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlci5lcnJvcigwLCAnSU5OR0VTVF9DTElFTlRfSU5JVElBTElaQVRJT05fRkFJTEVEJywgJ2NsaWVudC50cycsICdnZXRJbm5nZXN0Q2xpZW50JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogU3RyaW5nKGVycm9yKSk7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBpbm5nZXN0ID0gZ2V0SW5uZ2VzdENsaWVudCgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaW5uZ2VzdDtcclxuIl0sIm5hbWVzIjpbIklubmdlc3QiLCJsb2dnZXIiLCJnZXRJdGluZXJhcnlDb25maWciLCJpbm5nZXN0SW5zdGFuY2UiLCJnZXRJbm5nZXN0Q2xpZW50IiwiY29uZmlnIiwiaWQiLCJuYW1lIiwiZXZlbnRLZXkiLCJpbm5nZXN0Iiwic2lnbmluZ0tleSIsImJhc2VVcmwiLCJhcHAiLCJub2RlRW52IiwidW5kZWZpbmVkIiwiZGVidWciLCJtZXNzYWdlIiwiYXJncyIsImxlbmd0aCIsImxvZyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJjbGllbnRJZCIsImhhc0V2ZW50S2V5IiwiQm9vbGVhbiIsImhhc1NpZ25pbmdLZXkiLCJpc0RldmVsb3BtZW50IiwiRXJyb3IiLCJTdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/inngest/client.ts\n");

/***/ }),

/***/ "(rsc)/./src/inngest/functions/index.ts":
/*!****************************************!*\
  !*** ./src/inngest/functions/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   inngestFunctions: () => (/* binding */ inngestFunctions),\n/* harmony export */   itineraryWorkflow: () => (/* reexport safe */ _itinerary__WEBPACK_IMPORTED_MODULE_0__.itineraryWorkflow)\n/* harmony export */ });\n/* harmony import */ var _itinerary__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./itinerary */ \"(rsc)/./src/inngest/functions/itinerary.ts\");\n\nconst inngestFunctions = [\n    _itinerary__WEBPACK_IMPORTED_MODULE_0__.itineraryWorkflow\n];\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (inngestFunctions);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvaW5uZ2VzdC9mdW5jdGlvbnMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnRDtBQUV6QyxNQUFNQyxtQkFBbUI7SUFBQ0QseURBQWlCQTtDQUFDLENBQUM7QUFFdkI7QUFFN0IsaUVBQWVDLGdCQUFnQkEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2h5bG8wMC8uL3NyYy9pbm5nZXN0L2Z1bmN0aW9ucy9pbmRleC50cz84YjFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGl0aW5lcmFyeVdvcmtmbG93IH0gZnJvbSAnLi9pdGluZXJhcnknO1xyXG5cclxuZXhwb3J0IGNvbnN0IGlubmdlc3RGdW5jdGlvbnMgPSBbaXRpbmVyYXJ5V29ya2Zsb3ddO1xyXG5cclxuZXhwb3J0IHsgaXRpbmVyYXJ5V29ya2Zsb3cgfTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGlubmdlc3RGdW5jdGlvbnM7XHJcbiJdLCJuYW1lcyI6WyJpdGluZXJhcnlXb3JrZmxvdyIsImlubmdlc3RGdW5jdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/inngest/functions/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/inngest/functions/itinerary.ts":
/*!********************************************!*\
  !*** ./src/inngest/functions/itinerary.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   functions: () => (/* binding */ functions),\n/* harmony export */   itineraryWorkflow: () => (/* binding */ itineraryWorkflow)\n/* harmony export */ });\n/* harmony import */ var _lib_vector_vectorStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/vector/vectorStore */ \"(rsc)/./src/lib/vector/vectorStore.ts\");\n/* harmony import */ var _lib_redis_stateStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/redis/stateStore */ \"(rsc)/./src/lib/redis/stateStore.ts\");\n/* harmony import */ var _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/console-logger */ \"(rsc)/./src/utils/console-logger.ts\");\n/* harmony import */ var _lib_ai_architectAI__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/ai/architectAI */ \"(rsc)/./src/lib/ai/architectAI.ts\");\n/* harmony import */ var _inngest_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/inngest/client */ \"(rsc)/./src/inngest/client.ts\");\n\n\n\n\n\n/**\r\n * Itinerary generation workflow using Inngest\r\n * Orchestrates AI calls, research, logging, and Redis persistence\r\n */ const itineraryWorkflow = _inngest_client__WEBPACK_IMPORTED_MODULE_4__.inngest.createFunction({\n    id: \"itinerary.generate\",\n    name: \"Generate AI Itinerary\",\n    retries: 3\n}, {\n    event: \"itinerary.generate.requested\"\n}, async ({ event, step })=>{\n    const { formData, sessionId, workflowId } = event.data;\n    _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(14, \"INNGEST_WORKFLOW_STARTED\", \"inngest/functions/itinerary.ts\", \"itineraryWorkflow\", {\n        workflowId,\n        sessionId,\n        location: formData.location,\n        adults: formData.adults\n    });\n    // Store initial workflow state\n    await _lib_redis_stateStore__WEBPACK_IMPORTED_MODULE_1__.stateStore.storeItineraryState({\n        workflowId,\n        sessionId,\n        status: \"processing\",\n        formData,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n    });\n    // Step 1: AI Itinerary Architect (Grok-4-fast-reasoning)\n    const aiArchitectResult = await step.run(\"ai-itinerary-architect\", async ()=>{\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(15, \"AI_ARCHITECT_STARTED\", \"inngest/functions/itinerary.ts\", \"aiItineraryArchitect\", {\n            workflowId,\n            destination: formData.location,\n            adults: formData.adults,\n            children: formData.children ?? 0\n        });\n        const prompt = (0,_lib_ai_architectAI__WEBPACK_IMPORTED_MODULE_3__.buildGrokItineraryPrompt)(formData);\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(15, \"AI_PROMPT_PREVIEW\", \"inngest/functions/itinerary.ts\", \"aiItineraryArchitect\", {\n            workflowId,\n            promptLength: prompt.length,\n            promptPreview: prompt.slice(0, 1200)\n        });\n        const modelName = \"grok-4-fast-reasoning\";\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(15, \"XAI_MODEL_INITIALIZED\", \"inngest/functions/itinerary.ts\", \"aiItineraryArchitect\", {\n            workflowId,\n            model: modelName,\n            apiKeyPresent: Boolean(process.env.XAI_API_KEY),\n            apiKeyLength: process.env.XAI_API_KEY?.length ?? 0\n        });\n        const startedAt = Date.now();\n        try {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(15, \"XAI_REQUEST_DISPATCHED\", \"inngest/functions/itinerary.ts\", \"aiItineraryArchitect\", {\n                workflowId,\n                model: modelName,\n                promptCharacters: prompt.length\n            });\n            const draft = await (0,_lib_ai_architectAI__WEBPACK_IMPORTED_MODULE_3__.generateGrokItineraryDraft)({\n                prompt,\n                model: modelName\n            });\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(16, \"XAI_RESPONSE_METADATA\", \"inngest/functions/itinerary.ts\", \"aiItineraryArchitect\", {\n                workflowId,\n                model: modelName,\n                finishReason: draft.metadata.finishReason,\n                warnings: draft.metadata.warnings,\n                usage: draft.metadata.usage,\n                responseStatus: draft.metadata.responseStatus,\n                hasResponse: typeof draft.metadata.responseStatus !== \"undefined\",\n                latencyMs: draft.metadata.latencyMs,\n                responseBodyPreview: draft.metadata.responseBodyPreview\n            });\n            if (draft.metadata.fallbackSource !== \"none\") {\n                _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(16, \"XAI_RESPONSE_FALLBACK_USED\", \"inngest/functions/itinerary.ts\", \"aiItineraryArchitect\", {\n                    workflowId,\n                    model: modelName,\n                    fallbackSource: draft.metadata.fallbackSource\n                });\n            }\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(16, \"AI_RESPONSE_OUTPUT\", \"inngest/functions/itinerary.ts\", \"aiItineraryArchitect\", {\n                aiResponse: draft.rawOutput\n            });\n            const itinerary = draft.itinerary;\n            const vectorResult = await (0,_lib_vector_vectorStore__WEBPACK_IMPORTED_MODULE_0__.storeItineraryVector)({\n                workflowId,\n                sessionId,\n                destination: formData.location,\n                rawContent: draft.cleanedJson,\n                itinerary,\n                model: modelName,\n                formData\n            });\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(16, \"AI_ARCHITECT_COMPLETED\", \"inngest/functions/itinerary.ts\", \"aiItineraryArchitect\", {\n                workflowId,\n                durationMs: Date.now() - startedAt,\n                generatedDays: Array.isArray(itinerary?.dailyPlans) ? itinerary.dailyPlans.length : Array.isArray(itinerary?.dailyItinerary) ? itinerary.dailyItinerary.length : Array.isArray(itinerary?.days) ? itinerary.days.length : 0,\n                storedInVector: vectorResult.stored,\n                vectorIds: vectorResult.vectorIds,\n                vectorFailures: vectorResult.failures?.length ?? 0,\n                usage: draft.metadata.usage,\n                reasoningCharacters: 0\n            });\n            return {\n                itinerary,\n                rawOutput: draft.cleanedJson,\n                vectorResult,\n                model: modelName,\n                usage: draft.metadata.usage,\n                reasoning: null\n            };\n        } catch (error) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(17, \"AI_ARCHITECT_FAILED\", \"inngest/functions/itinerary.ts\", \"aiItineraryArchitect\", error instanceof Error ? error : String(error), {\n                workflowId\n            });\n            throw error;\n        }\n    });\n    // Store final result in Redis\n    await step.run(\"store-itinerary\", async ()=>{\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(20, \"REDIS_STORAGE_STARTED\", \"inngest/functions/itinerary.ts\", \"storeItinerary\", {\n            workflowId,\n            vectorCount: aiArchitectResult.vectorResult.vectorIds.length,\n            vectorFailures: aiArchitectResult.vectorResult.failures?.length ?? 0\n        });\n        const stored = await _lib_redis_stateStore__WEBPACK_IMPORTED_MODULE_1__.stateStore.storeItineraryState({\n            workflowId,\n            sessionId,\n            status: \"completed\",\n            formData,\n            itinerary: aiArchitectResult.itinerary,\n            research: {},\n            vector: aiArchitectResult.vectorResult,\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString()\n        });\n        if (!stored) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn(21, \"REDIS_STORAGE_FAILED\", \"inngest/functions/itinerary.ts\", \"storeItinerary\", \"Failed to store itinerary in Redis\", {\n                workflowId\n            });\n        }\n        return {\n            stored\n        };\n    });\n    _utils_console_logger__WEBPACK_IMPORTED_MODULE_2__.logger.log(21, \"INNGEST_WORKFLOW_COMPLETED\", \"inngest/functions/itinerary.ts\", \"itineraryWorkflow\", {\n        workflowId,\n        status: \"completed\"\n    });\n    return {\n        success: true,\n        workflowId,\n        itinerary: aiArchitectResult.itinerary,\n        rawAiOutput: aiArchitectResult.rawOutput,\n        vector: aiArchitectResult.vectorResult,\n        usage: aiArchitectResult.usage,\n        reasoning: aiArchitectResult.reasoning\n    };\n});\nconst functions = [\n    itineraryWorkflow\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvaW5uZ2VzdC9mdW5jdGlvbnMvaXRpbmVyYXJ5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0U7QUFDWjtBQUNKO0FBQzRDO0FBQ2pEO0FBRTNDOzs7Q0FHQyxHQUNNLE1BQU1NLG9CQUFvQkQsb0RBQU9BLENBQUNFLGNBQWMsQ0FDckQ7SUFDRUMsSUFBSTtJQUNKQyxNQUFNO0lBQ05DLFNBQVM7QUFDWCxHQUNBO0lBQUVDLE9BQU87QUFBK0IsR0FDeEMsT0FBTyxFQUFFQSxLQUFLLEVBQUVDLElBQUksRUFBRTtJQUNwQixNQUFNLEVBQUVDLFFBQVEsRUFBRUMsU0FBUyxFQUFFQyxVQUFVLEVBQUUsR0FBR0osTUFBTUssSUFBSTtJQUV0RGQseURBQU1BLENBQUNlLEdBQUcsQ0FBQyxJQUFJLDRCQUE0QixrQ0FBa0MscUJBQXFCO1FBQ2hHRjtRQUNBRDtRQUNBSSxVQUFVTCxTQUFTSyxRQUFRO1FBQzNCQyxRQUFRTixTQUFTTSxNQUFNO0lBQ3pCO0lBRUEsK0JBQStCO0lBQy9CLE1BQU1sQiw2REFBVUEsQ0FBQ21CLG1CQUFtQixDQUFDO1FBQ25DTDtRQUNBRDtRQUNBTyxRQUFRO1FBQ1JSO1FBQ0FTLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNqQ0MsV0FBVyxJQUFJRixPQUFPQyxXQUFXO0lBQ25DO0lBRUEseURBQXlEO0lBQ3pELE1BQU1FLG9CQUFvQixNQUFNZCxLQUFLZSxHQUFHLENBQUMsMEJBQTBCO1FBQ2pFekIseURBQU1BLENBQUNlLEdBQUcsQ0FBQyxJQUFJLHdCQUF3QixrQ0FBa0Msd0JBQXdCO1lBQy9GRjtZQUNBYSxhQUFhZixTQUFTSyxRQUFRO1lBQzlCQyxRQUFRTixTQUFTTSxNQUFNO1lBQ3ZCVSxVQUFVaEIsU0FBU2dCLFFBQVEsSUFBSTtRQUNqQztRQUVBLE1BQU1DLFNBQVMzQiw2RUFBd0JBLENBQUNVO1FBQ3hDWCx5REFBTUEsQ0FBQ2UsR0FBRyxDQUFDLElBQUkscUJBQXFCLGtDQUFrQyx3QkFBd0I7WUFD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LFFBQVF2RCxrQkFBa0JpQyxZQUFZO1FBQ3RDVCxPQUFPeEIsa0JBQWtCd0IsS0FBSztRQUM5QnlCLFdBQVdqRCxrQkFBa0JpRCxTQUFTO0lBQ3hDO0FBQ0YsR0FDQTtBQUVLLE1BQU1VLFlBQVk7SUFBQy9FO0NBQWtCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oeWxvMDAvLi9zcmMvaW5uZ2VzdC9mdW5jdGlvbnMvaXRpbmVyYXJ5LnRzPzUwN2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3RvcmVJdGluZXJhcnlWZWN0b3IgfSBmcm9tICdAL2xpYi92ZWN0b3IvdmVjdG9yU3RvcmUnO1xyXG5pbXBvcnQgeyBzdGF0ZVN0b3JlIH0gZnJvbSAnQC9saWIvcmVkaXMvc3RhdGVTdG9yZSc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvY29uc29sZS1sb2dnZXInO1xyXG5pbXBvcnQgeyBidWlsZEdyb2tJdGluZXJhcnlQcm9tcHQsIGdlbmVyYXRlR3Jva0l0aW5lcmFyeURyYWZ0IH0gZnJvbSAnQC9saWIvYWkvYXJjaGl0ZWN0QUknO1xyXG5pbXBvcnQgeyBpbm5nZXN0IH0gZnJvbSAnQC9pbm5nZXN0L2NsaWVudCc7XHJcblxyXG4vKipcclxuICogSXRpbmVyYXJ5IGdlbmVyYXRpb24gd29ya2Zsb3cgdXNpbmcgSW5uZ2VzdFxyXG4gKiBPcmNoZXN0cmF0ZXMgQUkgY2FsbHMsIHJlc2VhcmNoLCBsb2dnaW5nLCBhbmQgUmVkaXMgcGVyc2lzdGVuY2VcclxuICovXHJcbmV4cG9ydCBjb25zdCBpdGluZXJhcnlXb3JrZmxvdyA9IGlubmdlc3QuY3JlYXRlRnVuY3Rpb24oXHJcbiAge1xyXG4gICAgaWQ6ICdpdGluZXJhcnkuZ2VuZXJhdGUnLFxyXG4gICAgbmFtZTogJ0dlbmVyYXRlIEFJIEl0aW5lcmFyeScsXHJcbiAgICByZXRyaWVzOiAzLFxyXG4gIH0sXHJcbiAgeyBldmVudDogJ2l0aW5lcmFyeS5nZW5lcmF0ZS5yZXF1ZXN0ZWQnIH0sXHJcbiAgYXN5bmMgKHsgZXZlbnQsIHN0ZXAgfSkgPT4ge1xyXG4gICAgY29uc3QgeyBmb3JtRGF0YSwgc2Vzc2lvbklkLCB3b3JrZmxvd0lkIH0gPSBldmVudC5kYXRhO1xyXG5cclxuICAgIGxvZ2dlci5sb2coMTQsICdJTk5HRVNUX1dPUktGTE9XX1NUQVJURUQnLCAnaW5uZ2VzdC9mdW5jdGlvbnMvaXRpbmVyYXJ5LnRzJywgJ2l0aW5lcmFyeVdvcmtmbG93Jywge1xyXG4gICAgICB3b3JrZmxvd0lkLFxyXG4gICAgICBzZXNzaW9uSWQsXHJcbiAgICAgIGxvY2F0aW9uOiBmb3JtRGF0YS5sb2NhdGlvbixcclxuICAgICAgYWR1bHRzOiBmb3JtRGF0YS5hZHVsdHMsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBTdG9yZSBpbml0aWFsIHdvcmtmbG93IHN0YXRlXHJcbiAgICBhd2FpdCBzdGF0ZVN0b3JlLnN0b3JlSXRpbmVyYXJ5U3RhdGUoe1xyXG4gICAgICB3b3JrZmxvd0lkLFxyXG4gICAgICBzZXNzaW9uSWQsXHJcbiAgICAgIHN0YXR1czogJ3Byb2Nlc3NpbmcnLFxyXG4gICAgICBmb3JtRGF0YSxcclxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU3RlcCAxOiBBSSBJdGluZXJhcnkgQXJjaGl0ZWN0IChHcm9rLTQtZmFzdC1yZWFzb25pbmcpXHJcbiAgICBjb25zdCBhaUFyY2hpdGVjdFJlc3VsdCA9IGF3YWl0IHN0ZXAucnVuKCdhaS1pdGluZXJhcnktYXJjaGl0ZWN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBsb2dnZXIubG9nKDE1LCAnQUlfQVJDSElURUNUX1NUQVJURUQnLCAnaW5uZ2VzdC9mdW5jdGlvbnMvaXRpbmVyYXJ5LnRzJywgJ2FpSXRpbmVyYXJ5QXJjaGl0ZWN0Jywge1xyXG4gICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgZGVzdGluYXRpb246IGZvcm1EYXRhLmxvY2F0aW9uLFxyXG4gICAgICAgIGFkdWx0czogZm9ybURhdGEuYWR1bHRzLFxyXG4gICAgICAgIGNoaWxkcmVuOiBmb3JtRGF0YS5jaGlsZHJlbiA/PyAwLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHByb21wdCA9IGJ1aWxkR3Jva0l0aW5lcmFyeVByb21wdChmb3JtRGF0YSBhcyBhbnkpO1xyXG4gICAgICBsb2dnZXIubG9nKDE1LCAnQUlfUFJPTVBUX1BSRVZJRVcnLCAnaW5uZ2VzdC9mdW5jdGlvbnMvaXRpbmVyYXJ5LnRzJywgJ2FpSXRpbmVyYXJ5QXJjaGl0ZWN0Jywge1xyXG4gICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgcHJvbXB0TGVuZ3RoOiBwcm9tcHQubGVuZ3RoLFxyXG4gICAgICAgIHByb21wdFByZXZpZXc6IHByb21wdC5zbGljZSgwLCAxMjAwKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBtb2RlbE5hbWUgPSAnZ3Jvay00LWZhc3QtcmVhc29uaW5nJztcclxuICAgICAgbG9nZ2VyLmxvZygxNSwgJ1hBSV9NT0RFTF9JTklUSUFMSVpFRCcsICdpbm5nZXN0L2Z1bmN0aW9ucy9pdGluZXJhcnkudHMnLCAnYWlJdGluZXJhcnlBcmNoaXRlY3QnLCB7XHJcbiAgICAgICAgd29ya2Zsb3dJZCxcclxuICAgICAgICBtb2RlbDogbW9kZWxOYW1lLFxyXG4gICAgICAgIGFwaUtleVByZXNlbnQ6IEJvb2xlYW4ocHJvY2Vzcy5lbnYuWEFJX0FQSV9LRVkpLFxyXG4gICAgICAgIGFwaUtleUxlbmd0aDogcHJvY2Vzcy5lbnYuWEFJX0FQSV9LRVk/Lmxlbmd0aCA/PyAwLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHN0YXJ0ZWRBdCA9IERhdGUubm93KCk7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxvZ2dlci5sb2coMTUsICdYQUlfUkVRVUVTVF9ESVNQQVRDSEVEJywgJ2lubmdlc3QvZnVuY3Rpb25zL2l0aW5lcmFyeS50cycsICdhaUl0aW5lcmFyeUFyY2hpdGVjdCcsIHtcclxuICAgICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgICBtb2RlbDogbW9kZWxOYW1lLFxyXG4gICAgICAgICAgcHJvbXB0Q2hhcmFjdGVyczogcHJvbXB0Lmxlbmd0aCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgZHJhZnQgPSBhd2FpdCBnZW5lcmF0ZUdyb2tJdGluZXJhcnlEcmFmdCh7XHJcbiAgICAgICAgICBwcm9tcHQsXHJcbiAgICAgICAgICBtb2RlbDogbW9kZWxOYW1lLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsb2dnZXIubG9nKDE2LCAnWEFJX1JFU1BPTlNFX01FVEFEQVRBJywgJ2lubmdlc3QvZnVuY3Rpb25zL2l0aW5lcmFyeS50cycsICdhaUl0aW5lcmFyeUFyY2hpdGVjdCcsIHtcclxuICAgICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgICBtb2RlbDogbW9kZWxOYW1lLFxyXG4gICAgICAgICAgZmluaXNoUmVhc29uOiBkcmFmdC5tZXRhZGF0YS5maW5pc2hSZWFzb24sXHJcbiAgICAgICAgICB3YXJuaW5nczogZHJhZnQubWV0YWRhdGEud2FybmluZ3MsXHJcbiAgICAgICAgICB1c2FnZTogZHJhZnQubWV0YWRhdGEudXNhZ2UsXHJcbiAgICAgICAgICByZXNwb25zZVN0YXR1czogZHJhZnQubWV0YWRhdGEucmVzcG9uc2VTdGF0dXMsXHJcbiAgICAgICAgICBoYXNSZXNwb25zZTogdHlwZW9mIGRyYWZ0Lm1ldGFkYXRhLnJlc3BvbnNlU3RhdHVzICE9PSAndW5kZWZpbmVkJyxcclxuICAgICAgICAgIGxhdGVuY3lNczogZHJhZnQubWV0YWRhdGEubGF0ZW5jeU1zLFxyXG4gICAgICAgICAgcmVzcG9uc2VCb2R5UHJldmlldzogZHJhZnQubWV0YWRhdGEucmVzcG9uc2VCb2R5UHJldmlldyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGRyYWZ0Lm1ldGFkYXRhLmZhbGxiYWNrU291cmNlICE9PSAnbm9uZScpIHtcclxuICAgICAgICAgIGxvZ2dlci5sb2coMTYsICdYQUlfUkVTUE9OU0VfRkFMTEJBQ0tfVVNFRCcsICdpbm5nZXN0L2Z1bmN0aW9ucy9pdGluZXJhcnkudHMnLCAnYWlJdGluZXJhcnlBcmNoaXRlY3QnLCB7XHJcbiAgICAgICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgICAgIG1vZGVsOiBtb2RlbE5hbWUsXHJcbiAgICAgICAgICAgIGZhbGxiYWNrU291cmNlOiBkcmFmdC5tZXRhZGF0YS5mYWxsYmFja1NvdXJjZSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmxvZygxNiwgJ0FJX1JFU1BPTlNFX09VVFBVVCcsICdpbm5nZXN0L2Z1bmN0aW9ucy9pdGluZXJhcnkudHMnLCAnYWlJdGluZXJhcnlBcmNoaXRlY3QnLCB7XHJcbiAgICAgICAgICBhaVJlc3BvbnNlOiBkcmFmdC5yYXdPdXRwdXQsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGl0aW5lcmFyeSA9IGRyYWZ0Lml0aW5lcmFyeSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xyXG5cclxuICAgICAgICBjb25zdCB2ZWN0b3JSZXN1bHQgPSBhd2FpdCBzdG9yZUl0aW5lcmFyeVZlY3Rvcih7XHJcbiAgICAgICAgICB3b3JrZmxvd0lkLFxyXG4gICAgICAgICAgc2Vzc2lvbklkLFxyXG4gICAgICAgICAgZGVzdGluYXRpb246IGZvcm1EYXRhLmxvY2F0aW9uLFxyXG4gICAgICAgICAgcmF3Q29udGVudDogZHJhZnQuY2xlYW5lZEpzb24sXHJcbiAgICAgICAgICBpdGluZXJhcnksXHJcbiAgICAgICAgICBtb2RlbDogbW9kZWxOYW1lLFxyXG4gICAgICAgICAgZm9ybURhdGEsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxvZ2dlci5sb2coMTYsICdBSV9BUkNISVRFQ1RfQ09NUExFVEVEJywgJ2lubmdlc3QvZnVuY3Rpb25zL2l0aW5lcmFyeS50cycsICdhaUl0aW5lcmFyeUFyY2hpdGVjdCcsIHtcclxuICAgICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgICBkdXJhdGlvbk1zOiBEYXRlLm5vdygpIC0gc3RhcnRlZEF0LFxyXG4gICAgICAgICAgZ2VuZXJhdGVkRGF5czogQXJyYXkuaXNBcnJheSgoaXRpbmVyYXJ5IGFzIGFueSk/LmRhaWx5UGxhbnMpXHJcbiAgICAgICAgICAgID8gKGl0aW5lcmFyeSBhcyBhbnkpLmRhaWx5UGxhbnMubGVuZ3RoXHJcbiAgICAgICAgICAgIDogQXJyYXkuaXNBcnJheSgoaXRpbmVyYXJ5IGFzIGFueSk/LmRhaWx5SXRpbmVyYXJ5KVxyXG4gICAgICAgICAgICAgID8gKGl0aW5lcmFyeSBhcyBhbnkpLmRhaWx5SXRpbmVyYXJ5Lmxlbmd0aFxyXG4gICAgICAgICAgICAgIDogQXJyYXkuaXNBcnJheSgoaXRpbmVyYXJ5IGFzIGFueSk/LmRheXMpXHJcbiAgICAgICAgICAgICAgICA/IChpdGluZXJhcnkgYXMgYW55KS5kYXlzLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgOiAwLFxyXG4gICAgICAgICAgc3RvcmVkSW5WZWN0b3I6IHZlY3RvclJlc3VsdC5zdG9yZWQsXHJcbiAgICAgICAgICB2ZWN0b3JJZHM6IHZlY3RvclJlc3VsdC52ZWN0b3JJZHMsXHJcbiAgICAgICAgICB2ZWN0b3JGYWlsdXJlczogdmVjdG9yUmVzdWx0LmZhaWx1cmVzPy5sZW5ndGggPz8gMCxcclxuICAgICAgICAgIHVzYWdlOiBkcmFmdC5tZXRhZGF0YS51c2FnZSxcclxuICAgICAgICAgIHJlYXNvbmluZ0NoYXJhY3RlcnM6IDAsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBpdGluZXJhcnksXHJcbiAgICAgICAgICByYXdPdXRwdXQ6IGRyYWZ0LmNsZWFuZWRKc29uLFxyXG4gICAgICAgICAgdmVjdG9yUmVzdWx0LFxyXG4gICAgICAgICAgbW9kZWw6IG1vZGVsTmFtZSxcclxuICAgICAgICAgIHVzYWdlOiBkcmFmdC5tZXRhZGF0YS51c2FnZSxcclxuICAgICAgICAgIHJlYXNvbmluZzogbnVsbCxcclxuICAgICAgICB9O1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGxvZ2dlci5lcnJvcigxNywgJ0FJX0FSQ0hJVEVDVF9GQUlMRUQnLCAnaW5uZ2VzdC9mdW5jdGlvbnMvaXRpbmVyYXJ5LnRzJywgJ2FpSXRpbmVyYXJ5QXJjaGl0ZWN0JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogU3RyaW5nKGVycm9yKSwge1xyXG4gICAgICAgICAgd29ya2Zsb3dJZCxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU3RvcmUgZmluYWwgcmVzdWx0IGluIFJlZGlzXHJcbiAgICBhd2FpdCBzdGVwLnJ1bignc3RvcmUtaXRpbmVyYXJ5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBsb2dnZXIubG9nKDIwLCAnUkVESVNfU1RPUkFHRV9TVEFSVEVEJywgJ2lubmdlc3QvZnVuY3Rpb25zL2l0aW5lcmFyeS50cycsICdzdG9yZUl0aW5lcmFyeScsIHtcclxuICAgICAgICB3b3JrZmxvd0lkLFxyXG4gICAgICAgIHZlY3RvckNvdW50OiBhaUFyY2hpdGVjdFJlc3VsdC52ZWN0b3JSZXN1bHQudmVjdG9ySWRzLmxlbmd0aCxcclxuICAgICAgICB2ZWN0b3JGYWlsdXJlczogYWlBcmNoaXRlY3RSZXN1bHQudmVjdG9yUmVzdWx0LmZhaWx1cmVzPy5sZW5ndGggPz8gMCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBzdG9yZWQgPSBhd2FpdCBzdGF0ZVN0b3JlLnN0b3JlSXRpbmVyYXJ5U3RhdGUoe1xyXG4gICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgc2Vzc2lvbklkLFxyXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXHJcbiAgICAgICAgZm9ybURhdGEsXHJcbiAgICAgICAgaXRpbmVyYXJ5OiBhaUFyY2hpdGVjdFJlc3VsdC5pdGluZXJhcnksXHJcbiAgICAgICAgcmVzZWFyY2g6IHt9LFxyXG4gICAgICAgIHZlY3RvcjogYWlBcmNoaXRlY3RSZXN1bHQudmVjdG9yUmVzdWx0LFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghc3RvcmVkKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oMjEsICdSRURJU19TVE9SQUdFX0ZBSUxFRCcsICdpbm5nZXN0L2Z1bmN0aW9ucy9pdGluZXJhcnkudHMnLCAnc3RvcmVJdGluZXJhcnknLCAnRmFpbGVkIHRvIHN0b3JlIGl0aW5lcmFyeSBpbiBSZWRpcycsIHtcclxuICAgICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IHN0b3JlZCB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgbG9nZ2VyLmxvZygyMSwgJ0lOTkdFU1RfV09SS0ZMT1dfQ09NUExFVEVEJywgJ2lubmdlc3QvZnVuY3Rpb25zL2l0aW5lcmFyeS50cycsICdpdGluZXJhcnlXb3JrZmxvdycsIHtcclxuICAgICAgd29ya2Zsb3dJZCxcclxuICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgIGl0aW5lcmFyeTogYWlBcmNoaXRlY3RSZXN1bHQuaXRpbmVyYXJ5LFxyXG4gICAgICByYXdBaU91dHB1dDogYWlBcmNoaXRlY3RSZXN1bHQucmF3T3V0cHV0LFxyXG4gICAgICB2ZWN0b3I6IGFpQXJjaGl0ZWN0UmVzdWx0LnZlY3RvclJlc3VsdCxcclxuICAgICAgdXNhZ2U6IGFpQXJjaGl0ZWN0UmVzdWx0LnVzYWdlLFxyXG4gICAgICByZWFzb25pbmc6IGFpQXJjaGl0ZWN0UmVzdWx0LnJlYXNvbmluZyxcclxuICAgIH07XHJcbiAgfSxcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBmdW5jdGlvbnMgPSBbaXRpbmVyYXJ5V29ya2Zsb3ddO1xyXG4iXSwibmFtZXMiOlsic3RvcmVJdGluZXJhcnlWZWN0b3IiLCJzdGF0ZVN0b3JlIiwibG9nZ2VyIiwiYnVpbGRHcm9rSXRpbmVyYXJ5UHJvbXB0IiwiZ2VuZXJhdGVHcm9rSXRpbmVyYXJ5RHJhZnQiLCJpbm5nZXN0IiwiaXRpbmVyYXJ5V29ya2Zsb3ciLCJjcmVhdGVGdW5jdGlvbiIsImlkIiwibmFtZSIsInJldHJpZXMiLCJldmVudCIsInN0ZXAiLCJmb3JtRGF0YSIsInNlc3Npb25JZCIsIndvcmtmbG93SWQiLCJkYXRhIiwibG9nIiwibG9jYXRpb24iLCJhZHVsdHMiLCJzdG9yZUl0aW5lcmFyeVN0YXRlIiwic3RhdHVzIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlZEF0IiwiYWlBcmNoaXRlY3RSZXN1bHQiLCJydW4iLCJkZXN0aW5hdGlvbiIsImNoaWxkcmVuIiwicHJvbXB0IiwicHJvbXB0TGVuZ3RoIiwibGVuZ3RoIiwicHJvbXB0UHJldmlldyIsInNsaWNlIiwibW9kZWxOYW1lIiwibW9kZWwiLCJhcGlLZXlQcmVzZW50IiwiQm9vbGVhbiIsInByb2Nlc3MiLCJlbnYiLCJYQUlfQVBJX0tFWSIsImFwaUtleUxlbmd0aCIsInN0YXJ0ZWRBdCIsIm5vdyIsInByb21wdENoYXJhY3RlcnMiLCJkcmFmdCIsImZpbmlzaFJlYXNvbiIsIm1ldGFkYXRhIiwid2FybmluZ3MiLCJ1c2FnZSIsInJlc3BvbnNlU3RhdHVzIiwiaGFzUmVzcG9uc2UiLCJsYXRlbmN5TXMiLCJyZXNwb25zZUJvZHlQcmV2aWV3IiwiZmFsbGJhY2tTb3VyY2UiLCJhaVJlc3BvbnNlIiwicmF3T3V0cHV0IiwiaXRpbmVyYXJ5IiwidmVjdG9yUmVzdWx0IiwicmF3Q29udGVudCIsImNsZWFuZWRKc29uIiwiZHVyYXRpb25NcyIsImdlbmVyYXRlZERheXMiLCJBcnJheSIsImlzQXJyYXkiLCJkYWlseVBsYW5zIiwiZGFpbHlJdGluZXJhcnkiLCJkYXlzIiwic3RvcmVkSW5WZWN0b3IiLCJzdG9yZWQiLCJ2ZWN0b3JJZHMiLCJ2ZWN0b3JGYWlsdXJlcyIsImZhaWx1cmVzIiwicmVhc29uaW5nQ2hhcmFjdGVycyIsInJlYXNvbmluZyIsImVycm9yIiwiRXJyb3IiLCJTdHJpbmciLCJ2ZWN0b3JDb3VudCIsInJlc2VhcmNoIiwidmVjdG9yIiwid2FybiIsInN1Y2Nlc3MiLCJyYXdBaU91dHB1dCIsImZ1bmN0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/inngest/functions/itinerary.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ai/architectAI.ts":
/*!***********************************!*\
  !*** ./src/lib/ai/architectAI.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildGrokItineraryPrompt: () => (/* binding */ buildGrokItineraryPrompt),\n/* harmony export */   generateGrokItineraryDraft: () => (/* binding */ generateGrokItineraryDraft)\n/* harmony export */ });\n/* harmony import */ var _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/console-logger */ \"(rsc)/./src/utils/console-logger.ts\");\n\nconst GROK_MODEL = \"grok-4-fast-reasoning\";\nconst XAI_ENDPOINT = \"https://api.x.ai/v1/responses\";\nfunction buildGrokItineraryPrompt(formData) {\n    const promptLines = [];\n    const indicatorCandidate = formData.indicator;\n    const queryCandidate = formData.query;\n    const indicator = typeof indicatorCandidate === \"string\" && indicatorCandidate.trim() ? indicatorCandidate : typeof queryCandidate === \"string\" && queryCandidate.trim() ? queryCandidate : \"general\";\n    promptLines.push(\"You are Hylo's AI Itinerary Architect. Craft a detailed, actionable itinerary aligned with the indicator focus.\");\n    promptLines.push(`Indicator: ${indicator}`);\n    promptLines.push(`Destination: ${formData.location ?? \"Unknown destination\"}`);\n    if (formData.flexibleDates === true) {\n        promptLines.push(`Dates: Flexible, target ${formData.plannedDays ?? \"unspecified\"} days.`);\n    } else {\n        promptLines.push(`Dates: ${formData.departDate ?? \"unspecified\"} – ${formData.returnDate ?? \"unspecified\"}.`);\n    }\n    const adultCount = formData.adults ?? 1;\n    const childCount = formData.children ?? 0;\n    if (childCount > 0) {\n        const describeChildAge = (age)=>{\n            if (typeof age !== \"number\" || Number.isNaN(age)) {\n                return null;\n            }\n            if (age < 2) return `Infant (${age})`;\n            if (age < 5) return `Toddler (${age})`;\n            if (age < 13) return `Child (${age})`;\n            if (age < 18) return `Teen (${age})`;\n            return `Young traveler (${age})`;\n        };\n        const childAgesArray = Array.isArray(formData.childrenAges) ? formData.childrenAges : [];\n        const childAgeLabels = childAgesArray.map(describeChildAge).filter((label)=>Boolean(label));\n        const ageDetails = childAgeLabels.length > 0 ? ` Age breakdown: ${childAgeLabels.join(\", \")}.` : \"\";\n        promptLines.push(`Travel party: ${adultCount} adult(s), ${childCount} child(ren).${ageDetails} Keep pacing family-friendly with rest time, flexible dining, and safety cues.`);\n    } else {\n        promptLines.push(`Travel party: ${adultCount} adult(s). Trip is adults-only; highlight late-night, intimate, or adventurous options when appropriate.`);\n    }\n    if (formData.flexibleBudget === true) {\n        promptLines.push(\"Budget: Flexible. Offer tiered recommendations (value, mid, premium) when relevant.\");\n    } else if (typeof formData.budget === \"number\") {\n        promptLines.push(`Budget: Roughly ${formData.currency ?? \"USD\"} ${formData.budget}. Keep suggestions within range unless an upgrade is justified.`);\n    }\n    const travelStyleAnswers = formData.travelStyleAnswers ?? {};\n    const travelStyleDetails = [];\n    const appendArrayDetail = (label, value)=>{\n        if (Array.isArray(value) && value.length > 0) {\n            travelStyleDetails.push(`${label}: ${value.join(\"; \")}`);\n        }\n    };\n    appendArrayDetail(\"Experience level\", travelStyleAnswers.experience);\n    appendArrayDetail(\"Desired vibes\", travelStyleAnswers.vibes);\n    appendArrayDetail(\"Ideal day patterns\", travelStyleAnswers.sampleDays);\n    appendArrayDetail(\"Dinner preferences\", travelStyleAnswers.dinnerChoices);\n    if (Array.isArray(travelStyleAnswers.vibes) && travelStyleAnswers.vibes.includes(\"other\") && travelStyleAnswers.vibesOther) {\n        const vibesIndex = travelStyleDetails.findIndex((item)=>item.startsWith(\"Desired vibes:\"));\n        if (vibesIndex !== -1) {\n            travelStyleDetails[vibesIndex] = travelStyleDetails[vibesIndex].replace(\"other\", travelStyleAnswers.vibesOther.trim());\n        }\n    }\n    if (typeof travelStyleAnswers.customVibesText === \"string\" && travelStyleAnswers.customVibesText.trim()) {\n        travelStyleDetails.push(`Custom vibe notes: ${travelStyleAnswers.customVibesText.trim()}`);\n    }\n    if (typeof travelStyleAnswers.otherDinnerChoiceText === \"string\" && travelStyleAnswers.otherDinnerChoiceText.trim()) {\n        travelStyleDetails.push(`Custom dining notes: ${travelStyleAnswers.otherDinnerChoiceText.trim()}`);\n    }\n    if (travelStyleDetails.length > 0) {\n        promptLines.push(\"Detailed travel style signals:\\n\" + travelStyleDetails.map((item)=>`- ${item}`).join(\"\\n\"));\n    } else if (formData.travelStyleChoice === \"answer-questions\") {\n        promptLines.push(\"Detailed travel style questionnaire submitted without specific selections; infer from other context.\");\n    } else if (formData.travelStyleChoice === \"skip-to-details\") {\n        promptLines.push(\"Traveler skipped the style questionnaire. Infer tone from core preferences, interests, and inclusions.\");\n    }\n    if (Array.isArray(formData.selectedGroups) && formData.selectedGroups.length > 0) {\n        let groupsText = formData.selectedGroups.join(\", \");\n        if (formData.selectedGroups.includes(\"other\") && formData.customGroupText) {\n            groupsText = groupsText.replace(\"other\", formData.customGroupText.trim());\n        }\n        promptLines.push(`Travel group: ${groupsText}.`);\n    }\n    if (Array.isArray(formData.selectedInterests) && formData.selectedInterests.length > 0) {\n        let interestsText = formData.selectedInterests.join(\", \");\n        if (formData.selectedInterests.includes(\"other\") && formData.customInterestsText) {\n            interestsText = interestsText.replace(\"other\", formData.customInterestsText.trim());\n        }\n        promptLines.push(`Key interests: ${interestsText}.`);\n    }\n    if (Array.isArray(formData.selectedInclusions) && formData.selectedInclusions.length > 0) {\n        promptLines.push(\"Must-have inclusions:\");\n        formData.selectedInclusions.forEach((inclusion)=>{\n            if (typeof inclusion === \"string\" && inclusion.trim()) {\n                let inclusionText = inclusion.trim();\n                if (inclusionText === \"other\" && formData.customInclusionsText) {\n                    inclusionText = formData.customInclusionsText.trim();\n                }\n                promptLines.push(`- Ensure planning covers: ${inclusionText}`);\n            }\n        });\n    }\n    if (typeof formData.tripNickname === \"string\" && formData.tripNickname.trim()) {\n        promptLines.push(`Trip nickname: ${formData.tripNickname.trim()}. Use this nickname in the intro.`);\n    }\n    if (typeof formData.tripVibe === \"string\" && formData.tripVibe.trim()) {\n        promptLines.push(`Primary vibe: ${formData.tripVibe.trim()}. Reinforce this tone throughout.`);\n    }\n    if (formData.diningPreferences) {\n        promptLines.push(`Dining preferences: ${JSON.stringify(formData.diningPreferences)}.`);\n    }\n    if (formData.sampleDays) {\n        promptLines.push(`Ideal day structure: ${JSON.stringify(formData.sampleDays)}.`);\n    }\n    if (typeof formData.additionalNotes === \"string\" && formData.additionalNotes.trim()) {\n        promptLines.push(`Traveler notes: ${formData.additionalNotes.trim()}`);\n    }\n    promptLines.push(\"Execution requirements:\");\n    promptLines.push(\"- Produce an intro paragraph that feels concierge-written, 2-3 sentences.\");\n    promptLines.push(\"- Build `dailyPlans` array with one entry per day, preserving date order.\");\n    promptLines.push(\"- Each day must include morning, afternoon, evening anchors and a signature highlight.\");\n    promptLines.push(\"- If transportation is required, include `transportation` notes with time estimates.\");\n    promptLines.push(\"- Add `dining` suggestions that match the traveler vibe and any dietary notes.\");\n    promptLines.push(\"- Reference the trip nickname if provided.\");\n    promptLines.push(\"- End with `keyTakeaways` summarizing highlights and `nextSteps` for concierge actions.\");\n    promptLines.push(\"Output requirements: Respond with a single JSON object containing `dailyPlans` where each entry represents one day. Each day should include activities, meals, and transportation details.\");\n    promptLines.push(`Form data JSON:\\n${JSON.stringify(formData, null, 2)}`);\n    return promptLines.join(\"\\n\\n\");\n}\nasync function generateGrokItineraryDraft({ prompt, model = GROK_MODEL, maxTokens = 4000, temperature = 0.4 }) {\n    if (!process.env.XAI_API_KEY) {\n        throw new Error(\"XAI_API_KEY is not configured.\");\n    }\n    const startedAt = Date.now();\n    const response = await fetch(XAI_ENDPOINT, {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${process.env.XAI_API_KEY}`,\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            model,\n            input: [\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            max_output_tokens: maxTokens,\n            temperature\n        })\n    });\n    const responseStatus = response.status;\n    const responseBody = await response.text();\n    if (!response.ok) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(17, \"XAI_REQUEST_FAILED\", \"lib/ai/architectAI.ts\", \"generateGrokItineraryDraft\", responseBody, {\n            responseStatus\n        });\n        throw new Error(`xAI request failed (${responseStatus})`);\n    }\n    let parsedResponse;\n    try {\n        parsedResponse = responseBody ? JSON.parse(responseBody) : {};\n    } catch (error) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(17, \"XAI_INVALID_JSON\", \"lib/ai/architectAI.ts\", \"generateGrokItineraryDraft\", \"Failed to parse xAI JSON response\", {\n            responseStatus,\n            responseBodyPreview: responseBody.slice(0, 600)\n        });\n        throw new Error(\"Failed to parse xAI JSON response\");\n    }\n    const { text: resolvedText, fallbackSource } = resolveXaiText(parsedResponse);\n    _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(16, \"XAI_RAW_RESULT\", \"lib/ai/architectAI.ts\", \"generateGrokItineraryDraft\", {\n        finishReason: extractFinishReason(parsedResponse),\n        warnings: parsedResponse?.warnings,\n        usage: parsedResponse?.usage,\n        hasText: Boolean(resolvedText?.trim?.()),\n        responseKeys: parsedResponse ? Object.keys(parsedResponse) : null\n    });\n    if (!resolvedText || !resolvedText.trim()) {\n        if (parsedResponse?.error?.message) {\n            throw new Error(`xAI error: ${parsedResponse.error.message}`);\n        }\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(17, \"XAI_EMPTY_RESPONSE\", \"lib/ai/architectAI.ts\", \"generateGrokItineraryDraft\", \"xAI returned empty text after parsing\", {\n            responseStatus,\n            responseBodyPreview: responseBody.slice(0, 600),\n            parsedKeys: parsedResponse ? Object.keys(parsedResponse) : null\n        });\n        throw new Error(\"xAI returned empty text\");\n    }\n    const cleanedJson = extractJsonBlock(resolvedText);\n    let itinerary;\n    try {\n        itinerary = JSON.parse(cleanedJson);\n    } catch (error) {\n        throw new Error(\"Failed to parse Grok itinerary JSON\");\n    }\n    return {\n        rawOutput: resolvedText,\n        cleanedJson,\n        itinerary,\n        metadata: {\n            model,\n            latencyMs: Date.now() - startedAt,\n            finishReason: extractFinishReason(parsedResponse),\n            usage: mapUsage(parsedResponse?.usage),\n            warnings: parsedResponse?.warnings,\n            responseStatus,\n            responseBodyPreview: responseBody.slice(0, 600),\n            fallbackSource\n        }\n    };\n}\nfunction resolveXaiText(payload) {\n    if (!payload) {\n        return {\n            text: null,\n            fallbackSource: \"none\"\n        };\n    }\n    const outputs = payload.output ?? payload.outputs;\n    if (Array.isArray(outputs)) {\n        const parts = [];\n        for (const item of outputs){\n            const content = item?.content ?? item?.contents;\n            if (Array.isArray(content)) {\n                for (const entry of content){\n                    if (typeof entry?.text === \"string\" && entry.text.trim()) {\n                        parts.push(entry.text.trim());\n                    }\n                }\n            } else if (typeof content?.text === \"string\" && content.text.trim()) {\n                parts.push(content.text.trim());\n            }\n        }\n        if (parts.length > 0) {\n            return {\n                text: parts.join(\"\\n\\n\"),\n                fallbackSource: \"none\"\n            };\n        }\n    }\n    const choicesContent = payload?.choices?.[0]?.message?.content;\n    const coercedChoice = coerceToString(choicesContent);\n    if (coercedChoice) {\n        return {\n            text: coercedChoice,\n            fallbackSource: \"parsed-content\"\n        };\n    }\n    const toolArguments = payload?.choices?.[0]?.message?.tool_calls?.[0]?.function?.arguments;\n    if (typeof toolArguments === \"string\" && toolArguments.trim()) {\n        return {\n            text: toolArguments,\n            fallbackSource: \"tool-call\"\n        };\n    }\n    if (toolArguments && typeof toolArguments === \"object\") {\n        const serialized = JSON.stringify(toolArguments);\n        if (serialized.trim()) {\n            return {\n                text: serialized,\n                fallbackSource: \"tool-call\"\n            };\n        }\n    }\n    const reasoningContent = payload?.choices?.[0]?.message?.reasoning_content;\n    const coercedReasoning = coerceToString(reasoningContent);\n    if (coercedReasoning) {\n        return {\n            text: coercedReasoning,\n            fallbackSource: \"reasoning\"\n        };\n    }\n    const outputText = payload?.response?.output_text ?? payload?.text;\n    if (typeof outputText === \"string\" && outputText.trim()) {\n        return {\n            text: outputText.trim(),\n            fallbackSource: \"parsed-content\"\n        };\n    }\n    const fallbackText = coerceToString(payload);\n    if (fallbackText) {\n        return {\n            text: fallbackText,\n            fallbackSource: \"parsed-content\"\n        };\n    }\n    return {\n        text: null,\n        fallbackSource: \"none\"\n    };\n}\nfunction coerceToString(input) {\n    if (!input) {\n        return null;\n    }\n    if (typeof input === \"string\") {\n        const trimmed = input.trim();\n        return trimmed ? trimmed : null;\n    }\n    if (Array.isArray(input)) {\n        const parts = input.map((item)=>coerceToString(item)).filter((part)=>Boolean(part));\n        if (parts.length > 0) {\n            return parts.join(\" \").trim();\n        }\n        return null;\n    }\n    if (typeof input === \"object\") {\n        if (input === null) {\n            return null;\n        }\n        if (typeof input.text === \"string\") {\n            return input.text.trim() || null;\n        }\n        if (typeof input.content === \"string\") {\n            return input.content.trim() || null;\n        }\n        try {\n            const serialized = JSON.stringify(input);\n            return serialized.trim() ? serialized : null;\n        } catch  {\n            return null;\n        }\n    }\n    return null;\n}\nfunction extractFinishReason(payload) {\n    return payload?.output?.[0]?.finish_reason ?? payload?.output?.[0]?.stopReason ?? payload?.finish_reason ?? payload?.finishReason;\n}\nfunction mapUsage(usage) {\n    if (!usage || typeof usage !== \"object\") {\n        return undefined;\n    }\n    const mapped = {};\n    if (typeof usage.input_tokens === \"number\") {\n        mapped.promptTokens = usage.input_tokens;\n    }\n    if (typeof usage.output_tokens === \"number\") {\n        mapped.completionTokens = usage.output_tokens;\n    }\n    if (typeof usage.total_tokens === \"number\") {\n        mapped.totalTokens = usage.total_tokens;\n    }\n    if (Object.keys(mapped).length === 0) {\n        return undefined;\n    }\n    return mapped;\n}\nfunction extractJsonBlock(raw) {\n    if (!raw || !raw.trim()) {\n        throw new Error(\"AI response was empty\");\n    }\n    const codeBlockMatch = raw.match(/```json([\\s\\S]*?)```/i) || raw.match(/```([\\s\\S]*?)```/i);\n    const candidate = codeBlockMatch ? codeBlockMatch[1] : raw;\n    const startCandidates = [\n        candidate.indexOf(\"{\"),\n        candidate.indexOf(\"[\")\n    ].filter((index)=>index >= 0);\n    const endCandidates = [\n        candidate.lastIndexOf(\"}\"),\n        candidate.lastIndexOf(\"]\")\n    ].filter((index)=>index >= 0);\n    if (startCandidates.length === 0 || endCandidates.length === 0) {\n        throw new Error(\"Unable to locate JSON payload in AI response\");\n    }\n    const startIndex = Math.min(...startCandidates);\n    const endIndex = Math.max(...endCandidates);\n    if (!Number.isFinite(startIndex) || !Number.isFinite(endIndex) || startIndex < 0 || endIndex < startIndex) {\n        throw new Error(\"Unable to locate JSON payload in AI response\");\n    }\n    return candidate.slice(startIndex, endIndex + 1).trim();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksQ0FBQ29DLFFBQVF2SCxNQUFNLEtBQUssR0FBRztRQUNwQyxPQUFPc0g7SUFDVDtJQUVBLE9BQU9DO0FBQ1Q7QUFFQSxTQUFTaEMsaUJBQWlCdUMsR0FBVztJQUNuQyxJQUFJLENBQUNBLE9BQU8sQ0FBQ0EsSUFBSXZKLElBQUksSUFBSTtRQUN2QixNQUFNLElBQUl5RSxNQUFNO0lBQ2xCO0lBRUEsTUFBTStFLGlCQUFpQkQsSUFBSUUsS0FBSyxDQUFDLDRCQUE0QkYsSUFBSUUsS0FBSyxDQUFDO0lBQ3ZFLE1BQU1DLFlBQVlGLGlCQUFpQkEsY0FBYyxDQUFDLEVBQUUsR0FBR0Q7SUFFdkQsTUFBTUksa0JBQWtCO1FBQUNELFVBQVVFLE9BQU8sQ0FBQztRQUFNRixVQUFVRSxPQUFPLENBQUM7S0FBSyxDQUFDdkksTUFBTSxDQUFDLENBQUN3SSxRQUFVQSxTQUFTO0lBQ3BHLE1BQU1DLGdCQUFnQjtRQUFDSixVQUFVSyxXQUFXLENBQUM7UUFBTUwsVUFBVUssV0FBVyxDQUFDO0tBQUssQ0FBQzFJLE1BQU0sQ0FBQyxDQUFDd0ksUUFBVUEsU0FBUztJQUUxRyxJQUFJRixnQkFBZ0JsSSxNQUFNLEtBQUssS0FBS3FJLGNBQWNySSxNQUFNLEtBQUssR0FBRztRQUM5RCxNQUFNLElBQUlnRCxNQUFNO0lBQ2xCO0lBRUEsTUFBTXVGLGFBQWFDLEtBQUtDLEdBQUcsSUFBSVA7SUFDL0IsTUFBTVEsV0FBV0YsS0FBS0csR0FBRyxJQUFJTjtJQUU3QixJQUFJLENBQUNqSixPQUFPd0osUUFBUSxDQUFDTCxlQUFlLENBQUNuSixPQUFPd0osUUFBUSxDQUFDRixhQUFhSCxhQUFhLEtBQUtHLFdBQVdILFlBQVk7UUFDekcsTUFBTSxJQUFJdkYsTUFBTTtJQUNsQjtJQUVBLE9BQU9pRixVQUFVMUQsS0FBSyxDQUFDZ0UsWUFBWUcsV0FBVyxHQUFHbkssSUFBSTtBQUN2RCIsInNvdXJjZXMiOlsid2VicGFjazovL2h5bG8wMC8uL3NyYy9saWIvYWkvYXJjaGl0ZWN0QUkudHM/MTg4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFRyaXBGb3JtRGF0YSB9IGZyb20gJ0AvdHlwZXMnO1xyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL2NvbnNvbGUtbG9nZ2VyJztcclxuXHJcbnR5cGUgRmFsbGJhY2tTb3VyY2UgPSAnbm9uZScgfCAncGFyc2VkLWNvbnRlbnQnIHwgJ3Rvb2wtY2FsbCcgfCAncmVhc29uaW5nJztcclxuXHJcbmNvbnN0IEdST0tfTU9ERUwgPSAnZ3Jvay00LWZhc3QtcmVhc29uaW5nJztcclxuY29uc3QgWEFJX0VORFBPSU5UID0gJ2h0dHBzOi8vYXBpLnguYWkvdjEvcmVzcG9uc2VzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJhdGlvblVzYWdlIHtcclxuICBwcm9tcHRUb2tlbnM/OiBudW1iZXI7XHJcbiAgY29tcGxldGlvblRva2Vucz86IG51bWJlcjtcclxuICB0b3RhbFRva2Vucz86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHcm9rRHJhZnRNZXRhZGF0YSB7XHJcbiAgbW9kZWw6IHN0cmluZztcclxuICBsYXRlbmN5TXM6IG51bWJlcjtcclxuICBmaW5pc2hSZWFzb24/OiBzdHJpbmc7XHJcbiAgdXNhZ2U/OiBHZW5lcmF0aW9uVXNhZ2U7XHJcbiAgd2FybmluZ3M/OiB1bmtub3duO1xyXG4gIHJlc3BvbnNlU3RhdHVzPzogbnVtYmVyO1xyXG4gIHJlc3BvbnNlQm9keVByZXZpZXc/OiBzdHJpbmc7XHJcbiAgZmFsbGJhY2tTb3VyY2U6IEZhbGxiYWNrU291cmNlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdyb2tEcmFmdFJlc3VsdCB7XHJcbiAgcmF3T3V0cHV0OiBzdHJpbmc7XHJcbiAgY2xlYW5lZEpzb246IHN0cmluZztcclxuICBpdGluZXJhcnk6IHVua25vd247XHJcbiAgbWV0YWRhdGE6IEdyb2tEcmFmdE1ldGFkYXRhO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdyb2tEcmFmdFBhcmFtcyB7XHJcbiAgcHJvbXB0OiBzdHJpbmc7XHJcbiAgbW9kZWw/OiBzdHJpbmc7XHJcbiAgbWF4VG9rZW5zPzogbnVtYmVyO1xyXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBFeHRlbmRlZFRyaXBGb3JtRGF0YSA9IFRyaXBGb3JtRGF0YSAmIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkR3Jva0l0aW5lcmFyeVByb21wdChmb3JtRGF0YTogRXh0ZW5kZWRUcmlwRm9ybURhdGEpOiBzdHJpbmcge1xyXG4gIGNvbnN0IHByb21wdExpbmVzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICBjb25zdCBpbmRpY2F0b3JDYW5kaWRhdGUgPSAoZm9ybURhdGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLmluZGljYXRvcjtcclxuICBjb25zdCBxdWVyeUNhbmRpZGF0ZSA9IChmb3JtRGF0YSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikucXVlcnk7XHJcbiAgY29uc3QgaW5kaWNhdG9yID0gdHlwZW9mIGluZGljYXRvckNhbmRpZGF0ZSA9PT0gJ3N0cmluZycgJiYgaW5kaWNhdG9yQ2FuZGlkYXRlLnRyaW0oKVxyXG4gICAgPyBpbmRpY2F0b3JDYW5kaWRhdGVcclxuICAgIDogdHlwZW9mIHF1ZXJ5Q2FuZGlkYXRlID09PSAnc3RyaW5nJyAmJiBxdWVyeUNhbmRpZGF0ZS50cmltKClcclxuICAgICAgPyBxdWVyeUNhbmRpZGF0ZVxyXG4gICAgICA6ICdnZW5lcmFsJztcclxuXHJcbiAgcHJvbXB0TGluZXMucHVzaChcIllvdSBhcmUgSHlsbydzIEFJIEl0aW5lcmFyeSBBcmNoaXRlY3QuIENyYWZ0IGEgZGV0YWlsZWQsIGFjdGlvbmFibGUgaXRpbmVyYXJ5IGFsaWduZWQgd2l0aCB0aGUgaW5kaWNhdG9yIGZvY3VzLlwiKTtcclxuICBwcm9tcHRMaW5lcy5wdXNoKGBJbmRpY2F0b3I6ICR7aW5kaWNhdG9yfWApO1xyXG4gIHByb21wdExpbmVzLnB1c2goYERlc3RpbmF0aW9uOiAke2Zvcm1EYXRhLmxvY2F0aW9uID8/ICdVbmtub3duIGRlc3RpbmF0aW9uJ31gKTtcclxuXHJcbiAgaWYgKGZvcm1EYXRhLmZsZXhpYmxlRGF0ZXMgPT09IHRydWUpIHtcclxuICAgIHByb21wdExpbmVzLnB1c2goYERhdGVzOiBGbGV4aWJsZSwgdGFyZ2V0ICR7Zm9ybURhdGEucGxhbm5lZERheXMgPz8gJ3Vuc3BlY2lmaWVkJ30gZGF5cy5gKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcHJvbXB0TGluZXMucHVzaChgRGF0ZXM6ICR7Zm9ybURhdGEuZGVwYXJ0RGF0ZSA/PyAndW5zcGVjaWZpZWQnfSDigJMgJHtmb3JtRGF0YS5yZXR1cm5EYXRlID8/ICd1bnNwZWNpZmllZCd9LmApO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgYWR1bHRDb3VudCA9IGZvcm1EYXRhLmFkdWx0cyA/PyAxO1xyXG4gIGNvbnN0IGNoaWxkQ291bnQgPSBmb3JtRGF0YS5jaGlsZHJlbiA/PyAwO1xyXG4gIGlmIChjaGlsZENvdW50ID4gMCkge1xyXG4gICAgY29uc3QgZGVzY3JpYmVDaGlsZEFnZSA9IChhZ2U6IHVua25vd24pID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiBhZ2UgIT09ICdudW1iZXInIHx8IE51bWJlci5pc05hTihhZ2UpKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGFnZSA8IDIpIHJldHVybiBgSW5mYW50ICgke2FnZX0pYDtcclxuICAgICAgaWYgKGFnZSA8IDUpIHJldHVybiBgVG9kZGxlciAoJHthZ2V9KWA7XHJcbiAgICAgIGlmIChhZ2UgPCAxMykgcmV0dXJuIGBDaGlsZCAoJHthZ2V9KWA7XHJcbiAgICAgIGlmIChhZ2UgPCAxOCkgcmV0dXJuIGBUZWVuICgke2FnZX0pYDtcclxuICAgICAgcmV0dXJuIGBZb3VuZyB0cmF2ZWxlciAoJHthZ2V9KWA7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGNoaWxkQWdlc0FycmF5ID0gQXJyYXkuaXNBcnJheShmb3JtRGF0YS5jaGlsZHJlbkFnZXMpID8gZm9ybURhdGEuY2hpbGRyZW5BZ2VzIDogW107XHJcbiAgICBjb25zdCBjaGlsZEFnZUxhYmVscyA9IGNoaWxkQWdlc0FycmF5XHJcbiAgICAgIC5tYXAoZGVzY3JpYmVDaGlsZEFnZSlcclxuICAgICAgLmZpbHRlcigobGFiZWwpOiBsYWJlbCBpcyBzdHJpbmcgPT4gQm9vbGVhbihsYWJlbCkpO1xyXG5cclxuICAgIGNvbnN0IGFnZURldGFpbHMgPSBjaGlsZEFnZUxhYmVscy5sZW5ndGggPiAwID8gYCBBZ2UgYnJlYWtkb3duOiAke2NoaWxkQWdlTGFiZWxzLmpvaW4oJywgJyl9LmAgOiAnJztcclxuICAgIHByb21wdExpbmVzLnB1c2goXHJcbiAgICAgIGBUcmF2ZWwgcGFydHk6ICR7YWR1bHRDb3VudH0gYWR1bHQocyksICR7Y2hpbGRDb3VudH0gY2hpbGQocmVuKS4ke2FnZURldGFpbHN9IEtlZXAgcGFjaW5nIGZhbWlseS1mcmllbmRseSB3aXRoIHJlc3QgdGltZSwgZmxleGlibGUgZGluaW5nLCBhbmQgc2FmZXR5IGN1ZXMuYCxcclxuICAgICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHByb21wdExpbmVzLnB1c2goXHJcbiAgICAgIGBUcmF2ZWwgcGFydHk6ICR7YWR1bHRDb3VudH0gYWR1bHQocykuIFRyaXAgaXMgYWR1bHRzLW9ubHk7IGhpZ2hsaWdodCBsYXRlLW5pZ2h0LCBpbnRpbWF0ZSwgb3IgYWR2ZW50dXJvdXMgb3B0aW9ucyB3aGVuIGFwcHJvcHJpYXRlLmAsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaWYgKGZvcm1EYXRhLmZsZXhpYmxlQnVkZ2V0ID09PSB0cnVlKSB7XHJcbiAgICBwcm9tcHRMaW5lcy5wdXNoKCdCdWRnZXQ6IEZsZXhpYmxlLiBPZmZlciB0aWVyZWQgcmVjb21tZW5kYXRpb25zICh2YWx1ZSwgbWlkLCBwcmVtaXVtKSB3aGVuIHJlbGV2YW50LicpO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhLmJ1ZGdldCA9PT0gJ251bWJlcicpIHtcclxuICAgIHByb21wdExpbmVzLnB1c2goYEJ1ZGdldDogUm91Z2hseSAke2Zvcm1EYXRhLmN1cnJlbmN5ID8/ICdVU0QnfSAke2Zvcm1EYXRhLmJ1ZGdldH0uIEtlZXAgc3VnZ2VzdGlvbnMgd2l0aGluIHJhbmdlIHVubGVzcyBhbiB1cGdyYWRlIGlzIGp1c3RpZmllZC5gKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHRyYXZlbFN0eWxlQW5zd2VycyA9ICgoZm9ybURhdGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLnRyYXZlbFN0eWxlQW5zd2VycyA/PyB7fSkgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcclxuICBjb25zdCB0cmF2ZWxTdHlsZURldGFpbHM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gIGNvbnN0IGFwcGVuZEFycmF5RGV0YWlsID0gKGxhYmVsOiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKSA9PiB7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICB0cmF2ZWxTdHlsZURldGFpbHMucHVzaChgJHtsYWJlbH06ICR7dmFsdWUuam9pbignOyAnKX1gKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBhcHBlbmRBcnJheURldGFpbCgnRXhwZXJpZW5jZSBsZXZlbCcsIHRyYXZlbFN0eWxlQW5zd2Vycy5leHBlcmllbmNlKTtcclxuICBhcHBlbmRBcnJheURldGFpbCgnRGVzaXJlZCB2aWJlcycsIHRyYXZlbFN0eWxlQW5zd2Vycy52aWJlcyk7XHJcbiAgYXBwZW5kQXJyYXlEZXRhaWwoJ0lkZWFsIGRheSBwYXR0ZXJucycsIHRyYXZlbFN0eWxlQW5zd2Vycy5zYW1wbGVEYXlzKTtcclxuICBhcHBlbmRBcnJheURldGFpbCgnRGlubmVyIHByZWZlcmVuY2VzJywgdHJhdmVsU3R5bGVBbnN3ZXJzLmRpbm5lckNob2ljZXMpO1xyXG5cclxuICBpZiAoQXJyYXkuaXNBcnJheSh0cmF2ZWxTdHlsZUFuc3dlcnMudmliZXMpICYmIHRyYXZlbFN0eWxlQW5zd2Vycy52aWJlcy5pbmNsdWRlcygnb3RoZXInKSAmJiB0cmF2ZWxTdHlsZUFuc3dlcnMudmliZXNPdGhlcikge1xyXG4gICAgY29uc3QgdmliZXNJbmRleCA9IHRyYXZlbFN0eWxlRGV0YWlscy5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uc3RhcnRzV2l0aCgnRGVzaXJlZCB2aWJlczonKSk7XHJcbiAgICBpZiAodmliZXNJbmRleCAhPT0gLTEpIHtcclxuICAgICAgdHJhdmVsU3R5bGVEZXRhaWxzW3ZpYmVzSW5kZXhdID0gdHJhdmVsU3R5bGVEZXRhaWxzW3ZpYmVzSW5kZXhdLnJlcGxhY2UoJ290aGVyJywgdHJhdmVsU3R5bGVBbnN3ZXJzLnZpYmVzT3RoZXIudHJpbSgpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmICh0eXBlb2YgdHJhdmVsU3R5bGVBbnN3ZXJzLmN1c3RvbVZpYmVzVGV4dCA9PT0gJ3N0cmluZycgJiYgdHJhdmVsU3R5bGVBbnN3ZXJzLmN1c3RvbVZpYmVzVGV4dC50cmltKCkpIHtcclxuICAgIHRyYXZlbFN0eWxlRGV0YWlscy5wdXNoKGBDdXN0b20gdmliZSBub3RlczogJHt0cmF2ZWxTdHlsZUFuc3dlcnMuY3VzdG9tVmliZXNUZXh0LnRyaW0oKX1gKTtcclxuICB9XHJcbiAgaWYgKHR5cGVvZiB0cmF2ZWxTdHlsZUFuc3dlcnMub3RoZXJEaW5uZXJDaG9pY2VUZXh0ID09PSAnc3RyaW5nJyAmJiB0cmF2ZWxTdHlsZUFuc3dlcnMub3RoZXJEaW5uZXJDaG9pY2VUZXh0LnRyaW0oKSkge1xyXG4gICAgdHJhdmVsU3R5bGVEZXRhaWxzLnB1c2goYEN1c3RvbSBkaW5pbmcgbm90ZXM6ICR7dHJhdmVsU3R5bGVBbnN3ZXJzLm90aGVyRGlubmVyQ2hvaWNlVGV4dC50cmltKCl9YCk7XHJcbiAgfVxyXG5cclxuICBpZiAodHJhdmVsU3R5bGVEZXRhaWxzLmxlbmd0aCA+IDApIHtcclxuICAgIHByb21wdExpbmVzLnB1c2goJ0RldGFpbGVkIHRyYXZlbCBzdHlsZSBzaWduYWxzOlxcbicgKyB0cmF2ZWxTdHlsZURldGFpbHMubWFwKChpdGVtKSA9PiBgLSAke2l0ZW19YCkuam9pbignXFxuJykpO1xyXG4gIH0gZWxzZSBpZiAoKGZvcm1EYXRhIGFzIGFueSkudHJhdmVsU3R5bGVDaG9pY2UgPT09ICdhbnN3ZXItcXVlc3Rpb25zJykge1xyXG4gICAgcHJvbXB0TGluZXMucHVzaCgnRGV0YWlsZWQgdHJhdmVsIHN0eWxlIHF1ZXN0aW9ubmFpcmUgc3VibWl0dGVkIHdpdGhvdXQgc3BlY2lmaWMgc2VsZWN0aW9uczsgaW5mZXIgZnJvbSBvdGhlciBjb250ZXh0LicpO1xyXG4gIH0gZWxzZSBpZiAoKGZvcm1EYXRhIGFzIGFueSkudHJhdmVsU3R5bGVDaG9pY2UgPT09ICdza2lwLXRvLWRldGFpbHMnKSB7XHJcbiAgICBwcm9tcHRMaW5lcy5wdXNoKCdUcmF2ZWxlciBza2lwcGVkIHRoZSBzdHlsZSBxdWVzdGlvbm5haXJlLiBJbmZlciB0b25lIGZyb20gY29yZSBwcmVmZXJlbmNlcywgaW50ZXJlc3RzLCBhbmQgaW5jbHVzaW9ucy4nKTtcclxuICB9XHJcblxyXG4gIGlmIChBcnJheS5pc0FycmF5KGZvcm1EYXRhLnNlbGVjdGVkR3JvdXBzKSAmJiBmb3JtRGF0YS5zZWxlY3RlZEdyb3Vwcy5sZW5ndGggPiAwKSB7XHJcbiAgICBsZXQgZ3JvdXBzVGV4dCA9IGZvcm1EYXRhLnNlbGVjdGVkR3JvdXBzLmpvaW4oJywgJyk7XHJcbiAgICBpZiAoZm9ybURhdGEuc2VsZWN0ZWRHcm91cHMuaW5jbHVkZXMoJ290aGVyJykgJiYgZm9ybURhdGEuY3VzdG9tR3JvdXBUZXh0KSB7XHJcbiAgICAgIGdyb3Vwc1RleHQgPSBncm91cHNUZXh0LnJlcGxhY2UoJ290aGVyJywgZm9ybURhdGEuY3VzdG9tR3JvdXBUZXh0LnRyaW0oKSk7XHJcbiAgICB9XHJcbiAgICBwcm9tcHRMaW5lcy5wdXNoKGBUcmF2ZWwgZ3JvdXA6ICR7Z3JvdXBzVGV4dH0uYCk7XHJcbiAgfVxyXG5cclxuICBpZiAoQXJyYXkuaXNBcnJheShmb3JtRGF0YS5zZWxlY3RlZEludGVyZXN0cykgJiYgZm9ybURhdGEuc2VsZWN0ZWRJbnRlcmVzdHMubGVuZ3RoID4gMCkge1xyXG4gICAgbGV0IGludGVyZXN0c1RleHQgPSBmb3JtRGF0YS5zZWxlY3RlZEludGVyZXN0cy5qb2luKCcsICcpO1xyXG4gICAgaWYgKGZvcm1EYXRhLnNlbGVjdGVkSW50ZXJlc3RzLmluY2x1ZGVzKCdvdGhlcicpICYmIGZvcm1EYXRhLmN1c3RvbUludGVyZXN0c1RleHQpIHtcclxuICAgICAgaW50ZXJlc3RzVGV4dCA9IGludGVyZXN0c1RleHQucmVwbGFjZSgnb3RoZXInLCBmb3JtRGF0YS5jdXN0b21JbnRlcmVzdHNUZXh0LnRyaW0oKSk7XHJcbiAgICB9XHJcbiAgICBwcm9tcHRMaW5lcy5wdXNoKGBLZXkgaW50ZXJlc3RzOiAke2ludGVyZXN0c1RleHR9LmApO1xyXG4gIH1cclxuXHJcbiAgaWYgKEFycmF5LmlzQXJyYXkoZm9ybURhdGEuc2VsZWN0ZWRJbmNsdXNpb25zKSAmJiBmb3JtRGF0YS5zZWxlY3RlZEluY2x1c2lvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgcHJvbXB0TGluZXMucHVzaCgnTXVzdC1oYXZlIGluY2x1c2lvbnM6Jyk7XHJcbiAgICBmb3JtRGF0YS5zZWxlY3RlZEluY2x1c2lvbnMuZm9yRWFjaCgoaW5jbHVzaW9uOiB1bmtub3duKSA9PiB7XHJcbiAgICAgIGlmICh0eXBlb2YgaW5jbHVzaW9uID09PSAnc3RyaW5nJyAmJiBpbmNsdXNpb24udHJpbSgpKSB7XHJcbiAgICAgICAgbGV0IGluY2x1c2lvblRleHQgPSBpbmNsdXNpb24udHJpbSgpO1xyXG4gICAgICAgIGlmIChpbmNsdXNpb25UZXh0ID09PSAnb3RoZXInICYmIGZvcm1EYXRhLmN1c3RvbUluY2x1c2lvbnNUZXh0KSB7XHJcbiAgICAgICAgICBpbmNsdXNpb25UZXh0ID0gZm9ybURhdGEuY3VzdG9tSW5jbHVzaW9uc1RleHQudHJpbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm9tcHRMaW5lcy5wdXNoKGAtIEVuc3VyZSBwbGFubmluZyBjb3ZlcnM6ICR7aW5jbHVzaW9uVGV4dH1gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAodHlwZW9mIChmb3JtRGF0YSBhcyBhbnkpLnRyaXBOaWNrbmFtZSA9PT0gJ3N0cmluZycgJiYgKGZvcm1EYXRhIGFzIGFueSkudHJpcE5pY2tuYW1lLnRyaW0oKSkge1xyXG4gICAgcHJvbXB0TGluZXMucHVzaChgVHJpcCBuaWNrbmFtZTogJHsoZm9ybURhdGEgYXMgYW55KS50cmlwTmlja25hbWUudHJpbSgpfS4gVXNlIHRoaXMgbmlja25hbWUgaW4gdGhlIGludHJvLmApO1xyXG4gIH1cclxuXHJcbiAgaWYgKHR5cGVvZiAoZm9ybURhdGEgYXMgYW55KS50cmlwVmliZSA9PT0gJ3N0cmluZycgJiYgKGZvcm1EYXRhIGFzIGFueSkudHJpcFZpYmUudHJpbSgpKSB7XHJcbiAgICBwcm9tcHRMaW5lcy5wdXNoKGBQcmltYXJ5IHZpYmU6ICR7KGZvcm1EYXRhIGFzIGFueSkudHJpcFZpYmUudHJpbSgpfS4gUmVpbmZvcmNlIHRoaXMgdG9uZSB0aHJvdWdob3V0LmApO1xyXG4gIH1cclxuXHJcbiAgaWYgKChmb3JtRGF0YSBhcyBhbnkpLmRpbmluZ1ByZWZlcmVuY2VzKSB7XHJcbiAgICBwcm9tcHRMaW5lcy5wdXNoKGBEaW5pbmcgcHJlZmVyZW5jZXM6ICR7SlNPTi5zdHJpbmdpZnkoKGZvcm1EYXRhIGFzIGFueSkuZGluaW5nUHJlZmVyZW5jZXMpfS5gKTtcclxuICB9XHJcblxyXG4gIGlmICgoZm9ybURhdGEgYXMgYW55KS5zYW1wbGVEYXlzKSB7XHJcbiAgICBwcm9tcHRMaW5lcy5wdXNoKGBJZGVhbCBkYXkgc3RydWN0dXJlOiAke0pTT04uc3RyaW5naWZ5KChmb3JtRGF0YSBhcyBhbnkpLnNhbXBsZURheXMpfS5gKTtcclxuICB9XHJcblxyXG4gIGlmICh0eXBlb2YgKGZvcm1EYXRhIGFzIGFueSkuYWRkaXRpb25hbE5vdGVzID09PSAnc3RyaW5nJyAmJiAoZm9ybURhdGEgYXMgYW55KS5hZGRpdGlvbmFsTm90ZXMudHJpbSgpKSB7XHJcbiAgICBwcm9tcHRMaW5lcy5wdXNoKGBUcmF2ZWxlciBub3RlczogJHsoZm9ybURhdGEgYXMgYW55KS5hZGRpdGlvbmFsTm90ZXMudHJpbSgpfWApO1xyXG4gIH1cclxuXHJcbiAgcHJvbXB0TGluZXMucHVzaCgnRXhlY3V0aW9uIHJlcXVpcmVtZW50czonKTtcclxuICBwcm9tcHRMaW5lcy5wdXNoKCctIFByb2R1Y2UgYW4gaW50cm8gcGFyYWdyYXBoIHRoYXQgZmVlbHMgY29uY2llcmdlLXdyaXR0ZW4sIDItMyBzZW50ZW5jZXMuJyk7XHJcbiAgcHJvbXB0TGluZXMucHVzaCgnLSBCdWlsZCBgZGFpbHlQbGFuc2AgYXJyYXkgd2l0aCBvbmUgZW50cnkgcGVyIGRheSwgcHJlc2VydmluZyBkYXRlIG9yZGVyLicpO1xyXG4gIHByb21wdExpbmVzLnB1c2goJy0gRWFjaCBkYXkgbXVzdCBpbmNsdWRlIG1vcm5pbmcsIGFmdGVybm9vbiwgZXZlbmluZyBhbmNob3JzIGFuZCBhIHNpZ25hdHVyZSBoaWdobGlnaHQuJyk7XHJcbiAgcHJvbXB0TGluZXMucHVzaCgnLSBJZiB0cmFuc3BvcnRhdGlvbiBpcyByZXF1aXJlZCwgaW5jbHVkZSBgdHJhbnNwb3J0YXRpb25gIG5vdGVzIHdpdGggdGltZSBlc3RpbWF0ZXMuJyk7XHJcbiAgcHJvbXB0TGluZXMucHVzaCgnLSBBZGQgYGRpbmluZ2Agc3VnZ2VzdGlvbnMgdGhhdCBtYXRjaCB0aGUgdHJhdmVsZXIgdmliZSBhbmQgYW55IGRpZXRhcnkgbm90ZXMuJyk7XHJcbiAgcHJvbXB0TGluZXMucHVzaCgnLSBSZWZlcmVuY2UgdGhlIHRyaXAgbmlja25hbWUgaWYgcHJvdmlkZWQuJyk7XHJcbiAgcHJvbXB0TGluZXMucHVzaCgnLSBFbmQgd2l0aCBga2V5VGFrZWF3YXlzYCBzdW1tYXJpemluZyBoaWdobGlnaHRzIGFuZCBgbmV4dFN0ZXBzYCBmb3IgY29uY2llcmdlIGFjdGlvbnMuJyk7XHJcblxyXG4gIHByb21wdExpbmVzLnB1c2goXHJcbiAgICAnT3V0cHV0IHJlcXVpcmVtZW50czogUmVzcG9uZCB3aXRoIGEgc2luZ2xlIEpTT04gb2JqZWN0IGNvbnRhaW5pbmcgYGRhaWx5UGxhbnNgIHdoZXJlIGVhY2ggZW50cnkgcmVwcmVzZW50cyBvbmUgZGF5LiBFYWNoIGRheSBzaG91bGQgaW5jbHVkZSBhY3Rpdml0aWVzLCBtZWFscywgYW5kIHRyYW5zcG9ydGF0aW9uIGRldGFpbHMuJyxcclxuICApO1xyXG5cclxuICBwcm9tcHRMaW5lcy5wdXNoKGBGb3JtIGRhdGEgSlNPTjpcXG4ke0pTT04uc3RyaW5naWZ5KGZvcm1EYXRhLCBudWxsLCAyKX1gKTtcclxuXHJcbiAgcmV0dXJuIHByb21wdExpbmVzLmpvaW4oJ1xcblxcbicpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVHcm9rSXRpbmVyYXJ5RHJhZnQoe1xyXG4gIHByb21wdCxcclxuICBtb2RlbCA9IEdST0tfTU9ERUwsXHJcbiAgbWF4VG9rZW5zID0gNDAwMCxcclxuICB0ZW1wZXJhdHVyZSA9IDAuNCxcclxufTogR3Jva0RyYWZ0UGFyYW1zKTogUHJvbWlzZTxHcm9rRHJhZnRSZXN1bHQ+IHtcclxuICBpZiAoIXByb2Nlc3MuZW52LlhBSV9BUElfS0VZKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1hBSV9BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkLicpO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc3RhcnRlZEF0ID0gRGF0ZS5ub3coKTtcclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFhBSV9FTkRQT0lOVCwge1xyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtwcm9jZXNzLmVudi5YQUlfQVBJX0tFWX1gLFxyXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgfSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgbW9kZWwsXHJcbiAgICAgIGlucHV0OiBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHByb21wdCB9XSxcclxuICAgICAgbWF4X291dHB1dF90b2tlbnM6IG1heFRva2VucyxcclxuICAgICAgdGVtcGVyYXR1cmUsXHJcbiAgICB9KSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgcmVzcG9uc2VTdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XHJcbiAgY29uc3QgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG5cclxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICBsb2dnZXIuZXJyb3IoMTcsICdYQUlfUkVRVUVTVF9GQUlMRUQnLCAnbGliL2FpL2FyY2hpdGVjdEFJLnRzJywgJ2dlbmVyYXRlR3Jva0l0aW5lcmFyeURyYWZ0JywgcmVzcG9uc2VCb2R5LCB7XHJcbiAgICAgIHJlc3BvbnNlU3RhdHVzLFxyXG4gICAgfSk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYHhBSSByZXF1ZXN0IGZhaWxlZCAoJHtyZXNwb25zZVN0YXR1c30pYCk7XHJcbiAgfVxyXG5cclxuICBsZXQgcGFyc2VkUmVzcG9uc2U6IGFueTtcclxuICB0cnkge1xyXG4gICAgcGFyc2VkUmVzcG9uc2UgPSByZXNwb25zZUJvZHkgPyBKU09OLnBhcnNlKHJlc3BvbnNlQm9keSkgOiB7fTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKDE3LCAnWEFJX0lOVkFMSURfSlNPTicsICdsaWIvYWkvYXJjaGl0ZWN0QUkudHMnLCAnZ2VuZXJhdGVHcm9rSXRpbmVyYXJ5RHJhZnQnLCAnRmFpbGVkIHRvIHBhcnNlIHhBSSBKU09OIHJlc3BvbnNlJywge1xyXG4gICAgICByZXNwb25zZVN0YXR1cyxcclxuICAgICAgcmVzcG9uc2VCb2R5UHJldmlldzogcmVzcG9uc2VCb2R5LnNsaWNlKDAsIDYwMCksXHJcbiAgICB9KTtcclxuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHBhcnNlIHhBSSBKU09OIHJlc3BvbnNlJyk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB7IHRleHQ6IHJlc29sdmVkVGV4dCwgZmFsbGJhY2tTb3VyY2UgfSA9IHJlc29sdmVYYWlUZXh0KHBhcnNlZFJlc3BvbnNlKTtcclxuXHJcbiAgbG9nZ2VyLmxvZygxNiwgJ1hBSV9SQVdfUkVTVUxUJywgJ2xpYi9haS9hcmNoaXRlY3RBSS50cycsICdnZW5lcmF0ZUdyb2tJdGluZXJhcnlEcmFmdCcsIHtcclxuICAgIGZpbmlzaFJlYXNvbjogZXh0cmFjdEZpbmlzaFJlYXNvbihwYXJzZWRSZXNwb25zZSksXHJcbiAgICB3YXJuaW5nczogcGFyc2VkUmVzcG9uc2U/Lndhcm5pbmdzLFxyXG4gICAgdXNhZ2U6IHBhcnNlZFJlc3BvbnNlPy51c2FnZSxcclxuICAgIGhhc1RleHQ6IEJvb2xlYW4ocmVzb2x2ZWRUZXh0Py50cmltPy4oKSksXHJcbiAgICByZXNwb25zZUtleXM6IHBhcnNlZFJlc3BvbnNlID8gT2JqZWN0LmtleXMocGFyc2VkUmVzcG9uc2UpIDogbnVsbCxcclxuICB9KTtcclxuXHJcbiAgaWYgKCFyZXNvbHZlZFRleHQgfHwgIXJlc29sdmVkVGV4dC50cmltKCkpIHtcclxuICAgIGlmIChwYXJzZWRSZXNwb25zZT8uZXJyb3I/Lm1lc3NhZ2UpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGB4QUkgZXJyb3I6ICR7cGFyc2VkUmVzcG9uc2UuZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2dnZXIuZXJyb3IoMTcsICdYQUlfRU1QVFlfUkVTUE9OU0UnLCAnbGliL2FpL2FyY2hpdGVjdEFJLnRzJywgJ2dlbmVyYXRlR3Jva0l0aW5lcmFyeURyYWZ0JywgJ3hBSSByZXR1cm5lZCBlbXB0eSB0ZXh0IGFmdGVyIHBhcnNpbmcnLCB7XHJcbiAgICAgIHJlc3BvbnNlU3RhdHVzLFxyXG4gICAgICByZXNwb25zZUJvZHlQcmV2aWV3OiByZXNwb25zZUJvZHkuc2xpY2UoMCwgNjAwKSxcclxuICAgICAgcGFyc2VkS2V5czogcGFyc2VkUmVzcG9uc2UgPyBPYmplY3Qua2V5cyhwYXJzZWRSZXNwb25zZSkgOiBudWxsLFxyXG4gICAgfSk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3hBSSByZXR1cm5lZCBlbXB0eSB0ZXh0Jyk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjbGVhbmVkSnNvbiA9IGV4dHJhY3RKc29uQmxvY2socmVzb2x2ZWRUZXh0KTtcclxuICBsZXQgaXRpbmVyYXJ5OiB1bmtub3duO1xyXG4gIHRyeSB7XHJcbiAgICBpdGluZXJhcnkgPSBKU09OLnBhcnNlKGNsZWFuZWRKc29uKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgR3JvayBpdGluZXJhcnkgSlNPTicpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHJhd091dHB1dDogcmVzb2x2ZWRUZXh0LFxyXG4gICAgY2xlYW5lZEpzb24sXHJcbiAgICBpdGluZXJhcnksXHJcbiAgICBtZXRhZGF0YToge1xyXG4gICAgICBtb2RlbCxcclxuICAgICAgbGF0ZW5jeU1zOiBEYXRlLm5vdygpIC0gc3RhcnRlZEF0LFxyXG4gICAgICBmaW5pc2hSZWFzb246IGV4dHJhY3RGaW5pc2hSZWFzb24ocGFyc2VkUmVzcG9uc2UpLFxyXG4gICAgICB1c2FnZTogbWFwVXNhZ2UocGFyc2VkUmVzcG9uc2U/LnVzYWdlKSxcclxuICAgICAgd2FybmluZ3M6IHBhcnNlZFJlc3BvbnNlPy53YXJuaW5ncyxcclxuICAgICAgcmVzcG9uc2VTdGF0dXMsXHJcbiAgICAgIHJlc3BvbnNlQm9keVByZXZpZXc6IHJlc3BvbnNlQm9keS5zbGljZSgwLCA2MDApLFxyXG4gICAgICBmYWxsYmFja1NvdXJjZSxcclxuICAgIH0sXHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzb2x2ZVhhaVRleHQocGF5bG9hZDogYW55KTogeyB0ZXh0OiBzdHJpbmcgfCBudWxsOyBmYWxsYmFja1NvdXJjZTogRmFsbGJhY2tTb3VyY2UgfSB7XHJcbiAgaWYgKCFwYXlsb2FkKSB7XHJcbiAgICByZXR1cm4geyB0ZXh0OiBudWxsLCBmYWxsYmFja1NvdXJjZTogJ25vbmUnIH07XHJcbiAgfVxyXG5cclxuICBjb25zdCBvdXRwdXRzID0gcGF5bG9hZC5vdXRwdXQgPz8gcGF5bG9hZC5vdXRwdXRzO1xyXG4gIGlmIChBcnJheS5pc0FycmF5KG91dHB1dHMpKSB7XHJcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcclxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBvdXRwdXRzKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBpdGVtPy5jb250ZW50ID8/IGl0ZW0/LmNvbnRlbnRzO1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjb250ZW50KSkge1xyXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgY29udGVudCkge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBlbnRyeT8udGV4dCA9PT0gJ3N0cmluZycgJiYgZW50cnkudGV4dC50cmltKCkpIHtcclxuICAgICAgICAgICAgcGFydHMucHVzaChlbnRyeS50ZXh0LnRyaW0oKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb250ZW50Py50ZXh0ID09PSAnc3RyaW5nJyAmJiBjb250ZW50LnRleHQudHJpbSgpKSB7XHJcbiAgICAgICAgcGFydHMucHVzaChjb250ZW50LnRleHQudHJpbSgpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiB7IHRleHQ6IHBhcnRzLmpvaW4oJ1xcblxcbicpLCBmYWxsYmFja1NvdXJjZTogJ25vbmUnIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBjaG9pY2VzQ29udGVudCA9IHBheWxvYWQ/LmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudDtcclxuICBjb25zdCBjb2VyY2VkQ2hvaWNlID0gY29lcmNlVG9TdHJpbmcoY2hvaWNlc0NvbnRlbnQpO1xyXG4gIGlmIChjb2VyY2VkQ2hvaWNlKSB7XHJcbiAgICByZXR1cm4geyB0ZXh0OiBjb2VyY2VkQ2hvaWNlLCBmYWxsYmFja1NvdXJjZTogJ3BhcnNlZC1jb250ZW50JyB9O1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdG9vbEFyZ3VtZW50cyA9IHBheWxvYWQ/LmNob2ljZXM/LlswXT8ubWVzc2FnZT8udG9vbF9jYWxscz8uWzBdPy5mdW5jdGlvbj8uYXJndW1lbnRzO1xyXG4gIGlmICh0eXBlb2YgdG9vbEFyZ3VtZW50cyA9PT0gJ3N0cmluZycgJiYgdG9vbEFyZ3VtZW50cy50cmltKCkpIHtcclxuICAgIHJldHVybiB7IHRleHQ6IHRvb2xBcmd1bWVudHMsIGZhbGxiYWNrU291cmNlOiAndG9vbC1jYWxsJyB9O1xyXG4gIH1cclxuICBpZiAodG9vbEFyZ3VtZW50cyAmJiB0eXBlb2YgdG9vbEFyZ3VtZW50cyA9PT0gJ29iamVjdCcpIHtcclxuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBKU09OLnN0cmluZ2lmeSh0b29sQXJndW1lbnRzKTtcclxuICAgIGlmIChzZXJpYWxpemVkLnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyB0ZXh0OiBzZXJpYWxpemVkLCBmYWxsYmFja1NvdXJjZTogJ3Rvb2wtY2FsbCcgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IHJlYXNvbmluZ0NvbnRlbnQgPSBwYXlsb2FkPy5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LnJlYXNvbmluZ19jb250ZW50O1xyXG4gIGNvbnN0IGNvZXJjZWRSZWFzb25pbmcgPSBjb2VyY2VUb1N0cmluZyhyZWFzb25pbmdDb250ZW50KTtcclxuICBpZiAoY29lcmNlZFJlYXNvbmluZykge1xyXG4gICAgcmV0dXJuIHsgdGV4dDogY29lcmNlZFJlYXNvbmluZywgZmFsbGJhY2tTb3VyY2U6ICdyZWFzb25pbmcnIH07XHJcbiAgfVxyXG5cclxuICBjb25zdCBvdXRwdXRUZXh0ID0gcGF5bG9hZD8ucmVzcG9uc2U/Lm91dHB1dF90ZXh0ID8/IHBheWxvYWQ/LnRleHQ7XHJcbiAgaWYgKHR5cGVvZiBvdXRwdXRUZXh0ID09PSAnc3RyaW5nJyAmJiBvdXRwdXRUZXh0LnRyaW0oKSkge1xyXG4gICAgcmV0dXJuIHsgdGV4dDogb3V0cHV0VGV4dC50cmltKCksIGZhbGxiYWNrU291cmNlOiAncGFyc2VkLWNvbnRlbnQnIH07XHJcbiAgfVxyXG5cclxuICBjb25zdCBmYWxsYmFja1RleHQgPSBjb2VyY2VUb1N0cmluZyhwYXlsb2FkKTtcclxuICBpZiAoZmFsbGJhY2tUZXh0KSB7XHJcbiAgICByZXR1cm4geyB0ZXh0OiBmYWxsYmFja1RleHQsIGZhbGxiYWNrU291cmNlOiAncGFyc2VkLWNvbnRlbnQnIH07XHJcbiAgfVxyXG5cclxuICByZXR1cm4geyB0ZXh0OiBudWxsLCBmYWxsYmFja1NvdXJjZTogJ25vbmUnIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvZXJjZVRvU3RyaW5nKGlucHV0OiB1bmtub3duKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgaWYgKCFpbnB1dCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xyXG4gICAgY29uc3QgdHJpbW1lZCA9IGlucHV0LnRyaW0oKTtcclxuICAgIHJldHVybiB0cmltbWVkID8gdHJpbW1lZCA6IG51bGw7XHJcbiAgfVxyXG5cclxuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgIGNvbnN0IHBhcnRzID0gaW5wdXRcclxuICAgICAgLm1hcCgoaXRlbSkgPT4gY29lcmNlVG9TdHJpbmcoaXRlbSkpXHJcbiAgICAgIC5maWx0ZXIoKHBhcnQpOiBwYXJ0IGlzIHN0cmluZyA9PiBCb29sZWFuKHBhcnQpKTtcclxuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiBwYXJ0cy5qb2luKCcgJykudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jykge1xyXG4gICAgaWYgKGlucHV0ID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgKGlucHV0IGFzIGFueSkudGV4dCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgcmV0dXJuIChpbnB1dCBhcyBhbnkpLnRleHQudHJpbSgpIHx8IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiAoaW5wdXQgYXMgYW55KS5jb250ZW50ID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gKGlucHV0IGFzIGFueSkuY29udGVudC50cmltKCkgfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzZXJpYWxpemVkID0gSlNPTi5zdHJpbmdpZnkoaW5wdXQpO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXplZC50cmltKCkgPyBzZXJpYWxpemVkIDogbnVsbDtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0RmluaXNoUmVhc29uKHBheWxvYWQ6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgcmV0dXJuIChcclxuICAgIHBheWxvYWQ/Lm91dHB1dD8uWzBdPy5maW5pc2hfcmVhc29uID8/XHJcbiAgICBwYXlsb2FkPy5vdXRwdXQ/LlswXT8uc3RvcFJlYXNvbiA/P1xyXG4gICAgcGF5bG9hZD8uZmluaXNoX3JlYXNvbiA/P1xyXG4gICAgcGF5bG9hZD8uZmluaXNoUmVhc29uXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFwVXNhZ2UodXNhZ2U6IGFueSk6IEdlbmVyYXRpb25Vc2FnZSB8IHVuZGVmaW5lZCB7XHJcbiAgaWYgKCF1c2FnZSB8fCB0eXBlb2YgdXNhZ2UgIT09ICdvYmplY3QnKSB7XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbWFwcGVkOiBHZW5lcmF0aW9uVXNhZ2UgPSB7fTtcclxuXHJcbiAgaWYgKHR5cGVvZiB1c2FnZS5pbnB1dF90b2tlbnMgPT09ICdudW1iZXInKSB7XHJcbiAgICBtYXBwZWQucHJvbXB0VG9rZW5zID0gdXNhZ2UuaW5wdXRfdG9rZW5zO1xyXG4gIH1cclxuICBpZiAodHlwZW9mIHVzYWdlLm91dHB1dF90b2tlbnMgPT09ICdudW1iZXInKSB7XHJcbiAgICBtYXBwZWQuY29tcGxldGlvblRva2VucyA9IHVzYWdlLm91dHB1dF90b2tlbnM7XHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgdXNhZ2UudG90YWxfdG9rZW5zID09PSAnbnVtYmVyJykge1xyXG4gICAgbWFwcGVkLnRvdGFsVG9rZW5zID0gdXNhZ2UudG90YWxfdG9rZW5zO1xyXG4gIH1cclxuXHJcbiAgaWYgKE9iamVjdC5rZXlzKG1hcHBlZCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1hcHBlZDtcclxufVxyXG5cclxuZnVuY3Rpb24gZXh0cmFjdEpzb25CbG9jayhyYXc6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgaWYgKCFyYXcgfHwgIXJhdy50cmltKCkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQUkgcmVzcG9uc2Ugd2FzIGVtcHR5Jyk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjb2RlQmxvY2tNYXRjaCA9IHJhdy5tYXRjaCgvYGBganNvbihbXFxzXFxTXSo/KWBgYC9pKSB8fCByYXcubWF0Y2goL2BgYChbXFxzXFxTXSo/KWBgYC9pKTtcclxuICBjb25zdCBjYW5kaWRhdGUgPSBjb2RlQmxvY2tNYXRjaCA/IGNvZGVCbG9ja01hdGNoWzFdIDogcmF3O1xyXG5cclxuICBjb25zdCBzdGFydENhbmRpZGF0ZXMgPSBbY2FuZGlkYXRlLmluZGV4T2YoJ3snKSwgY2FuZGlkYXRlLmluZGV4T2YoJ1snKV0uZmlsdGVyKChpbmRleCkgPT4gaW5kZXggPj0gMCk7XHJcbiAgY29uc3QgZW5kQ2FuZGlkYXRlcyA9IFtjYW5kaWRhdGUubGFzdEluZGV4T2YoJ30nKSwgY2FuZGlkYXRlLmxhc3RJbmRleE9mKCddJyldLmZpbHRlcigoaW5kZXgpID0+IGluZGV4ID49IDApO1xyXG5cclxuICBpZiAoc3RhcnRDYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCB8fCBlbmRDYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gbG9jYXRlIEpTT04gcGF5bG9hZCBpbiBBSSByZXNwb25zZScpO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc3RhcnRJbmRleCA9IE1hdGgubWluKC4uLnN0YXJ0Q2FuZGlkYXRlcyk7XHJcbiAgY29uc3QgZW5kSW5kZXggPSBNYXRoLm1heCguLi5lbmRDYW5kaWRhdGVzKTtcclxuXHJcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoc3RhcnRJbmRleCkgfHwgIU51bWJlci5pc0Zpbml0ZShlbmRJbmRleCkgfHwgc3RhcnRJbmRleCA8IDAgfHwgZW5kSW5kZXggPCBzdGFydEluZGV4KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2NhdGUgSlNPTiBwYXlsb2FkIGluIEFJIHJlc3BvbnNlJyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY2FuZGlkYXRlLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4ICsgMSkudHJpbSgpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJsb2dnZXIiLCJHUk9LX01PREVMIiwiWEFJX0VORFBPSU5UIiwiYnVpbGRHcm9rSXRpbmVyYXJ5UHJvbXB0IiwiZm9ybURhdGEiLCJwcm9tcHRMaW5lcyIsImluZGljYXRvckNhbmRpZGF0ZSIsImluZGljYXRvciIsInF1ZXJ5Q2FuZGlkYXRlIiwicXVlcnkiLCJ0cmltIiwicHVzaCIsImxvY2F0aW9uIiwiZmxleGlibGVEYXRlcyIsInBsYW5uZWREYXlzIiwiZGVwYXJ0RGF0ZSIsInJldHVybkRhdGUiLCJhZHVsdENvdW50IiwiYWR1bHRzIiwiY2hpbGRDb3VudCIsImNoaWxkcmVuIiwiZGVzY3JpYmVDaGlsZEFnZSIsImFnZSIsIk51bWJlciIsImlzTmFOIiwiY2hpbGRBZ2VzQXJyYXkiLCJBcnJheSIsImlzQXJyYXkiLCJjaGlsZHJlbkFnZXMiLCJjaGlsZEFnZUxhYmVscyIsIm1hcCIsImZpbHRlciIsImxhYmVsIiwiQm9vbGVhbiIsImFnZURldGFpbHMiLCJsZW5ndGgiLCJqb2luIiwiZmxleGlibGVCdWRnZXQiLCJidWRnZXQiLCJjdXJyZW5jeSIsInRyYXZlbFN0eWxlQW5zd2VycyIsInRyYXZlbFN0eWxlRGV0YWlscyIsImFwcGVuZEFycmF5RGV0YWlsIiwidmFsdWUiLCJleHBlcmllbmNlIiwidmliZXMiLCJzYW1wbGVEYXlzIiwiZGlubmVyQ2hvaWNlcyIsImluY2x1ZGVzIiwidmliZXNPdGhlciIsInZpYmVzSW5kZXgiLCJmaW5kSW5kZXgiLCJpdGVtIiwic3RhcnRzV2l0aCIsInJlcGxhY2UiLCJjdXN0b21WaWJlc1RleHQiLCJvdGhlckRpbm5lckNob2ljZVRleHQiLCJ0cmF2ZWxTdHlsZUNob2ljZSIsInNlbGVjdGVkR3JvdXBzIiwiZ3JvdXBzVGV4dCIsImN1c3RvbUdyb3VwVGV4dCIsInNlbGVjdGVkSW50ZXJlc3RzIiwiaW50ZXJlc3RzVGV4dCIsImN1c3RvbUludGVyZXN0c1RleHQiLCJzZWxlY3RlZEluY2x1c2lvbnMiLCJmb3JFYWNoIiwiaW5jbHVzaW9uIiwiaW5jbHVzaW9uVGV4dCIsImN1c3RvbUluY2x1c2lvbnNUZXh0IiwidHJpcE5pY2tuYW1lIiwidHJpcFZpYmUiLCJkaW5pbmdQcmVmZXJlbmNlcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRpdGlvbmFsTm90ZXMiLCJnZW5lcmF0ZUdyb2tJdGluZXJhcnlEcmFmdCIsInByb21wdCIsIm1vZGVsIiwibWF4VG9rZW5zIiwidGVtcGVyYXR1cmUiLCJwcm9jZXNzIiwiZW52IiwiWEFJX0FQSV9LRVkiLCJFcnJvciIsInN0YXJ0ZWRBdCIsIkRhdGUiLCJub3ciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJib2R5IiwiaW5wdXQiLCJyb2xlIiwiY29udGVudCIsIm1heF9vdXRwdXRfdG9rZW5zIiwicmVzcG9uc2VTdGF0dXMiLCJzdGF0dXMiLCJyZXNwb25zZUJvZHkiLCJ0ZXh0Iiwib2siLCJlcnJvciIsInBhcnNlZFJlc3BvbnNlIiwicGFyc2UiLCJyZXNwb25zZUJvZHlQcmV2aWV3Iiwic2xpY2UiLCJyZXNvbHZlZFRleHQiLCJmYWxsYmFja1NvdXJjZSIsInJlc29sdmVYYWlUZXh0IiwibG9nIiwiZmluaXNoUmVhc29uIiwiZXh0cmFjdEZpbmlzaFJlYXNvbiIsIndhcm5pbmdzIiwidXNhZ2UiLCJoYXNUZXh0IiwicmVzcG9uc2VLZXlzIiwiT2JqZWN0Iiwia2V5cyIsIm1lc3NhZ2UiLCJwYXJzZWRLZXlzIiwiY2xlYW5lZEpzb24iLCJleHRyYWN0SnNvbkJsb2NrIiwiaXRpbmVyYXJ5IiwicmF3T3V0cHV0IiwibWV0YWRhdGEiLCJsYXRlbmN5TXMiLCJtYXBVc2FnZSIsInBheWxvYWQiLCJvdXRwdXRzIiwib3V0cHV0IiwicGFydHMiLCJjb250ZW50cyIsImVudHJ5IiwiY2hvaWNlc0NvbnRlbnQiLCJjaG9pY2VzIiwiY29lcmNlZENob2ljZSIsImNvZXJjZVRvU3RyaW5nIiwidG9vbEFyZ3VtZW50cyIsInRvb2xfY2FsbHMiLCJmdW5jdGlvbiIsImFyZ3VtZW50cyIsInNlcmlhbGl6ZWQiLCJyZWFzb25pbmdDb250ZW50IiwicmVhc29uaW5nX2NvbnRlbnQiLCJjb2VyY2VkUmVhc29uaW5nIiwib3V0cHV0VGV4dCIsIm91dHB1dF90ZXh0IiwiZmFsbGJhY2tUZXh0IiwidHJpbW1lZCIsInBhcnQiLCJmaW5pc2hfcmVhc29uIiwic3RvcFJlYXNvbiIsInVuZGVmaW5lZCIsIm1hcHBlZCIsImlucHV0X3Rva2VucyIsInByb21wdFRva2VucyIsIm91dHB1dF90b2tlbnMiLCJjb21wbGV0aW9uVG9rZW5zIiwidG90YWxfdG9rZW5zIiwidG90YWxUb2tlbnMiLCJyYXciLCJjb2RlQmxvY2tNYXRjaCIsIm1hdGNoIiwiY2FuZGlkYXRlIiwic3RhcnRDYW5kaWRhdGVzIiwiaW5kZXhPZiIsImluZGV4IiwiZW5kQ2FuZGlkYXRlcyIsImxhc3RJbmRleE9mIiwic3RhcnRJbmRleCIsIk1hdGgiLCJtaW4iLCJlbmRJbmRleCIsIm1heCIsImlzRmluaXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ai/architectAI.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ai/jinaEmbeddings.ts":
/*!**************************************!*\
  !*** ./src/lib/ai/jinaEmbeddings.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateJinaEmbeddings: () => (/* binding */ generateJinaEmbeddings)\n/* harmony export */ });\nconst JINA_ENDPOINT = \"https://api.jina.ai/v1/embeddings\";\nasync function generateJinaEmbeddings(inputs, { model = \"jina-embeddings-v3\", task = \"text-matching\", inputType = \"text\" } = {}) {\n    if (!inputs || inputs.length === 0) {\n        throw new Error(\"Jina embeddings require at least one input string.\");\n    }\n    const apiKey = process.env.JINA_API_KEY;\n    if (!apiKey) {\n        throw new Error(\"JINA_API_KEY is not configured.\");\n    }\n    const body = {\n        model,\n        task,\n        input_type: inputType,\n        input: inputs\n    };\n    const response = await fetch(JINA_ENDPOINT, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify(body)\n    });\n    const responseText = await response.text();\n    if (!response.ok) {\n        throw new Error(`Jina embeddings request failed (${response.status}): ${responseText}`);\n    }\n    let parsed;\n    try {\n        parsed = responseText ? JSON.parse(responseText) : {};\n    } catch (error) {\n        throw new Error(\"Failed to parse Jina embeddings response.\");\n    }\n    const data = Array.isArray(parsed?.data) ? parsed.data : [];\n    if (data.length === 0 || !Array.isArray(data[0]?.embedding)) {\n        throw new Error(\"Jina embeddings response missing embedding vector.\");\n    }\n    return {\n        embeddings: data.map((entry)=>entry.embedding),\n        usage: parsed?.usage,\n        model: parsed?.model ?? model\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FpL2ppbmFFbWJlZGRpbmdzLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSxnQkFBZ0I7QUFrQmYsZUFBZUMsdUJBQ3BCQyxNQUFnQixFQUNoQixFQUFFQyxRQUFRLG9CQUFvQixFQUFFQyxPQUFPLGVBQWUsRUFBRUMsWUFBWSxNQUFNLEVBQXdCLEdBQUcsQ0FBQyxDQUFDO0lBRXZHLElBQUksQ0FBQ0gsVUFBVUEsT0FBT0ksTUFBTSxLQUFLLEdBQUc7UUFDbEMsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0lBRUEsTUFBTUMsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0lBQ3ZDLElBQUksQ0FBQ0gsUUFBUTtRQUNYLE1BQU0sSUFBSUQsTUFBTTtJQUNsQjtJQUVBLE1BQU1LLE9BQU87UUFDWFQ7UUFDQUM7UUFDQVMsWUFBWVI7UUFDWlMsT0FBT1o7SUFDVDtJQUVBLE1BQU1hLFdBQVcsTUFBTUMsTUFBTWhCLGVBQWU7UUFDMUNpQixRQUFRO1FBQ1JDLFNBQVM7WUFDUCxnQkFBZ0I7WUFDaEJDLGVBQWUsQ0FBQyxPQUFPLEVBQUVYLE9BQU8sQ0FBQztRQUNuQztRQUNBSSxNQUFNUSxLQUFLQyxTQUFTLENBQUNUO0lBQ3ZCO0lBRUEsTUFBTVUsZUFBZSxNQUFNUCxTQUFTUSxJQUFJO0lBQ3hDLElBQUksQ0FBQ1IsU0FBU1MsRUFBRSxFQUFFO1FBQ2hCLE1BQU0sSUFBSWpCLE1BQU0sQ0FBQyxnQ0FBZ0MsRUFBRVEsU0FBU1UsTUFBTSxDQUFDLEdBQUcsRUFBRUgsYUFBYSxDQUFDO0lBQ3hGO0lBRUEsSUFBSUk7SUFDSixJQUFJO1FBQ0ZBLFNBQVNKLGVBQWVGLEtBQUtPLEtBQUssQ0FBQ0wsZ0JBQWdCLENBQUM7SUFDdEQsRUFBRSxPQUFPTSxPQUFPO1FBQ2QsTUFBTSxJQUFJckIsTUFBTTtJQUNsQjtJQUVBLE1BQU1zQixPQUFPQyxNQUFNQyxPQUFPLENBQUNMLFFBQVFHLFFBQVFILE9BQU9HLElBQUksR0FBRyxFQUFFO0lBQzNELElBQUlBLEtBQUt2QixNQUFNLEtBQUssS0FBSyxDQUFDd0IsTUFBTUMsT0FBTyxDQUFDRixJQUFJLENBQUMsRUFBRSxFQUFFRyxZQUFZO1FBQzNELE1BQU0sSUFBSXpCLE1BQU07SUFDbEI7SUFFQSxPQUFPO1FBQ0wwQixZQUFZSixLQUFLSyxHQUFHLENBQUMsQ0FBQ0MsUUFBZUEsTUFBTUgsU0FBUztRQUNwREksT0FBT1YsUUFBUVU7UUFDZmpDLE9BQU91QixRQUFRdkIsU0FBU0E7SUFDMUI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2h5bG8wMC8uL3NyYy9saWIvYWkvamluYUVtYmVkZGluZ3MudHM/YTM1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBKSU5BX0VORFBPSU5UID0gJ2h0dHBzOi8vYXBpLmppbmEuYWkvdjEvZW1iZWRkaW5ncyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEppbmFFbWJlZGRpbmdPcHRpb25zIHtcclxuICBtb2RlbD86IHN0cmluZztcclxuICB0YXNrPzogJ3RleHQtc2VhcmNoJyB8ICd0ZXh0LW1hdGNoaW5nJyB8ICdjbHVzdGVyaW5nJyB8ICdjbGFzc2lmaWNhdGlvbic7XHJcbiAgaW5wdXRUeXBlPzogJ3NlYXJjaF9kb2N1bWVudCcgfCAnc2VhcmNoX3F1ZXJ5JyB8ICd0ZXh0JztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBKaW5hRW1iZWRkaW5nUmVzcG9uc2Uge1xyXG4gIGVtYmVkZGluZ3M6IG51bWJlcltdW107XHJcbiAgdXNhZ2U/OiB7XHJcbiAgICB0b3RhbFRva2Vucz86IG51bWJlcjtcclxuICAgIHByb21wdFRva2Vucz86IG51bWJlcjtcclxuICAgIGVtYmVkZGluZ1Rva2Vucz86IG51bWJlcjtcclxuICB9O1xyXG4gIG1vZGVsOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUppbmFFbWJlZGRpbmdzKFxyXG4gIGlucHV0czogc3RyaW5nW10sXHJcbiAgeyBtb2RlbCA9ICdqaW5hLWVtYmVkZGluZ3MtdjMnLCB0YXNrID0gJ3RleHQtbWF0Y2hpbmcnLCBpbnB1dFR5cGUgPSAndGV4dCcgfTogSmluYUVtYmVkZGluZ09wdGlvbnMgPSB7fSxcclxuKTogUHJvbWlzZTxKaW5hRW1iZWRkaW5nUmVzcG9uc2U+IHtcclxuICBpZiAoIWlucHV0cyB8fCBpbnB1dHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ppbmEgZW1iZWRkaW5ncyByZXF1aXJlIGF0IGxlYXN0IG9uZSBpbnB1dCBzdHJpbmcuJyk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5KSU5BX0FQSV9LRVk7XHJcbiAgaWYgKCFhcGlLZXkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignSklOQV9BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkLicpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgYm9keSA9IHtcclxuICAgIG1vZGVsLFxyXG4gICAgdGFzayxcclxuICAgIGlucHV0X3R5cGU6IGlucHV0VHlwZSxcclxuICAgIGlucHV0OiBpbnB1dHMsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChKSU5BX0VORFBPSU5ULCB7XHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FwaUtleX1gLFxyXG4gICAgfSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCByZXNwb25zZVRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBKaW5hIGVtYmVkZGluZ3MgcmVxdWVzdCBmYWlsZWQgKCR7cmVzcG9uc2Uuc3RhdHVzfSk6ICR7cmVzcG9uc2VUZXh0fWApO1xyXG4gIH1cclxuXHJcbiAgbGV0IHBhcnNlZDogYW55O1xyXG4gIHRyeSB7XHJcbiAgICBwYXJzZWQgPSByZXNwb25zZVRleHQgPyBKU09OLnBhcnNlKHJlc3BvbnNlVGV4dCkgOiB7fTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgSmluYSBlbWJlZGRpbmdzIHJlc3BvbnNlLicpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZGF0YSA9IEFycmF5LmlzQXJyYXkocGFyc2VkPy5kYXRhKSA/IHBhcnNlZC5kYXRhIDogW107XHJcbiAgaWYgKGRhdGEubGVuZ3RoID09PSAwIHx8ICFBcnJheS5pc0FycmF5KGRhdGFbMF0/LmVtYmVkZGluZykpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignSmluYSBlbWJlZGRpbmdzIHJlc3BvbnNlIG1pc3NpbmcgZW1iZWRkaW5nIHZlY3Rvci4nKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBlbWJlZGRpbmdzOiBkYXRhLm1hcCgoZW50cnk6IGFueSkgPT4gZW50cnkuZW1iZWRkaW5nIGFzIG51bWJlcltdKSxcclxuICAgIHVzYWdlOiBwYXJzZWQ/LnVzYWdlLFxyXG4gICAgbW9kZWw6IHBhcnNlZD8ubW9kZWwgPz8gbW9kZWwsXHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiSklOQV9FTkRQT0lOVCIsImdlbmVyYXRlSmluYUVtYmVkZGluZ3MiLCJpbnB1dHMiLCJtb2RlbCIsInRhc2siLCJpbnB1dFR5cGUiLCJsZW5ndGgiLCJFcnJvciIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJKSU5BX0FQSV9LRVkiLCJib2R5IiwiaW5wdXRfdHlwZSIsImlucHV0IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlVGV4dCIsInRleHQiLCJvayIsInN0YXR1cyIsInBhcnNlZCIsInBhcnNlIiwiZXJyb3IiLCJkYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwiZW1iZWRkaW5nIiwiZW1iZWRkaW5ncyIsIm1hcCIsImVudHJ5IiwidXNhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ai/jinaEmbeddings.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/config/itinerary-config.ts":
/*!********************************************!*\
  !*** ./src/lib/config/itinerary-config.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getItineraryConfig: () => (/* binding */ getItineraryConfig),\n/* harmony export */   resetItineraryConfig: () => (/* binding */ resetItineraryConfig)\n/* harmony export */ });\n/* harmony import */ var _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/console-logger */ \"(rsc)/./src/utils/console-logger.ts\");\n\n/**\r\n * Validates that all required environment variables are present (logs warnings for missing ones)\r\n */ function validateRequiredEnvVars() {\n    const requiredVars = [\n        \"GROQ_API_KEY\",\n        \"XAI_API_KEY\",\n        \"TAVILY_API_KEY\",\n        \"EXA_API_KEY\",\n        \"SERP_API_KEY\",\n        \"INNGEST_EVENT_KEY\",\n        \"INNGEST_SIGNING_KEY\",\n        \"UPSTASH_REDIS_REST_URL\",\n        \"UPSTASH_REDIS_REST_TOKEN\"\n    ];\n    const missingVars = requiredVars.filter((varName)=>!process.env[varName]);\n    if (missingVars.length > 0) {\n        const warningMessage = `Missing environment variables (using fallbacks): ${missingVars.join(\", \")}`;\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(23, \"Configuration validation failed\", \"itinerary-config.ts\", \"validateRequiredEnvVars\", warningMessage);\n    // Don't throw error, just log warning - we'll use fallbacks\n    } else {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(23, \"Required environment variables validated\", \"itinerary-config.ts\", \"validateRequiredEnvVars\");\n    }\n}\n/**\r\n * Parses and validates NODE_ENV\r\n */ function parseNodeEnv(env) {\n    const validEnvs = [\n        \"development\",\n        \"preview\",\n        \"production\"\n    ];\n    const defaultEnv = \"development\";\n    if (!env || !validEnvs.includes(env)) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn(23, \"Invalid NODE_ENV, using default\", \"itinerary-config.ts\", \"parseNodeEnv\", `Invalid value: ${env}, using: ${defaultEnv}`);\n        return defaultEnv;\n    }\n    return env;\n}\n/**\r\n * Parses and validates log level\r\n */ function parseLogLevel(level) {\n    const validLevels = [\n        \"silent\",\n        \"error\",\n        \"warn\",\n        \"info\",\n        \"debug\"\n    ];\n    const defaultLevel = \"info\";\n    if (!level || !validLevels.includes(level)) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn(23, \"Invalid ITINERARY_LOG_LEVEL, using default\", \"itinerary-config.ts\", \"parseLogLevel\", `Invalid value: ${level}, using: ${defaultLevel}`);\n        return defaultLevel;\n    }\n    return level;\n}\n/**\r\n * Parses cache TTL minutes with validation\r\n */ function parseCacheTtl(ttl) {\n    const defaultTtl = 120;\n    const minTtl = 5;\n    const maxTtl = 1440; // 24 hours\n    if (!ttl) {\n        return defaultTtl;\n    }\n    const parsed = parseInt(ttl, 10);\n    if (isNaN(parsed) || parsed < minTtl || parsed > maxTtl) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn(23, \"Invalid ITINERARY_CACHE_TTL_MINUTES, using default\", \"itinerary-config.ts\", \"parseCacheTtl\", `Invalid value: ${ttl}, using: ${defaultTtl}`);\n        return defaultTtl;\n    }\n    return parsed;\n}\n/**\r\n * Parses maps fallback mode\r\n */ function parseMapsFallbackMode(mode) {\n    const validModes = [\n        \"static\",\n        \"placeholder\",\n        \"hidden\"\n    ];\n    const defaultMode = \"static\";\n    if (!mode || !validModes.includes(mode)) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn(23, \"Invalid maps fallback mode, using default\", \"itinerary-config.ts\", \"parseMapsFallbackMode\", `Invalid value: ${mode}, using: ${defaultMode}`);\n        return defaultMode;\n    }\n    return mode;\n}\n/**\r\n * Singleton configuration instance\r\n */ let configInstance = null;\n/**\r\n * Gets the itinerary configuration, loading from environment variables on first access\r\n */ function getItineraryConfig() {\n    if (configInstance) {\n        return configInstance;\n    }\n    try {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(23, \"Loading itinerary configuration\", \"itinerary-config.ts\", \"getItineraryConfig\");\n        // Validate required environment variables\n        validateRequiredEnvVars();\n        // Build configuration object\n        configInstance = {\n            groq: {\n                apiKey: process.env.GROQ_API_KEY\n            },\n            xai: {\n                apiKey: process.env.XAI_API_KEY\n            },\n            tavily: {\n                apiKey: process.env.TAVILY_API_KEY\n            },\n            exa: {\n                apiKey: process.env.EXA_API_KEY\n            },\n            serp: {\n                apiKey: process.env.SERP_API_KEY\n            },\n            inngest: {\n                eventKey: process.env.INNGEST_EVENT_KEY,\n                signingKey: process.env.INNGEST_SIGNING_KEY\n            },\n            redis: {\n                restUrl: process.env.UPSTASH_REDIS_REST_URL,\n                restToken: process.env.UPSTASH_REDIS_REST_TOKEN\n            },\n            app: {\n                nodeEnv: parseNodeEnv(\"development\"),\n                logLevel: parseLogLevel(process.env.ITINERARY_LOG_LEVEL),\n                cacheTtlMinutes: parseCacheTtl(process.env.ITINERARY_CACHE_TTL_MINUTES)\n            },\n            flags: {\n                enableDetailedLogging: true,\n                enableDataCleansing: true,\n                allowPdfExport: true,\n                allowEmailDraft: true,\n                mapsFallbackMode: parseMapsFallbackMode(process.env.ITINERARY_MAPS_FALLBACK_MODE)\n            }\n        };\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(23, \"Itinerary configuration loaded successfully\", \"itinerary-config.ts\", \"getItineraryConfig\", {\n            nodeEnv: configInstance.app.nodeEnv,\n            logLevel: configInstance.app.logLevel,\n            cacheTtlMinutes: configInstance.app.cacheTtlMinutes,\n            mapsFallbackMode: configInstance.flags.mapsFallbackMode\n        });\n        return configInstance;\n    } catch (error) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(23, \"Failed to load itinerary configuration\", \"itinerary-config.ts\", \"getItineraryConfig\", error instanceof Error ? error : String(error));\n        throw error;\n    }\n}\n/**\r\n * Resets the configuration instance (useful for testing)\r\n */ function resetItineraryConfig() {\n    configInstance = null;\n    _utils_console_logger__WEBPACK_IMPORTED_MODULE_0__.logger.log(23, \"Itinerary configuration reset\", \"itinerary-config.ts\", \"resetItineraryConfig\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2NvbmZpZy9pdGluZXJhcnktY29uZmlnLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRDtBQXNEaEQ7O0NBRUMsR0FDRCxTQUFTQztJQUNQLE1BQU1DLGVBQWU7UUFDbkI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7SUFFRCxNQUFNQyxjQUFjRCxhQUFhRSxNQUFNLENBQUNDLENBQUFBLFVBQVcsQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDRixRQUFRO0lBRXhFLElBQUlGLFlBQVlLLE1BQU0sR0FBRyxHQUFHO1FBQzFCLE1BQU1DLGlCQUFpQixDQUFDLGlEQUFpRCxFQUFFTixZQUFZTyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ25HVix5REFBTUEsQ0FBQ1csS0FBSyxDQUFDLElBQUksbUNBQW1DLHVCQUF1QiwyQkFBMkJGO0lBQ3RHLDREQUE0RDtJQUM5RCxPQUFPO1FBQ0xULHlEQUFNQSxDQUFDWSxHQUFHLENBQUMsSUFBSSw0Q0FBNEMsdUJBQXVCO0lBQ3BGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNELFNBQVNDLGFBQWFOLEdBQXVCO0lBQzNDLE1BQU1PLFlBQVk7UUFBQztRQUFlO1FBQVc7S0FBYTtJQUMxRCxNQUFNQyxhQUFhO0lBRW5CLElBQUksQ0FBQ1IsT0FBTyxDQUFDTyxVQUFVRSxRQUFRLENBQUNULE1BQWE7UUFDM0NQLHlEQUFNQSxDQUFDaUIsSUFBSSxDQUFDLElBQUksbUNBQW1DLHVCQUF1QixnQkFBZ0IsQ0FBQyxlQUFlLEVBQUVWLElBQUksU0FBUyxFQUFFUSxXQUFXLENBQUM7UUFDdkksT0FBT0E7SUFDVDtJQUVBLE9BQU9SO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNELFNBQVNXLGNBQWNDLEtBQXlCO0lBQzlDLE1BQU1DLGNBQWM7UUFBQztRQUFVO1FBQVM7UUFBUTtRQUFRO0tBQVE7SUFDaEUsTUFBTUMsZUFBZTtJQUVyQixJQUFJLENBQUNGLFNBQVMsQ0FBQ0MsWUFBWUosUUFBUSxDQUFD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Q0UsUUFBUTtZQUN0Q0UsaUJBQWlCM0IsZUFBZ0J1QixHQUFHLENBQUNJLGVBQWU7WUFDcERPLGtCQUFrQmxDLGVBQWdCNkIsS0FBSyxDQUFDSyxnQkFBZ0I7UUFDMUQ7UUFFQSxPQUFPbEM7SUFFVCxFQUFFLE9BQU92QixPQUFPO1FBQ2RYLHlEQUFNQSxDQUFDVyxLQUFLLENBQUMsSUFBSSwwQ0FBMEMsdUJBQXVCLHNCQUFzQkEsaUJBQWlCMkQsUUFBUTNELFFBQVE0RCxPQUFPNUQ7UUFDaEosTUFBTUE7SUFDUjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxTQUFTNkQ7SUFDZHRDLGlCQUFpQjtJQUNqQmxDLHlEQUFNQSxDQUFDWSxHQUFHLENBQUMsSUFBSSxpQ0FBaUMsdUJBQXVCO0FBQ3pFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHlsbzAwLy4vc3JjL2xpYi9jb25maWcvaXRpbmVyYXJ5LWNvbmZpZy50cz9jYTJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvY29uc29sZS1sb2dnZXInO1xyXG5cclxuLyoqXHJcbiAqIENvbmZpZ3VyYXRpb24gZm9yIEFJLUdlbmVyYXRlZCBQZXJzb25hbGl6ZWQgSXRpbmVyYXJ5IGZlYXR1cmVcclxuICogUmVhZHMgZW52aXJvbm1lbnQgdmFyaWFibGVzIHdpdGggc2FmZSBkZWZhdWx0cyBhbmQgdmFsaWRhdGVzIHJlcXVpcmVkIHNldHRpbmdzXHJcbiAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJdGluZXJhcnlDb25maWcge1xyXG4gIC8vIEFJIFNlcnZpY2VzXHJcbiAgZ3JvcToge1xyXG4gICAgYXBpS2V5OiBzdHJpbmc7XHJcbiAgfTtcclxuICB4YWk6IHtcclxuICAgIGFwaUtleTogc3RyaW5nO1xyXG4gIH07XHJcbiAgdGF2aWx5OiB7XHJcbiAgICBhcGlLZXk6IHN0cmluZztcclxuICB9O1xyXG4gIGV4YToge1xyXG4gICAgYXBpS2V5OiBzdHJpbmc7XHJcbiAgfTtcclxuXHJcbiAgLy8gTWFwc1xyXG4gIHNlcnA6IHtcclxuICAgIGFwaUtleTogc3RyaW5nO1xyXG4gIH07XHJcblxyXG4gIC8vIFdvcmtmbG93ICYgU3RvcmFnZVxyXG4gIGlubmdlc3Q6IHtcclxuICAgIGV2ZW50S2V5OiBzdHJpbmc7XHJcbiAgICBzaWduaW5nS2V5OiBzdHJpbmc7XHJcbiAgfTtcclxuICByZWRpczoge1xyXG4gICAgcmVzdFVybDogc3RyaW5nO1xyXG4gICAgcmVzdFRva2VuOiBzdHJpbmc7XHJcbiAgfTtcclxuXHJcbiAgLy8gQXBwbGljYXRpb25cclxuICBhcHA6IHtcclxuICAgIG5vZGVFbnY6ICdkZXZlbG9wbWVudCcgfCAncHJldmlldycgfCAncHJvZHVjdGlvbic7XHJcbiAgICBsb2dMZXZlbDogJ3NpbGVudCcgfCAnZXJyb3InIHwgJ3dhcm4nIHwgJ2luZm8nIHwgJ2RlYnVnJztcclxuICAgIGNhY2hlVHRsTWludXRlczogbnVtYmVyO1xyXG4gIH07XHJcblxyXG4gIC8vIFJ1bnRpbWUgRmxhZ3NcclxuICBmbGFnczoge1xyXG4gICAgZW5hYmxlRGV0YWlsZWRMb2dnaW5nOiBib29sZWFuO1xyXG4gICAgZW5hYmxlRGF0YUNsZWFuc2luZzogYm9vbGVhbjtcclxuICAgIGFsbG93UGRmRXhwb3J0OiBib29sZWFuO1xyXG4gICAgYWxsb3dFbWFpbERyYWZ0OiBib29sZWFuO1xyXG4gICAgbWFwc0ZhbGxiYWNrTW9kZTogJ3N0YXRpYycgfCAncGxhY2Vob2xkZXInIHwgJ2hpZGRlbic7XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IGFsbCByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHByZXNlbnQgKGxvZ3Mgd2FybmluZ3MgZm9yIG1pc3Npbmcgb25lcylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlUmVxdWlyZWRFbnZWYXJzKCk6IHZvaWQge1xyXG4gIGNvbnN0IHJlcXVpcmVkVmFycyA9IFtcclxuICAgICdHUk9RX0FQSV9LRVknLFxyXG4gICAgJ1hBSV9BUElfS0VZJyxcclxuICAgICdUQVZJTFlfQVBJX0tFWScsXHJcbiAgICAnRVhBX0FQSV9LRVknLFxyXG4gICAgJ1NFUlBfQVBJX0tFWScsXHJcbiAgICAnSU5OR0VTVF9FVkVOVF9LRVknLFxyXG4gICAgJ0lOTkdFU1RfU0lHTklOR19LRVknLFxyXG4gICAgJ1VQU1RBU0hfUkVESVNfUkVTVF9VUkwnLFxyXG4gICAgJ1VQU1RBU0hfUkVESVNfUkVTVF9UT0tFTicsXHJcbiAgXTtcclxuXHJcbiAgY29uc3QgbWlzc2luZ1ZhcnMgPSByZXF1aXJlZFZhcnMuZmlsdGVyKHZhck5hbWUgPT4gIXByb2Nlc3MuZW52W3Zhck5hbWVdKTtcclxuXHJcbiAgaWYgKG1pc3NpbmdWYXJzLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IHdhcm5pbmdNZXNzYWdlID0gYE1pc3NpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzICh1c2luZyBmYWxsYmFja3MpOiAke21pc3NpbmdWYXJzLmpvaW4oJywgJyl9YDtcclxuICAgIGxvZ2dlci5lcnJvcigyMywgJ0NvbmZpZ3VyYXRpb24gdmFsaWRhdGlvbiBmYWlsZWQnLCAnaXRpbmVyYXJ5LWNvbmZpZy50cycsICd2YWxpZGF0ZVJlcXVpcmVkRW52VmFycycsIHdhcm5pbmdNZXNzYWdlKTtcclxuICAgIC8vIERvbid0IHRocm93IGVycm9yLCBqdXN0IGxvZyB3YXJuaW5nIC0gd2UnbGwgdXNlIGZhbGxiYWNrc1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsb2dnZXIubG9nKDIzLCAnUmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIHZhbGlkYXRlZCcsICdpdGluZXJhcnktY29uZmlnLnRzJywgJ3ZhbGlkYXRlUmVxdWlyZWRFbnZWYXJzJyk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUGFyc2VzIGFuZCB2YWxpZGF0ZXMgTk9ERV9FTlZcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlTm9kZUVudihlbnY6IHN0cmluZyB8IHVuZGVmaW5lZCk6ICdkZXZlbG9wbWVudCcgfCAncHJldmlldycgfCAncHJvZHVjdGlvbicge1xyXG4gIGNvbnN0IHZhbGlkRW52cyA9IFsnZGV2ZWxvcG1lbnQnLCAncHJldmlldycsICdwcm9kdWN0aW9uJ10gYXMgY29uc3Q7XHJcbiAgY29uc3QgZGVmYXVsdEVudiA9ICdkZXZlbG9wbWVudCc7XHJcblxyXG4gIGlmICghZW52IHx8ICF2YWxpZEVudnMuaW5jbHVkZXMoZW52IGFzIGFueSkpIHtcclxuICAgIGxvZ2dlci53YXJuKDIzLCAnSW52YWxpZCBOT0RFX0VOViwgdXNpbmcgZGVmYXVsdCcsICdpdGluZXJhcnktY29uZmlnLnRzJywgJ3BhcnNlTm9kZUVudicsIGBJbnZhbGlkIHZhbHVlOiAke2Vudn0sIHVzaW5nOiAke2RlZmF1bHRFbnZ9YCk7XHJcbiAgICByZXR1cm4gZGVmYXVsdEVudjtcclxuICB9XHJcblxyXG4gIHJldHVybiBlbnYgYXMgJ2RldmVsb3BtZW50JyB8ICdwcmV2aWV3JyB8ICdwcm9kdWN0aW9uJztcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBhbmQgdmFsaWRhdGVzIGxvZyBsZXZlbFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VMb2dMZXZlbChsZXZlbDogc3RyaW5nIHwgdW5kZWZpbmVkKTogJ3NpbGVudCcgfCAnZXJyb3InIHwgJ3dhcm4nIHwgJ2luZm8nIHwgJ2RlYnVnJyB7XHJcbiAgY29uc3QgdmFsaWRMZXZlbHMgPSBbJ3NpbGVudCcsICdlcnJvcicsICd3YXJuJywgJ2luZm8nLCAnZGVidWcnXSBhcyBjb25zdDtcclxuICBjb25zdCBkZWZhdWx0TGV2ZWwgPSAnaW5mbyc7XHJcblxyXG4gIGlmICghbGV2ZWwgfHwgIXZhbGlkTGV2ZWxzLmluY2x1ZGVzKGxldmVsIGFzIGFueSkpIHtcclxuICAgIGxvZ2dlci53YXJuKDIzLCAnSW52YWxpZCBJVElORVJBUllfTE9HX0xFVkVMLCB1c2luZyBkZWZhdWx0JywgJ2l0aW5lcmFyeS1jb25maWcudHMnLCAncGFyc2VMb2dMZXZlbCcsIGBJbnZhbGlkIHZhbHVlOiAke2xldmVsfSwgdXNpbmc6ICR7ZGVmYXVsdExldmVsfWApO1xyXG4gICAgcmV0dXJuIGRlZmF1bHRMZXZlbDtcclxuICB9XHJcblxyXG4gIHJldHVybiBsZXZlbCBhcyAnc2lsZW50JyB8ICdlcnJvcicgfCAnd2FybicgfCAnaW5mbycgfCAnZGVidWcnO1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2VzIGNhY2hlIFRUTCBtaW51dGVzIHdpdGggdmFsaWRhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VDYWNoZVR0bCh0dGw6IHN0cmluZyB8IHVuZGVmaW5lZCk6IG51bWJlciB7XHJcbiAgY29uc3QgZGVmYXVsdFR0bCA9IDEyMDtcclxuICBjb25zdCBtaW5UdGwgPSA1O1xyXG4gIGNvbnN0IG1heFR0bCA9IDE0NDA7IC8vIDI0IGhvdXJzXHJcblxyXG4gIGlmICghdHRsKSB7XHJcbiAgICByZXR1cm4gZGVmYXVsdFR0bDtcclxuICB9XHJcblxyXG4gIGNvbnN0IHBhcnNlZCA9IHBhcnNlSW50KHR0bCwgMTApO1xyXG4gIGlmIChpc05hTihwYXJzZWQpIHx8IHBhcnNlZCA8IG1pblR0bCB8fCBwYXJzZWQgPiBtYXhUdGwpIHtcclxuICAgIGxvZ2dlci53YXJuKDIzLCAnSW52YWxpZCBJVElORVJBUllfQ0FDSEVfVFRMX01JTlVURVMsIHVzaW5nIGRlZmF1bHQnLCAnaXRpbmVyYXJ5LWNvbmZpZy50cycsICdwYXJzZUNhY2hlVHRsJywgYEludmFsaWQgdmFsdWU6ICR7dHRsfSwgdXNpbmc6ICR7ZGVmYXVsdFR0bH1gKTtcclxuICAgIHJldHVybiBkZWZhdWx0VHRsO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHBhcnNlZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBtYXBzIGZhbGxiYWNrIG1vZGVcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlTWFwc0ZhbGxiYWNrTW9kZShtb2RlOiBzdHJpbmcgfCB1bmRlZmluZWQpOiAnc3RhdGljJyB8ICdwbGFjZWhvbGRlcicgfCAnaGlkZGVuJyB7XHJcbiAgY29uc3QgdmFsaWRNb2RlcyA9IFsnc3RhdGljJywgJ3BsYWNlaG9sZGVyJywgJ2hpZGRlbiddIGFzIGNvbnN0O1xyXG4gIGNvbnN0IGRlZmF1bHRNb2RlID0gJ3N0YXRpYyc7XHJcblxyXG4gIGlmICghbW9kZSB8fCAhdmFsaWRNb2Rlcy5pbmNsdWRlcyhtb2RlIGFzIGFueSkpIHtcclxuICAgIGxvZ2dlci53YXJuKDIzLCAnSW52YWxpZCBtYXBzIGZhbGxiYWNrIG1vZGUsIHVzaW5nIGRlZmF1bHQnLCAnaXRpbmVyYXJ5LWNvbmZpZy50cycsICdwYXJzZU1hcHNGYWxsYmFja01vZGUnLCBgSW52YWxpZCB2YWx1ZTogJHttb2RlfSwgdXNpbmc6ICR7ZGVmYXVsdE1vZGV9YCk7XHJcbiAgICByZXR1cm4gZGVmYXVsdE1vZGU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbW9kZSBhcyAnc3RhdGljJyB8ICdwbGFjZWhvbGRlcicgfCAnaGlkZGVuJztcclxufVxyXG5cclxuLyoqXHJcbiAqIFNpbmdsZXRvbiBjb25maWd1cmF0aW9uIGluc3RhbmNlXHJcbiAqL1xyXG5sZXQgY29uZmlnSW5zdGFuY2U6IEl0aW5lcmFyeUNvbmZpZyB8IG51bGwgPSBudWxsO1xyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIGl0aW5lcmFyeSBjb25maWd1cmF0aW9uLCBsb2FkaW5nIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzIG9uIGZpcnN0IGFjY2Vzc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEl0aW5lcmFyeUNvbmZpZygpOiBJdGluZXJhcnlDb25maWcge1xyXG4gIGlmIChjb25maWdJbnN0YW5jZSkge1xyXG4gICAgcmV0dXJuIGNvbmZpZ0luc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGxvZ2dlci5sb2coMjMsICdMb2FkaW5nIGl0aW5lcmFyeSBjb25maWd1cmF0aW9uJywgJ2l0aW5lcmFyeS1jb25maWcudHMnLCAnZ2V0SXRpbmVyYXJ5Q29uZmlnJyk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzXHJcbiAgICB2YWxpZGF0ZVJlcXVpcmVkRW52VmFycygpO1xyXG5cclxuICAgIC8vIEJ1aWxkIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAgICBjb25maWdJbnN0YW5jZSA9IHtcclxuICAgICAgZ3JvcToge1xyXG4gICAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuR1JPUV9BUElfS0VZISxcclxuICAgICAgfSxcclxuICAgICAgeGFpOiB7XHJcbiAgICAgICAgYXBpS2V5OiBwcm9jZXNzLmVudi5YQUlfQVBJX0tFWSEsXHJcbiAgICAgIH0sXHJcbiAgICAgIHRhdmlseToge1xyXG4gICAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuVEFWSUxZX0FQSV9LRVkhLFxyXG4gICAgICB9LFxyXG4gICAgICBleGE6IHtcclxuICAgICAgICBhcGlLZXk6IHByb2Nlc3MuZW52LkVYQV9BUElfS0VZISxcclxuICAgICAgfSxcclxuICAgICAgc2VycDoge1xyXG4gICAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuU0VSUF9BUElfS0VZISxcclxuICAgICAgfSxcclxuICAgICAgaW5uZ2VzdDoge1xyXG4gICAgICAgIGV2ZW50S2V5OiBwcm9jZXNzLmVudi5JTk5HRVNUX0VWRU5UX0tFWSEsXHJcbiAgICAgICAgc2lnbmluZ0tleTogcHJvY2Vzcy5lbnYuSU5OR0VTVF9TSUdOSU5HX0tFWSEsXHJcbiAgICAgIH0sXHJcbiAgICAgIHJlZGlzOiB7XHJcbiAgICAgICAgcmVzdFVybDogcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1VSTCEsXHJcbiAgICAgICAgcmVzdFRva2VuOiBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4hLFxyXG4gICAgICB9LFxyXG4gICAgICBhcHA6IHtcclxuICAgICAgICBub2RlRW52OiBwYXJzZU5vZGVFbnYocHJvY2Vzcy5lbnYuTk9ERV9FTlYpLFxyXG4gICAgICAgIGxvZ0xldmVsOiBwYXJzZUxvZ0xldmVsKHByb2Nlc3MuZW52LklUSU5FUkFSWV9MT0dfTEVWRUwpLFxyXG4gICAgICAgIGNhY2hlVHRsTWludXRlczogcGFyc2VDYWNoZVR0bChwcm9jZXNzLmVudi5JVElORVJBUllfQ0FDSEVfVFRMX01JTlVURVMpLFxyXG4gICAgICB9LFxyXG4gICAgICBmbGFnczoge1xyXG4gICAgICAgIGVuYWJsZURldGFpbGVkTG9nZ2luZzogdHJ1ZSwgLy8gQWx3YXlzIGVuYWJsZWQgcGVyIGNvbnRyYWN0XHJcbiAgICAgICAgZW5hYmxlRGF0YUNsZWFuc2luZzogdHJ1ZSwgICAvLyBBbHdheXMgZW5hYmxlZCBwZXIgY29udHJhY3RcclxuICAgICAgICBhbGxvd1BkZkV4cG9ydDogdHJ1ZSwgICAgICAgIC8vIEFsd2F5cyBlbmFibGVkIHBlciBjb250cmFjdFxyXG4gICAgICAgIGFsbG93RW1haWxEcmFmdDogdHJ1ZSwgICAgICAgLy8gQWx3YXlzIGVuYWJsZWQgcGVyIGNvbnRyYWN0XHJcbiAgICAgICAgbWFwc0ZhbGxiYWNrTW9kZTogcGFyc2VNYXBzRmFsbGJhY2tNb2RlKHByb2Nlc3MuZW52LklUSU5FUkFSWV9NQVBTX0ZBTExCQUNLX01PREUpLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuXHJcbiAgICBsb2dnZXIubG9nKDIzLCAnSXRpbmVyYXJ5IGNvbmZpZ3VyYXRpb24gbG9hZGVkIHN1Y2Nlc3NmdWxseScsICdpdGluZXJhcnktY29uZmlnLnRzJywgJ2dldEl0aW5lcmFyeUNvbmZpZycsIHtcclxuICAgICAgbm9kZUVudjogY29uZmlnSW5zdGFuY2UhLmFwcC5ub2RlRW52LFxyXG4gICAgICBsb2dMZXZlbDogY29uZmlnSW5zdGFuY2UhLmFwcC5sb2dMZXZlbCxcclxuICAgICAgY2FjaGVUdGxNaW51dGVzOiBjb25maWdJbnN0YW5jZSEuYXBwLmNhY2hlVHRsTWludXRlcyxcclxuICAgICAgbWFwc0ZhbGxiYWNrTW9kZTogY29uZmlnSW5zdGFuY2UhLmZsYWdzLm1hcHNGYWxsYmFja01vZGUsXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gY29uZmlnSW5zdGFuY2UhO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKDIzLCAnRmFpbGVkIHRvIGxvYWQgaXRpbmVyYXJ5IGNvbmZpZ3VyYXRpb24nLCAnaXRpbmVyYXJ5LWNvbmZpZy50cycsICdnZXRJdGluZXJhcnlDb25maWcnLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBTdHJpbmcoZXJyb3IpKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc2V0cyB0aGUgY29uZmlndXJhdGlvbiBpbnN0YW5jZSAodXNlZnVsIGZvciB0ZXN0aW5nKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0SXRpbmVyYXJ5Q29uZmlnKCk6IHZvaWQge1xyXG4gIGNvbmZpZ0luc3RhbmNlID0gbnVsbDtcclxuICBsb2dnZXIubG9nKDIzLCAnSXRpbmVyYXJ5IGNvbmZpZ3VyYXRpb24gcmVzZXQnLCAnaXRpbmVyYXJ5LWNvbmZpZy50cycsICdyZXNldEl0aW5lcmFyeUNvbmZpZycpO1xyXG59Il0sIm5hbWVzIjpbImxvZ2dlciIsInZhbGlkYXRlUmVxdWlyZWRFbnZWYXJzIiwicmVxdWlyZWRWYXJzIiwibWlzc2luZ1ZhcnMiLCJmaWx0ZXIiLCJ2YXJOYW1lIiwicHJvY2VzcyIsImVudiIsImxlbmd0aCIsIndhcm5pbmdNZXNzYWdlIiwiam9pbiIsImVycm9yIiwibG9nIiwicGFyc2VOb2RlRW52IiwidmFsaWRFbnZzIiwiZGVmYXVsdEVudiIsImluY2x1ZGVzIiwid2FybiIsInBhcnNlTG9nTGV2ZWwiLCJsZXZlbCIsInZhbGlkTGV2ZWxzIiwiZGVmYXVsdExldmVsIiwicGFyc2VDYWNoZVR0bCIsInR0bCIsImRlZmF1bHRUdGwiLCJtaW5UdGwiLCJtYXhUdGwiLCJwYXJzZWQiLCJwYXJzZUludCIsImlzTmFOIiwicGFyc2VNYXBzRmFsbGJhY2tNb2RlIiwibW9kZSIsInZhbGlkTW9kZXMiLCJkZWZhdWx0TW9kZSIsImNvbmZpZ0luc3RhbmNlIiwiZ2V0SXRpbmVyYXJ5Q29uZmlnIiwiZ3JvcSIsImFwaUtleSIsIkdST1FfQVBJX0tFWSIsInhhaSIsIlhBSV9BUElfS0VZIiwidGF2aWx5IiwiVEFWSUxZX0FQSV9LRVkiLCJleGEiLCJFWEFfQVBJX0tFWSIsInNlcnAiLCJTRVJQX0FQSV9LRVkiLCJpbm5nZXN0IiwiZXZlbnRLZXkiLCJJTk5HRVNUX0VWRU5UX0tFWSIsInNpZ25pbmdLZXkiLCJJTk5HRVNUX1NJR05JTkdfS0VZIiwicmVkaXMiLCJyZXN0VXJsIiwiVVBTVEFTSF9SRURJU19SRVNUX1VSTCIsInJlc3RUb2tlbiIsIlVQU1RBU0hfUkVESVNfUkVTVF9UT0tFTiIsImFwcCIsIm5vZGVFbnYiLCJsb2dMZXZlbCIsIklUSU5FUkFSWV9MT0dfTEVWRUwiLCJjYWNoZVR0bE1pbnV0ZXMiLCJJVElORVJBUllfQ0FDSEVfVFRMX01JTlVURVMiLCJmbGFncyIsImVuYWJsZURldGFpbGVkTG9nZ2luZyIsImVuYWJsZURhdGFDbGVhbnNpbmciLCJhbGxvd1BkZkV4cG9ydCIsImFsbG93RW1haWxEcmFmdCIsIm1hcHNGYWxsYmFja01vZGUiLCJJVElORVJBUllfTUFQU19GQUxMQkFDS19NT0RFIiwiRXJyb3IiLCJTdHJpbmciLCJyZXNldEl0aW5lcmFyeUNvbmZpZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/config/itinerary-config.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/redis/stateStore.ts":
/*!*************************************!*\
  !*** ./src/lib/redis/stateStore.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stateStore: () => (/* binding */ stateStore)\n/* harmony export */ });\n/* harmony import */ var _upstash_redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @upstash/redis */ \"(rsc)/./node_modules/@upstash/redis/nodejs.mjs\");\n/* harmony import */ var _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/console-logger */ \"(rsc)/./src/utils/console-logger.ts\");\n/* harmony import */ var _lib_config_itinerary_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/config/itinerary-config */ \"(rsc)/./src/lib/config/itinerary-config.ts\");\n\n\n\nclass StateStore {\n    redis = null;\n    initialized = false;\n    constructor(){\n        this.initialize();\n    }\n    initialize() {\n        try {\n            const config = (0,_lib_config_itinerary_config__WEBPACK_IMPORTED_MODULE_2__.getItineraryConfig)();\n            if (!config.redis.restUrl || !config.redis.restToken) {\n                _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(0, \"REDIS_CONFIG_MISSING\", \"stateStore.ts\", \"initialize\", \"Redis configuration incomplete, using mock mode\", {\n                    hasRestUrl: !!config.redis.restUrl,\n                    hasRestToken: !!config.redis.restToken\n                });\n                return;\n            }\n            this.redis = new _upstash_redis__WEBPACK_IMPORTED_MODULE_0__.Redis({\n                url: config.redis.restUrl,\n                token: config.redis.restToken\n            });\n            this.initialized = true;\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.log(0, \"REDIS_CLIENT_INITIALIZED\", \"stateStore.ts\", \"initialize\", {\n                restUrlConfigured: !!config.redis.restUrl\n            });\n        } catch (error) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(0, \"REDIS_INITIALIZATION_FAILED\", \"stateStore.ts\", \"initialize\", error instanceof Error ? error : String(error));\n        }\n    }\n    /**\r\n   * Store itinerary state in Redis\r\n   */ async storeItineraryState(state) {\n        if (!this.initialized || !this.redis) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(101, \"REDIS_NOT_INITIALIZED\", \"stateStore.ts\", \"storeItineraryState\", \"Redis not available, skipping storage\", {\n                workflowId: state.workflowId\n            });\n            return false;\n        }\n        const key = `itinerary:${state.workflowId}`;\n        const startedAt = Date.now();\n        try {\n            await this.redis.set(key, JSON.stringify({\n                ...state,\n                updatedAt: new Date().toISOString()\n            }));\n            // Set TTL for completed/error states (7 days), processing states (1 day)\n            const ttlSeconds = state.status === \"completed\" || state.status === \"error\" ? 604800 : 86400;\n            await this.redis.expire(key, ttlSeconds);\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.log(102, \"ITINERARY_STATE_STORED\", \"stateStore.ts\", \"storeItineraryState\", {\n                workflowId: state.workflowId,\n                status: state.status,\n                durationMs: Date.now() - startedAt,\n                ttlSeconds\n            });\n            return true;\n        } catch (error) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(103, \"ITINERARY_STATE_STORE_FAILED\", \"stateStore.ts\", \"storeItineraryState\", error instanceof Error ? error : String(error), {\n                workflowId: state.workflowId,\n                status: state.status\n            });\n            return false;\n        }\n    }\n    /**\r\n   * Retrieve itinerary state from Redis\r\n   */ async getItineraryState(workflowId) {\n        if (!this.initialized || !this.redis) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(104, \"REDIS_NOT_INITIALIZED\", \"stateStore.ts\", \"getItineraryState\", \"Redis not available, returning null\", {\n                workflowId\n            });\n            return null;\n        }\n        const key = `itinerary:${workflowId}`;\n        const startedAt = Date.now();\n        try {\n            const data = await this.redis.get(key);\n            if (!data) {\n                _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.log(105, \"ITINERARY_STATE_NOT_FOUND\", \"stateStore.ts\", \"getItineraryState\", {\n                    workflowId,\n                    durationMs: Date.now() - startedAt\n                });\n                return null;\n            }\n            const state = JSON.parse(data);\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.log(106, \"ITINERARY_STATE_RETRIEVED\", \"stateStore.ts\", \"getItineraryState\", {\n                workflowId,\n                status: state.status,\n                durationMs: Date.now() - startedAt\n            });\n            return state;\n        } catch (error) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(107, \"ITINERARY_STATE_RETRIEVE_FAILED\", \"stateStore.ts\", \"getItineraryState\", error instanceof Error ? error : String(error), {\n                workflowId\n            });\n            return null;\n        }\n    }\n    /**\r\n   * Update itinerary status\r\n   */ async updateItineraryStatus(workflowId, status, error) {\n        const existingState = await this.getItineraryState(workflowId);\n        if (!existingState) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(108, \"ITINERARY_STATE_UPDATE_FAILED_NO_EXISTING\", \"stateStore.ts\", \"updateItineraryStatus\", \"No existing state found\", {\n                workflowId,\n                newStatus: status\n            });\n            return false;\n        }\n        const updatedState = {\n            ...existingState,\n            status,\n            ...error && {\n                error\n            },\n            updatedAt: new Date().toISOString()\n        };\n        return this.storeItineraryState(updatedState);\n    }\n    /**\r\n   * Cache data with TTL\r\n   */ async setCache(key, data, ttlMinutes = 60) {\n        if (!this.initialized || !this.redis) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(109, \"REDIS_NOT_INITIALIZED\", \"stateStore.ts\", \"setCache\", \"Redis not available, skipping cache\", {\n                key,\n                ttlMinutes\n            });\n            return false;\n        }\n        const cacheKey = `cache:${key}`;\n        const startedAt = Date.now();\n        try {\n            const entry = {\n                data,\n                expiresAt: Date.now() + ttlMinutes * 60 * 1000,\n                createdAt: new Date().toISOString()\n            };\n            await this.redis.set(cacheKey, JSON.stringify(entry));\n            await this.redis.expire(cacheKey, ttlMinutes * 60);\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.log(110, \"CACHE_ENTRY_STORED\", \"stateStore.ts\", \"setCache\", {\n                key,\n                ttlMinutes,\n                durationMs: Date.now() - startedAt\n            });\n            return true;\n        } catch (error) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(111, \"CACHE_STORE_FAILED\", \"stateStore.ts\", \"setCache\", error instanceof Error ? error : String(error), {\n                key,\n                ttlMinutes\n            });\n            return false;\n        }\n    }\n    /**\r\n   * Get cached data\r\n   */ async getCache(key) {\n        if (!this.initialized || !this.redis) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(112, \"REDIS_NOT_INITIALIZED\", \"stateStore.ts\", \"getCache\", \"Redis not available, returning null\", {\n                key\n            });\n            return null;\n        }\n        const cacheKey = `cache:${key}`;\n        const startedAt = Date.now();\n        try {\n            const data = await this.redis.get(cacheKey);\n            if (!data) {\n                _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.log(113, \"CACHE_MISS\", \"stateStore.ts\", \"getCache\", {\n                    key,\n                    durationMs: Date.now() - startedAt\n                });\n                return null;\n            }\n            const entry = JSON.parse(data);\n            // Check if expired\n            if (Date.now() > entry.expiresAt) {\n                _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.log(114, \"CACHE_EXPIRED\", \"stateStore.ts\", \"getCache\", {\n                    key,\n                    durationMs: Date.now() - startedAt\n                });\n                await this.redis.del(cacheKey);\n                return null;\n            }\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.log(115, \"CACHE_HIT\", \"stateStore.ts\", \"getCache\", {\n                key,\n                durationMs: Date.now() - startedAt\n            });\n            return entry.data;\n        } catch (error) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(116, \"CACHE_RETRIEVE_FAILED\", \"stateStore.ts\", \"getCache\", error instanceof Error ? error : String(error), {\n                key\n            });\n            return null;\n        }\n    }\n    /**\r\n   * Delete cached data\r\n   */ async deleteCache(key) {\n        if (!this.initialized || !this.redis) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(117, \"REDIS_NOT_INITIALIZED\", \"stateStore.ts\", \"deleteCache\", \"Redis not available, skipping delete\", {\n                key\n            });\n            return false;\n        }\n        const cacheKey = `cache:${key}`;\n        const startedAt = Date.now();\n        try {\n            await this.redis.del(cacheKey);\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.log(118, \"CACHE_DELETED\", \"stateStore.ts\", \"deleteCache\", {\n                key,\n                durationMs: Date.now() - startedAt\n            });\n            return true;\n        } catch (error) {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(119, \"CACHE_DELETE_FAILED\", \"stateStore.ts\", \"deleteCache\", error instanceof Error ? error : String(error), {\n                key\n            });\n            return false;\n        }\n    }\n    /**\r\n   * Health check for Redis connection\r\n   */ async healthCheck() {\n        if (!this.initialized || !this.redis) {\n            return {\n                healthy: false,\n                message: \"Redis client not initialized\"\n            };\n        }\n        try {\n            const ping = await this.redis.ping();\n            return {\n                healthy: ping === \"PONG\",\n                message: ping === \"PONG\" ? \"Redis connection healthy\" : \"Redis ping failed\"\n            };\n        } catch (error) {\n            return {\n                healthy: false,\n                message: `Redis health check failed: ${error instanceof Error ? error.message : String(error)}`\n            };\n        }\n    }\n}\n// Export singleton instance\nconst stateStore = new StateStore();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFO1lBQ3BDLE9BQU87Z0JBQ0xtRCxTQUFTO2dCQUNUQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLElBQUk7WUFDRixNQUFNQyxPQUFPLE1BQU0sSUFBSSxDQUFDckQsS0FBSyxDQUFDcUQsSUFBSTtZQUNsQyxPQUFPO2dCQUNMRixTQUFTRSxTQUFTO2dCQUNsQkQsU0FBU0MsU0FBUyxTQUFTLDZCQUE2QjtZQUMxRDtRQUNGLEVBQUUsT0FBT3ZDLE9BQU87WUFDZCxPQUFPO2dCQUNMcUMsU0FBUztnQkFDVEMsU0FBUyxDQUFDLDJCQUEyQixFQUFFdEMsaUJBQWlCQyxRQUFRRCxNQUFNc0MsT0FBTyxHQUFHcEMsT0FBT0YsT0FBTyxDQUFDO1lBQ2pHO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsNEJBQTRCO0FBQ3JCLE1BQU13QyxhQUFhLElBQUl2RCxhQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHlsbzAwLy4vc3JjL2xpYi9yZWRpcy9zdGF0ZVN0b3JlLnRzPzU5NTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVkaXMgfSBmcm9tICdAdXBzdGFzaC9yZWRpcyc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvY29uc29sZS1sb2dnZXInO1xyXG5pbXBvcnQgeyBnZXRJdGluZXJhcnlDb25maWcgfSBmcm9tICdAL2xpYi9jb25maWcvaXRpbmVyYXJ5LWNvbmZpZyc7XHJcblxyXG5pbnRlcmZhY2UgSXRpbmVyYXJ5U3RhdGUge1xyXG4gIHdvcmtmbG93SWQ6IHN0cmluZztcclxuICBzZXNzaW9uSWQ6IHN0cmluZztcclxuICBzdGF0dXM6ICdxdWV1ZWQnIHwgJ3Byb2Nlc3NpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZXJyb3InO1xyXG4gIGZvcm1EYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xyXG4gIGl0aW5lcmFyeT86IGFueTtcclxuICByZXNlYXJjaD86IGFueTtcclxuICB2ZWN0b3I/OiBhbnk7XHJcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XHJcbiAgdXBkYXRlZEF0OiBzdHJpbmc7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBDYWNoZUVudHJ5PFQgPSBhbnk+IHtcclxuICBkYXRhOiBUO1xyXG4gIGV4cGlyZXNBdDogbnVtYmVyO1xyXG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xyXG59XHJcblxyXG5jbGFzcyBTdGF0ZVN0b3JlIHtcclxuICBwcml2YXRlIHJlZGlzOiBSZWRpcyB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmluaXRpYWxpemUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGdldEl0aW5lcmFyeUNvbmZpZygpO1xyXG4gICAgICBpZiAoIWNvbmZpZy5yZWRpcy5yZXN0VXJsIHx8ICFjb25maWcucmVkaXMucmVzdFRva2VuKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oMCwgJ1JFRElTX0NPTkZJR19NSVNTSU5HJywgJ3N0YXRlU3RvcmUudHMnLCAnaW5pdGlhbGl6ZScsICdSZWRpcyBjb25maWd1cmF0aW9uIGluY29tcGxldGUsIHVzaW5nIG1vY2sgbW9kZScsIHtcclxuICAgICAgICAgIGhhc1Jlc3RVcmw6ICEhY29uZmlnLnJlZGlzLnJlc3RVcmwsXHJcbiAgICAgICAgICBoYXNSZXN0VG9rZW46ICEhY29uZmlnLnJlZGlzLnJlc3RUb2tlbixcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucmVkaXMgPSBuZXcgUmVkaXMoe1xyXG4gICAgICAgIHVybDogY29uZmlnLnJlZGlzLnJlc3RVcmwsXHJcbiAgICAgICAgdG9rZW46IGNvbmZpZy5yZWRpcy5yZXN0VG9rZW4sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgIGxvZ2dlci5sb2coMCwgJ1JFRElTX0NMSUVOVF9JTklUSUFMSVpFRCcsICdzdGF0ZVN0b3JlLnRzJywgJ2luaXRpYWxpemUnLCB7XHJcbiAgICAgICAgcmVzdFVybENvbmZpZ3VyZWQ6ICEhY29uZmlnLnJlZGlzLnJlc3RVcmwsXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKDAsICdSRURJU19JTklUSUFMSVpBVElPTl9GQUlMRUQnLCAnc3RhdGVTdG9yZS50cycsICdpbml0aWFsaXplJywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogU3RyaW5nKGVycm9yKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdG9yZSBpdGluZXJhcnkgc3RhdGUgaW4gUmVkaXNcclxuICAgKi9cclxuICBhc3luYyBzdG9yZUl0aW5lcmFyeVN0YXRlKHN0YXRlOiBJdGluZXJhcnlTdGF0ZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkIHx8ICF0aGlzLnJlZGlzKSB7XHJcbiAgICAgIGxvZ2dlci53YXJuKDEwMSwgJ1JFRElTX05PVF9JTklUSUFMSVpFRCcsICdzdGF0ZVN0b3JlLnRzJywgJ3N0b3JlSXRpbmVyYXJ5U3RhdGUnLCAnUmVkaXMgbm90IGF2YWlsYWJsZSwgc2tpcHBpbmcgc3RvcmFnZScsIHtcclxuICAgICAgICB3b3JrZmxvd0lkOiBzdGF0ZS53b3JrZmxvd0lkLFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGtleSA9IGBpdGluZXJhcnk6JHtzdGF0ZS53b3JrZmxvd0lkfWA7XHJcbiAgICBjb25zdCBzdGFydGVkQXQgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHRoaXMucmVkaXMuc2V0KGtleSwgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIC4uLnN0YXRlLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB9KSk7XHJcblxyXG4gICAgICAvLyBTZXQgVFRMIGZvciBjb21wbGV0ZWQvZXJyb3Igc3RhdGVzICg3IGRheXMpLCBwcm9jZXNzaW5nIHN0YXRlcyAoMSBkYXkpXHJcbiAgICAgIGNvbnN0IHR0bFNlY29uZHMgPSBzdGF0ZS5zdGF0dXMgPT09ICdjb21wbGV0ZWQnIHx8IHN0YXRlLnN0YXR1cyA9PT0gJ2Vycm9yJyA/IDYwNDgwMCA6IDg2NDAwO1xyXG4gICAgICBhd2FpdCB0aGlzLnJlZGlzLmV4cGlyZShrZXksIHR0bFNlY29uZHMpO1xyXG5cclxuICAgICAgbG9nZ2VyLmxvZygxMDIsICdJVElORVJBUllfU1RBVEVfU1RPUkVEJywgJ3N0YXRlU3RvcmUudHMnLCAnc3RvcmVJdGluZXJhcnlTdGF0ZScsIHtcclxuICAgICAgICB3b3JrZmxvd0lkOiBzdGF0ZS53b3JrZmxvd0lkLFxyXG4gICAgICAgIHN0YXR1czogc3RhdGUuc3RhdHVzLFxyXG4gICAgICAgIGR1cmF0aW9uTXM6IERhdGUubm93KCkgLSBzdGFydGVkQXQsXHJcbiAgICAgICAgdHRsU2Vjb25kcyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcigxMDMsICdJVElORVJBUllfU1RBVEVfU1RPUkVfRkFJTEVEJywgJ3N0YXRlU3RvcmUudHMnLCAnc3RvcmVJdGluZXJhcnlTdGF0ZScsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IFN0cmluZyhlcnJvciksIHtcclxuICAgICAgICB3b3JrZmxvd0lkOiBzdGF0ZS53b3JrZmxvd0lkLFxyXG4gICAgICAgIHN0YXR1czogc3RhdGUuc3RhdHVzLFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0cmlldmUgaXRpbmVyYXJ5IHN0YXRlIGZyb20gUmVkaXNcclxuICAgKi9cclxuICBhc3luYyBnZXRJdGluZXJhcnlTdGF0ZSh3b3JrZmxvd0lkOiBzdHJpbmcpOiBQcm9taXNlPEl0aW5lcmFyeVN0YXRlIHwgbnVsbD4ge1xyXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkIHx8ICF0aGlzLnJlZGlzKSB7XHJcbiAgICAgIGxvZ2dlci53YXJuKDEwNCwgJ1JFRElTX05PVF9JTklUSUFMSVpFRCcsICdzdGF0ZVN0b3JlLnRzJywgJ2dldEl0aW5lcmFyeVN0YXRlJywgJ1JlZGlzIG5vdCBhdmFpbGFibGUsIHJldHVybmluZyBudWxsJywge1xyXG4gICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBrZXkgPSBgaXRpbmVyYXJ5OiR7d29ya2Zsb3dJZH1gO1xyXG4gICAgY29uc3Qgc3RhcnRlZEF0ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZWRpcy5nZXQ8c3RyaW5nPihrZXkpO1xyXG5cclxuICAgICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgbG9nZ2VyLmxvZygxMDUsICdJVElORVJBUllfU1RBVEVfTk9UX0ZPVU5EJywgJ3N0YXRlU3RvcmUudHMnLCAnZ2V0SXRpbmVyYXJ5U3RhdGUnLCB7XHJcbiAgICAgICAgICB3b3JrZmxvd0lkLFxyXG4gICAgICAgICAgZHVyYXRpb25NczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc3RhdGUgPSBKU09OLnBhcnNlKGRhdGEpIGFzIEl0aW5lcmFyeVN0YXRlO1xyXG5cclxuICAgICAgbG9nZ2VyLmxvZygxMDYsICdJVElORVJBUllfU1RBVEVfUkVUUklFVkVEJywgJ3N0YXRlU3RvcmUudHMnLCAnZ2V0SXRpbmVyYXJ5U3RhdGUnLCB7XHJcbiAgICAgICAgd29ya2Zsb3dJZCxcclxuICAgICAgICBzdGF0dXM6IHN0YXRlLnN0YXR1cyxcclxuICAgICAgICBkdXJhdGlvbk1zOiBEYXRlLm5vdygpIC0gc3RhcnRlZEF0LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcigxMDcsICdJVElORVJBUllfU1RBVEVfUkVUUklFVkVfRkFJTEVEJywgJ3N0YXRlU3RvcmUudHMnLCAnZ2V0SXRpbmVyYXJ5U3RhdGUnLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBTdHJpbmcoZXJyb3IpLCB7XHJcbiAgICAgICAgd29ya2Zsb3dJZCxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGl0aW5lcmFyeSBzdGF0dXNcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVJdGluZXJhcnlTdGF0dXMod29ya2Zsb3dJZDogc3RyaW5nLCBzdGF0dXM6IEl0aW5lcmFyeVN0YXRlWydzdGF0dXMnXSwgZXJyb3I/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGV4aXN0aW5nU3RhdGUgPSBhd2FpdCB0aGlzLmdldEl0aW5lcmFyeVN0YXRlKHdvcmtmbG93SWQpO1xyXG4gICAgaWYgKCFleGlzdGluZ1N0YXRlKSB7XHJcbiAgICAgIGxvZ2dlci53YXJuKDEwOCwgJ0lUSU5FUkFSWV9TVEFURV9VUERBVEVfRkFJTEVEX05PX0VYSVNUSU5HJywgJ3N0YXRlU3RvcmUudHMnLCAndXBkYXRlSXRpbmVyYXJ5U3RhdHVzJywgJ05vIGV4aXN0aW5nIHN0YXRlIGZvdW5kJywge1xyXG4gICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgbmV3U3RhdHVzOiBzdGF0dXMsXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXBkYXRlZFN0YXRlOiBJdGluZXJhcnlTdGF0ZSA9IHtcclxuICAgICAgLi4uZXhpc3RpbmdTdGF0ZSxcclxuICAgICAgc3RhdHVzLFxyXG4gICAgICAuLi4oZXJyb3IgJiYgeyBlcnJvciB9KSxcclxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB0aGlzLnN0b3JlSXRpbmVyYXJ5U3RhdGUodXBkYXRlZFN0YXRlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhY2hlIGRhdGEgd2l0aCBUVExcclxuICAgKi9cclxuICBhc3luYyBzZXRDYWNoZTxUPihrZXk6IHN0cmluZywgZGF0YTogVCwgdHRsTWludXRlczogbnVtYmVyID0gNjApOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGlmICghdGhpcy5pbml0aWFsaXplZCB8fCAhdGhpcy5yZWRpcykge1xyXG4gICAgICBsb2dnZXIud2FybigxMDksICdSRURJU19OT1RfSU5JVElBTElaRUQnLCAnc3RhdGVTdG9yZS50cycsICdzZXRDYWNoZScsICdSZWRpcyBub3QgYXZhaWxhYmxlLCBza2lwcGluZyBjYWNoZScsIHtcclxuICAgICAgICBrZXksXHJcbiAgICAgICAgdHRsTWludXRlcyxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjYWNoZUtleSA9IGBjYWNoZToke2tleX1gO1xyXG4gICAgY29uc3Qgc3RhcnRlZEF0ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBlbnRyeTogQ2FjaGVFbnRyeTxUPiA9IHtcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIGV4cGlyZXNBdDogRGF0ZS5ub3coKSArICh0dGxNaW51dGVzICogNjAgKiAxMDAwKSxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGF3YWl0IHRoaXMucmVkaXMuc2V0KGNhY2hlS2V5LCBKU09OLnN0cmluZ2lmeShlbnRyeSkpO1xyXG4gICAgICBhd2FpdCB0aGlzLnJlZGlzLmV4cGlyZShjYWNoZUtleSwgdHRsTWludXRlcyAqIDYwKTtcclxuXHJcbiAgICAgIGxvZ2dlci5sb2coMTEwLCAnQ0FDSEVfRU5UUllfU1RPUkVEJywgJ3N0YXRlU3RvcmUudHMnLCAnc2V0Q2FjaGUnLCB7XHJcbiAgICAgICAga2V5LFxyXG4gICAgICAgIHR0bE1pbnV0ZXMsXHJcbiAgICAgICAgZHVyYXRpb25NczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcigxMTEsICdDQUNIRV9TVE9SRV9GQUlMRUQnLCAnc3RhdGVTdG9yZS50cycsICdzZXRDYWNoZScsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IFN0cmluZyhlcnJvciksIHtcclxuICAgICAgICBrZXksXHJcbiAgICAgICAgdHRsTWludXRlcyxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjYWNoZWQgZGF0YVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldENhY2hlPFQ+KGtleTogc3RyaW5nKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xyXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkIHx8ICF0aGlzLnJlZGlzKSB7XHJcbiAgICAgIGxvZ2dlci53YXJuKDExMiwgJ1JFRElTX05PVF9JTklUSUFMSVpFRCcsICdzdGF0ZVN0b3JlLnRzJywgJ2dldENhY2hlJywgJ1JlZGlzIG5vdCBhdmFpbGFibGUsIHJldHVybmluZyBudWxsJywge1xyXG4gICAgICAgIGtleSxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNhY2hlS2V5ID0gYGNhY2hlOiR7a2V5fWA7XHJcbiAgICBjb25zdCBzdGFydGVkQXQgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlZGlzLmdldDxzdHJpbmc+KGNhY2hlS2V5KTtcclxuXHJcbiAgICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgIGxvZ2dlci5sb2coMTEzLCAnQ0FDSEVfTUlTUycsICdzdGF0ZVN0b3JlLnRzJywgJ2dldENhY2hlJywge1xyXG4gICAgICAgICAga2V5LFxyXG4gICAgICAgICAgZHVyYXRpb25NczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZW50cnkgPSBKU09OLnBhcnNlKGRhdGEpIGFzIENhY2hlRW50cnk8VD47XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiBleHBpcmVkXHJcbiAgICAgIGlmIChEYXRlLm5vdygpID4gZW50cnkuZXhwaXJlc0F0KSB7XHJcbiAgICAgICAgbG9nZ2VyLmxvZygxMTQsICdDQUNIRV9FWFBJUkVEJywgJ3N0YXRlU3RvcmUudHMnLCAnZ2V0Q2FjaGUnLCB7XHJcbiAgICAgICAgICBrZXksXHJcbiAgICAgICAgICBkdXJhdGlvbk1zOiBEYXRlLm5vdygpIC0gc3RhcnRlZEF0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucmVkaXMuZGVsKGNhY2hlS2V5KTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgbG9nZ2VyLmxvZygxMTUsICdDQUNIRV9ISVQnLCAnc3RhdGVTdG9yZS50cycsICdnZXRDYWNoZScsIHtcclxuICAgICAgICBrZXksXHJcbiAgICAgICAgZHVyYXRpb25NczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gZW50cnkuZGF0YTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcigxMTYsICdDQUNIRV9SRVRSSUVWRV9GQUlMRUQnLCAnc3RhdGVTdG9yZS50cycsICdnZXRDYWNoZScsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IFN0cmluZyhlcnJvciksIHtcclxuICAgICAgICBrZXksXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZSBjYWNoZWQgZGF0YVxyXG4gICAqL1xyXG4gIGFzeW5jIGRlbGV0ZUNhY2hlKGtleTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQgfHwgIXRoaXMucmVkaXMpIHtcclxuICAgICAgbG9nZ2VyLndhcm4oMTE3LCAnUkVESVNfTk9UX0lOSVRJQUxJWkVEJywgJ3N0YXRlU3RvcmUudHMnLCAnZGVsZXRlQ2FjaGUnLCAnUmVkaXMgbm90IGF2YWlsYWJsZSwgc2tpcHBpbmcgZGVsZXRlJywge1xyXG4gICAgICAgIGtleSxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjYWNoZUtleSA9IGBjYWNoZToke2tleX1gO1xyXG4gICAgY29uc3Qgc3RhcnRlZEF0ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCB0aGlzLnJlZGlzLmRlbChjYWNoZUtleSk7XHJcblxyXG4gICAgICBsb2dnZXIubG9nKDExOCwgJ0NBQ0hFX0RFTEVURUQnLCAnc3RhdGVTdG9yZS50cycsICdkZWxldGVDYWNoZScsIHtcclxuICAgICAgICBrZXksXHJcbiAgICAgICAgZHVyYXRpb25NczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcigxMTksICdDQUNIRV9ERUxFVEVfRkFJTEVEJywgJ3N0YXRlU3RvcmUudHMnLCAnZGVsZXRlQ2FjaGUnLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBTdHJpbmcoZXJyb3IpLCB7XHJcbiAgICAgICAga2V5LFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGVhbHRoIGNoZWNrIGZvciBSZWRpcyBjb25uZWN0aW9uXHJcbiAgICovXHJcbiAgYXN5bmMgaGVhbHRoQ2hlY2soKTogUHJvbWlzZTx7IGhlYWx0aHk6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9PiB7XHJcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQgfHwgIXRoaXMucmVkaXMpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFsdGh5OiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnUmVkaXMgY2xpZW50IG5vdCBpbml0aWFsaXplZCcsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcGluZyA9IGF3YWl0IHRoaXMucmVkaXMucGluZygpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWx0aHk6IHBpbmcgPT09ICdQT05HJyxcclxuICAgICAgICBtZXNzYWdlOiBwaW5nID09PSAnUE9ORycgPyAnUmVkaXMgY29ubmVjdGlvbiBoZWFsdGh5JyA6ICdSZWRpcyBwaW5nIGZhaWxlZCcsXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWx0aHk6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBSZWRpcyBoZWFsdGggY2hlY2sgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxyXG5leHBvcnQgY29uc3Qgc3RhdGVTdG9yZSA9IG5ldyBTdGF0ZVN0b3JlKCk7XHJcblxyXG4vLyBFeHBvcnQgdHlwZXNcclxuZXhwb3J0IHR5cGUgeyBJdGluZXJhcnlTdGF0ZSwgQ2FjaGVFbnRyeSB9O1xyXG4iXSwibmFtZXMiOlsiUmVkaXMiLCJsb2dnZXIiLCJnZXRJdGluZXJhcnlDb25maWciLCJTdGF0ZVN0b3JlIiwicmVkaXMiLCJpbml0aWFsaXplZCIsImNvbnN0cnVjdG9yIiwiaW5pdGlhbGl6ZSIsImNvbmZpZyIsInJlc3RVcmwiLCJyZXN0VG9rZW4iLCJ3YXJuIiwiaGFzUmVzdFVybCIsImhhc1Jlc3RUb2tlbiIsInVybCIsInRva2VuIiwibG9nIiwicmVzdFVybENvbmZpZ3VyZWQiLCJlcnJvciIsIkVycm9yIiwiU3RyaW5nIiwic3RvcmVJdGluZXJhcnlTdGF0ZSIsInN0YXRlIiwid29ya2Zsb3dJZCIsImtleSIsInN0YXJ0ZWRBdCIsIkRhdGUiLCJub3ciLCJzZXQiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlZEF0IiwidG9JU09TdHJpbmciLCJ0dGxTZWNvbmRzIiwic3RhdHVzIiwiZXhwaXJlIiwiZHVyYXRpb25NcyIsImdldEl0aW5lcmFyeVN0YXRlIiwiZGF0YSIsImdldCIsInBhcnNlIiwidXBkYXRlSXRpbmVyYXJ5U3RhdHVzIiwiZXhpc3RpbmdTdGF0ZSIsIm5ld1N0YXR1cyIsInVwZGF0ZWRTdGF0ZSIsInNldENhY2hlIiwidHRsTWludXRlcyIsImNhY2hlS2V5IiwiZW50cnkiLCJleHBpcmVzQXQiLCJjcmVhdGVkQXQiLCJnZXRDYWNoZSIsImRlbCIsImRlbGV0ZUNhY2hlIiwiaGVhbHRoQ2hlY2siLCJoZWFsdGh5IiwibWVzc2FnZSIsInBpbmciLCJzdGF0ZVN0b3JlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/redis/stateStore.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/vector/vectorStore.ts":
/*!***************************************!*\
  !*** ./src/lib/vector/vectorStore.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   storeItineraryVector: () => (/* binding */ storeItineraryVector)\n/* harmony export */ });\n/* harmony import */ var _lib_ai_jinaEmbeddings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/ai/jinaEmbeddings */ \"(rsc)/./src/lib/ai/jinaEmbeddings.ts\");\n/* harmony import */ var _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/console-logger */ \"(rsc)/./src/utils/console-logger.ts\");\n\n\nconst VECTOR_ENDPOINT = process.env.VECTOR_DB_ENDPOINT || process.env.VECTOR_DB_WRITE_URL;\nconst VECTOR_API_KEY = process.env.VECTOR_DB_API_KEY || process.env.VECTOR_DB_TOKEN;\nasync function storeItineraryVector(params) {\n    const { workflowId, sessionId, destination, itinerary, model, formData } = params;\n    if (!VECTOR_ENDPOINT) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(201, \"VECTOR_DB_ENDPOINT_MISSING\", \"vectorStore.ts\", \"storeItineraryVector\", \"Vector endpoint environment variable not set\", {\n            workflowId,\n            sessionId\n        });\n        return {\n            stored: false,\n            vectorIds: [],\n            message: \"Vector endpoint not configured\"\n        };\n    }\n    const keyFacts = extractKeyFacts(itinerary, destination, formData);\n    _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug(200, \"VECTOR_KEY_FACTS_EXTRACTED\", \"vectorStore.ts\", \"storeItineraryVector\", {\n        workflowId,\n        keyFacts\n    });\n    const entries = buildVectorEntries({\n        workflowId,\n        keyFacts\n    });\n    if (entries.length === 0) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(202, \"VECTOR_NO_ENTRIES\", \"vectorStore.ts\", \"storeItineraryVector\", \"No vector entries were generated for itinerary\", {\n            workflowId\n        });\n        return {\n            stored: false,\n            vectorIds: [],\n            message: \"No vector entries generated\"\n        };\n    }\n    let embeddingModel = \"jina-embeddings-v3\";\n    let embeddingUsage;\n    let embeddings;\n    try {\n        const embeddingResult = await (0,_lib_ai_jinaEmbeddings__WEBPACK_IMPORTED_MODULE_0__.generateJinaEmbeddings)(entries.map((entry)=>entry.text), {\n            task: \"text-matching\",\n            inputType: \"text\"\n        });\n        embeddings = embeddingResult.embeddings;\n        embeddingModel = embeddingResult.model;\n        embeddingUsage = embeddingResult.usage;\n        if (!Array.isArray(embeddings) || embeddings.length !== entries.length) {\n            throw new Error(\"Embedding count mismatch for itinerary entries.\");\n        }\n    } catch (error) {\n        _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(203, \"VECTOR_EMBEDDING_FAILED\", \"vectorStore.ts\", \"storeItineraryVector\", error instanceof Error ? error.message : String(error), {\n            workflowId\n        });\n        return {\n            stored: false,\n            vectorIds: [],\n            message: error instanceof Error ? error.message : String(error)\n        };\n    }\n    const sharedMetadata = {\n        workflowId,\n        sessionId,\n        model,\n        embeddingModel,\n        generatedAt: new Date().toISOString(),\n        destination: keyFacts.destination,\n        budget: keyFacts.budget,\n        dates: keyFacts.dates,\n        travelPartyFirstSentence: keyFacts.travelPartyFirstSentence,\n        embeddingUsage\n    };\n    const successes = [];\n    const failures = [];\n    for(let index = 0; index < entries.length; index += 1){\n        const entry = entries[index];\n        const vector = embeddings[index];\n        if (!Array.isArray(vector) || vector.length === 0) {\n            failures.push({\n                id: entry.id,\n                error: \"Received empty vector from embeddings API\"\n            });\n            continue;\n        }\n        const payload = {\n            id: entry.id,\n            values: vector,\n            metadata: {\n                ...sharedMetadata,\n                ...entry.metadata\n            },\n            document: entry.document\n        };\n        try {\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug(204, \"VECTOR_DB_REQUEST\", \"vectorStore.ts\", \"storeItineraryVector\", {\n                endpoint: VECTOR_ENDPOINT,\n                workflowId,\n                entryId: entry.id,\n                hasApiKey: Boolean(VECTOR_API_KEY),\n                embeddingModel,\n                category: entry.metadata?.category\n            });\n            const response = await fetch(VECTOR_ENDPOINT, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    ...VECTOR_API_KEY ? {\n                        Authorization: `Bearer ${VECTOR_API_KEY}`\n                    } : {}\n                },\n                body: JSON.stringify(payload)\n            });\n            if (!response.ok) {\n                const errorBody = await response.text();\n                failures.push({\n                    id: entry.id,\n                    error: `HTTP ${response.status}: ${errorBody}`\n                });\n                _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(205, \"VECTOR_DB_REQUEST_FAILED\", \"vectorStore.ts\", \"storeItineraryVector\", `HTTP ${response.status}`, {\n                    workflowId,\n                    entryId: entry.id,\n                    status: response.status,\n                    body: errorBody\n                });\n                continue;\n            }\n            const result = await response.json().catch(()=>({\n                    id: entry.id\n                }));\n            const storedId = result?.id || entry.id;\n            successes.push(storedId);\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.log(206, \"VECTOR_DB_REQUEST_SUCCEEDED\", \"vectorStore.ts\", \"storeItineraryVector\", {\n                workflowId,\n                entryId: entry.id,\n                storedId,\n                category: entry.metadata?.category\n            });\n        } catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            failures.push({\n                id: entry.id,\n                error: message\n            });\n            _utils_console_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(207, \"VECTOR_DB_REQUEST_ERROR\", \"vectorStore.ts\", \"storeItineraryVector\", message, {\n                workflowId,\n                entryId: entry.id\n            });\n        }\n    }\n    return {\n        stored: failures.length === 0 && successes.length > 0,\n        vectorIds: successes,\n        failures: failures.length > 0 ? failures : undefined,\n        message: failures.length > 0 ? \"Some vector entries failed to store\" : undefined\n    };\n}\nfunction buildVectorEntries({ workflowId, keyFacts }) {\n    const overviewText = buildOverviewText(keyFacts);\n    if (!overviewText) {\n        return [];\n    }\n    return [\n        {\n            id: `${workflowId}:facts`,\n            text: overviewText,\n            metadata: {\n                category: \"facts\"\n            },\n            document: {\n                destination: keyFacts.destination ?? null,\n                budget: keyFacts.budget ?? null,\n                dates: keyFacts.dates ?? null,\n                travelPartyFirstSentence: keyFacts.travelPartyFirstSentence ?? null\n            }\n        }\n    ];\n}\nfunction buildOverviewText(keyFacts) {\n    const lines = [];\n    if (keyFacts.destination) {\n        lines.push(`Destination: ${keyFacts.destination}`);\n    }\n    if (keyFacts.dates) {\n        lines.push(`Dates: ${keyFacts.dates}`);\n    }\n    if (keyFacts.budget) {\n        lines.push(`Budget: ${keyFacts.budget}`);\n    }\n    const travelPartyLine = keyFacts.travelPartyFirstSentence ?? keyFacts.travelParty;\n    if (travelPartyLine) {\n        lines.push(`Travel Party: ${travelPartyLine}`);\n    }\n    return lines.join(\"\\n\");\n}\nfunction extractKeyFacts(itinerary, fallbackDestination, formData) {\n    const facts = {};\n    const data = typeof itinerary === \"object\" && itinerary !== null ? itinerary : {};\n    const tripSummary = typeof data.tripSummary === \"object\" && data.tripSummary !== null ? data.tripSummary : {};\n    const keyDetails = typeof data.keyDetails === \"object\" && data.keyDetails !== null ? data.keyDetails : {};\n    const summary = typeof data.summary === \"object\" && data.summary !== null ? data.summary : {};\n    facts.destination = sanitizeString(keyDetails.destination) || sanitizeString(tripSummary.destination) || sanitizeString(data.destination) || sanitizeString(data.location) || sanitizeString(summary.destination) || sanitizeString(fallbackDestination) || sanitizeString(formData?.location);\n    facts.budget = sanitizeString(keyDetails.budget) || sanitizeString(tripSummary.budgetDisplay) || sanitizeString(data.budget) || sanitizeString(summary.budget) || formatBudgetFromFormData(formData);\n    const dates = sanitizeString(keyDetails.dates) || sanitizeString(keyDetails.dateDisplay) || sanitizeString(tripSummary.dateDisplay) || sanitizeString(data.dates) || sanitizeString(summary.dates) || formatDatesFromFormData(formData);\n    facts.dates = dates || undefined;\n    const travelParty = sanitizeString(keyDetails.travelers) || sanitizeString(keyDetails.travelParty) || sanitizeString(tripSummary.travelerCount) || sanitizeString(tripSummary.travelers) || sanitizeString(data.travelParty) || sanitizeString(summary.travelParty) || buildTravelPartyFromFormData(formData);\n    facts.travelParty = travelParty;\n    facts.travelPartyFirstSentence = travelParty ? firstSentence(travelParty) : undefined;\n    return facts;\n}\nfunction formatBudgetFromFormData(formData) {\n    if (!formData) {\n        return undefined;\n    }\n    if (formData.flexibleBudget === true) {\n        return \"Flexible budget\";\n    }\n    if (typeof formData.budget === \"number\" && Number.isFinite(formData.budget)) {\n        const currency = sanitizeString(formData.currency) ?? \"USD\";\n        return `${currency} ${formData.budget}`;\n    }\n    return sanitizeString(formData.budgetDisplay);\n}\nfunction formatDatesFromFormData(formData) {\n    if (!formData) {\n        return undefined;\n    }\n    const depart = sanitizeString(formData.departDate);\n    const ret = sanitizeString(formData.returnDate);\n    const plannedDays = typeof formData.plannedDays === \"number\" && Number.isFinite(formData.plannedDays) ? formData.plannedDays : undefined;\n    if (depart && ret) {\n        return `${depart} – ${ret}`;\n    }\n    if (depart && plannedDays) {\n        return `${depart} for ${plannedDays} days`;\n    }\n    if (depart) {\n        return `Departing ${depart}`;\n    }\n    if (plannedDays) {\n        return `${plannedDays} day itinerary (flexible dates)`;\n    }\n    if (formData.flexibleDates === true) {\n        return \"Flexible dates\";\n    }\n    return undefined;\n}\nfunction buildTravelPartyFromFormData(formData) {\n    if (!formData) {\n        return undefined;\n    }\n    const adults = typeof formData.adults === \"number\" && formData.adults >= 0 ? formData.adults : undefined;\n    const children = typeof formData.children === \"number\" && formData.children >= 0 ? formData.children : undefined;\n    if (adults == null && children == null) {\n        return undefined;\n    }\n    const parts = [];\n    if (typeof adults === \"number\") {\n        parts.push(`${adults} adult${adults === 1 ? \"\" : \"s\"}`);\n    }\n    if (typeof children === \"number\" && children > 0) {\n        parts.push(`${children} child${children === 1 ? \"\" : \"ren\"}`);\n    }\n    return parts.join(\", \");\n}\nfunction sanitizeString(value) {\n    if (typeof value === \"string\") {\n        const trimmed = value.trim();\n        return trimmed.length > 0 ? trimmed : undefined;\n    }\n    if (typeof value === \"number\" && Number.isFinite(value)) {\n        return String(value);\n    }\n    return undefined;\n}\nfunction firstSentence(value) {\n    const trimmed = value.trim();\n    const periodIndex = trimmed.indexOf(\".\");\n    if (periodIndex === -1) {\n        return trimmed;\n    }\n    return trimmed.slice(0, periodIndex + 1).trim();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9BLFVBQVUsVUFBVTtRQUM3QixNQUFNQyxVQUFVRCxNQUFNRSxJQUFJO1FBQzFCLE9BQU9ELFFBQVEzRixNQUFNLEdBQUcsSUFBSTJGLFVBQVVyQztJQUN4QztJQUVBLElBQUksT0FBT29DLFVBQVUsWUFBWVosT0FBT0MsUUFBUSxDQUFDVyxRQUFRO1FBQ3ZELE9BQU8zRSxPQUFPMkU7SUFDaEI7SUFFQSxPQUFPcEM7QUFDVDtBQUVBLFNBQVNzQixjQUFjYyxLQUFhO0lBQ2xDLE1BQU1DLFVBQVVELE1BQU1FLElBQUk7SUFDMUIsTUFBTUMsY0FBY0YsUUFBUUcsT0FBTyxDQUFDO0lBRXBDLElBQUlELGdCQUFnQixDQUFDLEdBQUc7UUFDdEIsT0FBT0Y7SUFDVDtJQUVBLE9BQU9BLFFBQVFJLEtBQUssQ0FBQyxHQUFHRixjQUFjLEdBQUdELElBQUk7QUFDL0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oeWxvMDAvLi9zcmMvbGliL3ZlY3Rvci92ZWN0b3JTdG9yZS50cz84ZTA1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlSmluYUVtYmVkZGluZ3MgfSBmcm9tICdAL2xpYi9haS9qaW5hRW1iZWRkaW5ncyc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvY29uc29sZS1sb2dnZXInO1xyXG5cclxuaW50ZXJmYWNlIFN0b3JlSXRpbmVyYXJ5VmVjdG9yUGFyYW1zIHtcclxuICB3b3JrZmxvd0lkOiBzdHJpbmc7XHJcbiAgc2Vzc2lvbklkOiBzdHJpbmc7XHJcbiAgZGVzdGluYXRpb24/OiBzdHJpbmc7XHJcbiAgcmF3Q29udGVudDogc3RyaW5nO1xyXG4gIGl0aW5lcmFyeTogdW5rbm93bjtcclxuICBtb2RlbDogc3RyaW5nO1xyXG4gIGZvcm1EYXRhPzogUmVjb3JkPHN0cmluZywgYW55PjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0b3JlSXRpbmVyYXJ5VmVjdG9yUmVzdWx0IHtcclxuICBzdG9yZWQ6IGJvb2xlYW47XHJcbiAgdmVjdG9ySWRzOiBzdHJpbmdbXTtcclxuICBmYWlsdXJlcz86IEFycmF5PHsgaWQ6IHN0cmluZzsgZXJyb3I6IHN0cmluZyB9PjtcclxuICBtZXNzYWdlPzogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgVmVjdG9yRW50cnkge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIG1ldGFkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xyXG4gIGRvY3VtZW50OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgS2V5RmFjdHMge1xyXG4gIGRlc3RpbmF0aW9uPzogc3RyaW5nO1xyXG4gIGJ1ZGdldD86IHN0cmluZztcclxuICBkYXRlcz86IHN0cmluZztcclxuICB0cmF2ZWxQYXJ0eT86IHN0cmluZztcclxuICB0cmF2ZWxQYXJ0eUZpcnN0U2VudGVuY2U/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IFZFQ1RPUl9FTkRQT0lOVCA9IHByb2Nlc3MuZW52LlZFQ1RPUl9EQl9FTkRQT0lOVCB8fCBwcm9jZXNzLmVudi5WRUNUT1JfREJfV1JJVEVfVVJMO1xyXG5jb25zdCBWRUNUT1JfQVBJX0tFWSA9IHByb2Nlc3MuZW52LlZFQ1RPUl9EQl9BUElfS0VZIHx8IHByb2Nlc3MuZW52LlZFQ1RPUl9EQl9UT0tFTjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdG9yZUl0aW5lcmFyeVZlY3RvcihwYXJhbXM6IFN0b3JlSXRpbmVyYXJ5VmVjdG9yUGFyYW1zKTogUHJvbWlzZTxTdG9yZUl0aW5lcmFyeVZlY3RvclJlc3VsdD4ge1xyXG4gIGNvbnN0IHsgd29ya2Zsb3dJZCwgc2Vzc2lvbklkLCBkZXN0aW5hdGlvbiwgaXRpbmVyYXJ5LCBtb2RlbCwgZm9ybURhdGEgfSA9IHBhcmFtcztcclxuXHJcbiAgaWYgKCFWRUNUT1JfRU5EUE9JTlQpIHtcclxuICAgIGxvZ2dlci53YXJuKDIwMSwgJ1ZFQ1RPUl9EQl9FTkRQT0lOVF9NSVNTSU5HJywgJ3ZlY3RvclN0b3JlLnRzJywgJ3N0b3JlSXRpbmVyYXJ5VmVjdG9yJywgJ1ZlY3RvciBlbmRwb2ludCBlbnZpcm9ubWVudCB2YXJpYWJsZSBub3Qgc2V0Jywge1xyXG4gICAgICB3b3JrZmxvd0lkLFxyXG4gICAgICBzZXNzaW9uSWQsXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdG9yZWQ6IGZhbHNlLFxyXG4gICAgICB2ZWN0b3JJZHM6IFtdLFxyXG4gICAgICBtZXNzYWdlOiAnVmVjdG9yIGVuZHBvaW50IG5vdCBjb25maWd1cmVkJyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb25zdCBrZXlGYWN0cyA9IGV4dHJhY3RLZXlGYWN0cyhpdGluZXJhcnksIGRlc3RpbmF0aW9uLCBmb3JtRGF0YSk7XHJcblxyXG4gIGxvZ2dlci5kZWJ1ZygyMDAsICdWRUNUT1JfS0VZX0ZBQ1RTX0VYVFJBQ1RFRCcsICd2ZWN0b3JTdG9yZS50cycsICdzdG9yZUl0aW5lcmFyeVZlY3RvcicsIHtcclxuICAgIHdvcmtmbG93SWQsXHJcbiAgICBrZXlGYWN0cyxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgZW50cmllcyA9IGJ1aWxkVmVjdG9yRW50cmllcyh7XHJcbiAgICB3b3JrZmxvd0lkLFxyXG4gICAga2V5RmFjdHMsXHJcbiAgfSk7XHJcblxyXG4gIGlmIChlbnRyaWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgbG9nZ2VyLndhcm4oMjAyLCAnVkVDVE9SX05PX0VOVFJJRVMnLCAndmVjdG9yU3RvcmUudHMnLCAnc3RvcmVJdGluZXJhcnlWZWN0b3InLCAnTm8gdmVjdG9yIGVudHJpZXMgd2VyZSBnZW5lcmF0ZWQgZm9yIGl0aW5lcmFyeScsIHtcclxuICAgICAgd29ya2Zsb3dJZCxcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN0b3JlZDogZmFsc2UsXHJcbiAgICAgIHZlY3RvcklkczogW10sXHJcbiAgICAgIG1lc3NhZ2U6ICdObyB2ZWN0b3IgZW50cmllcyBnZW5lcmF0ZWQnLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGxldCBlbWJlZGRpbmdNb2RlbCA9ICdqaW5hLWVtYmVkZGluZ3MtdjMnO1xyXG4gIGxldCBlbWJlZGRpbmdVc2FnZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCB1bmRlZmluZWQ7XHJcbiAgbGV0IGVtYmVkZGluZ3M6IG51bWJlcltdW107XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBlbWJlZGRpbmdSZXN1bHQgPSBhd2FpdCBnZW5lcmF0ZUppbmFFbWJlZGRpbmdzKFxyXG4gICAgICBlbnRyaWVzLm1hcCgoZW50cnkpID0+IGVudHJ5LnRleHQpLFxyXG4gICAgICB7XHJcbiAgICAgICAgdGFzazogJ3RleHQtbWF0Y2hpbmcnLFxyXG4gICAgICAgIGlucHV0VHlwZTogJ3RleHQnLFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuXHJcbiAgICBlbWJlZGRpbmdzID0gZW1iZWRkaW5nUmVzdWx0LmVtYmVkZGluZ3M7XHJcbiAgICBlbWJlZGRpbmdNb2RlbCA9IGVtYmVkZGluZ1Jlc3VsdC5tb2RlbDtcclxuICAgIGVtYmVkZGluZ1VzYWdlID0gZW1iZWRkaW5nUmVzdWx0LnVzYWdlO1xyXG5cclxuICAgIGlmICghQXJyYXkuaXNBcnJheShlbWJlZGRpbmdzKSB8fCBlbWJlZGRpbmdzLmxlbmd0aCAhPT0gZW50cmllcy5sZW5ndGgpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbWJlZGRpbmcgY291bnQgbWlzbWF0Y2ggZm9yIGl0aW5lcmFyeSBlbnRyaWVzLicpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBsb2dnZXIuZXJyb3IoMjAzLCAnVkVDVE9SX0VNQkVERElOR19GQUlMRUQnLCAndmVjdG9yU3RvcmUudHMnLCAnc3RvcmVJdGluZXJhcnlWZWN0b3InLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksIHtcclxuICAgICAgd29ya2Zsb3dJZCxcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN0b3JlZDogZmFsc2UsXHJcbiAgICAgIHZlY3RvcklkczogW10sXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb25zdCBzaGFyZWRNZXRhZGF0YSA9IHtcclxuICAgIHdvcmtmbG93SWQsXHJcbiAgICBzZXNzaW9uSWQsXHJcbiAgICBtb2RlbCxcclxuICAgIGVtYmVkZGluZ01vZGVsLFxyXG4gICAgZ2VuZXJhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIGRlc3RpbmF0aW9uOiBrZXlGYWN0cy5kZXN0aW5hdGlvbixcclxuICAgIGJ1ZGdldDoga2V5RmFjdHMuYnVkZ2V0LFxyXG4gICAgZGF0ZXM6IGtleUZhY3RzLmRhdGVzLFxyXG4gICAgdHJhdmVsUGFydHlGaXJzdFNlbnRlbmNlOiBrZXlGYWN0cy50cmF2ZWxQYXJ0eUZpcnN0U2VudGVuY2UsXHJcbiAgICBlbWJlZGRpbmdVc2FnZSxcclxuICB9O1xyXG5cclxuICBjb25zdCBzdWNjZXNzZXM6IHN0cmluZ1tdID0gW107XHJcbiAgY29uc3QgZmFpbHVyZXM6IEFycmF5PHsgaWQ6IHN0cmluZzsgZXJyb3I6IHN0cmluZyB9PiA9IFtdO1xyXG5cclxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZW50cmllcy5sZW5ndGg7IGluZGV4ICs9IDEpIHtcclxuICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1tpbmRleF07XHJcbiAgICBjb25zdCB2ZWN0b3IgPSBlbWJlZGRpbmdzW2luZGV4XTtcclxuXHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmVjdG9yKSB8fCB2ZWN0b3IubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGZhaWx1cmVzLnB1c2goeyBpZDogZW50cnkuaWQsIGVycm9yOiAnUmVjZWl2ZWQgZW1wdHkgdmVjdG9yIGZyb20gZW1iZWRkaW5ncyBBUEknIH0pO1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgICBpZDogZW50cnkuaWQsXHJcbiAgICAgIHZhbHVlczogdmVjdG9yLFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIC4uLnNoYXJlZE1ldGFkYXRhLFxyXG4gICAgICAgIC4uLmVudHJ5Lm1ldGFkYXRhLFxyXG4gICAgICB9LFxyXG4gICAgICBkb2N1bWVudDogZW50cnkuZG9jdW1lbnQsXHJcbiAgICB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGxvZ2dlci5kZWJ1ZygyMDQsICdWRUNUT1JfREJfUkVRVUVTVCcsICd2ZWN0b3JTdG9yZS50cycsICdzdG9yZUl0aW5lcmFyeVZlY3RvcicsIHtcclxuICAgICAgICBlbmRwb2ludDogVkVDVE9SX0VORFBPSU5ULFxyXG4gICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgZW50cnlJZDogZW50cnkuaWQsXHJcbiAgICAgICAgaGFzQXBpS2V5OiBCb29sZWFuKFZFQ1RPUl9BUElfS0VZKSxcclxuICAgICAgICBlbWJlZGRpbmdNb2RlbCxcclxuICAgICAgICBjYXRlZ29yeTogZW50cnkubWV0YWRhdGE/LmNhdGVnb3J5LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goVkVDVE9SX0VORFBPSU5ULCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgIC4uLihWRUNUT1JfQVBJX0tFWSA/IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke1ZFQ1RPUl9BUElfS0VZfWAgfSA6IHt9KSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBlcnJvckJvZHkgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgZmFpbHVyZXMucHVzaCh7IGlkOiBlbnRyeS5pZCwgZXJyb3I6IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtlcnJvckJvZHl9YCB9KTtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoMjA1LCAnVkVDVE9SX0RCX1JFUVVFU1RfRkFJTEVEJywgJ3ZlY3RvclN0b3JlLnRzJywgJ3N0b3JlSXRpbmVyYXJ5VmVjdG9yJywgYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9YCwge1xyXG4gICAgICAgICAgd29ya2Zsb3dJZCxcclxuICAgICAgICAgIGVudHJ5SWQ6IGVudHJ5LmlkLFxyXG4gICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXHJcbiAgICAgICAgICBib2R5OiBlcnJvckJvZHksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoeyBpZDogZW50cnkuaWQgfSkpO1xyXG4gICAgICBjb25zdCBzdG9yZWRJZCA9IHJlc3VsdD8uaWQgfHwgZW50cnkuaWQ7XHJcbiAgICAgIHN1Y2Nlc3Nlcy5wdXNoKHN0b3JlZElkKTtcclxuXHJcbiAgICAgIGxvZ2dlci5sb2coMjA2LCAnVkVDVE9SX0RCX1JFUVVFU1RfU1VDQ0VFREVEJywgJ3ZlY3RvclN0b3JlLnRzJywgJ3N0b3JlSXRpbmVyYXJ5VmVjdG9yJywge1xyXG4gICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgZW50cnlJZDogZW50cnkuaWQsXHJcbiAgICAgICAgc3RvcmVkSWQsXHJcbiAgICAgICAgY2F0ZWdvcnk6IGVudHJ5Lm1ldGFkYXRhPy5jYXRlZ29yeSxcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xyXG4gICAgICBmYWlsdXJlcy5wdXNoKHsgaWQ6IGVudHJ5LmlkLCBlcnJvcjogbWVzc2FnZSB9KTtcclxuICAgICAgbG9nZ2VyLmVycm9yKDIwNywgJ1ZFQ1RPUl9EQl9SRVFVRVNUX0VSUk9SJywgJ3ZlY3RvclN0b3JlLnRzJywgJ3N0b3JlSXRpbmVyYXJ5VmVjdG9yJywgbWVzc2FnZSwge1xyXG4gICAgICAgIHdvcmtmbG93SWQsXHJcbiAgICAgICAgZW50cnlJZDogZW50cnkuaWQsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHN0b3JlZDogZmFpbHVyZXMubGVuZ3RoID09PSAwICYmIHN1Y2Nlc3Nlcy5sZW5ndGggPiAwLFxyXG4gICAgdmVjdG9ySWRzOiBzdWNjZXNzZXMsXHJcbiAgICBmYWlsdXJlczogZmFpbHVyZXMubGVuZ3RoID4gMCA/IGZhaWx1cmVzIDogdW5kZWZpbmVkLFxyXG4gICAgbWVzc2FnZTogZmFpbHVyZXMubGVuZ3RoID4gMCA/ICdTb21lIHZlY3RvciBlbnRyaWVzIGZhaWxlZCB0byBzdG9yZScgOiB1bmRlZmluZWQsXHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gYnVpbGRWZWN0b3JFbnRyaWVzKHtcclxuICB3b3JrZmxvd0lkLFxyXG4gIGtleUZhY3RzLFxyXG59OiB7XHJcbiAgd29ya2Zsb3dJZDogc3RyaW5nO1xyXG4gIGtleUZhY3RzOiBLZXlGYWN0cztcclxufSk6IFZlY3RvckVudHJ5W10ge1xyXG4gIGNvbnN0IG92ZXJ2aWV3VGV4dCA9IGJ1aWxkT3ZlcnZpZXdUZXh0KGtleUZhY3RzKTtcclxuXHJcbiAgaWYgKCFvdmVydmlld1RleHQpIHtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcblxyXG4gIHJldHVybiBbXHJcbiAgICB7XHJcbiAgICAgIGlkOiBgJHt3b3JrZmxvd0lkfTpmYWN0c2AsXHJcbiAgICAgIHRleHQ6IG92ZXJ2aWV3VGV4dCxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICBjYXRlZ29yeTogJ2ZhY3RzJyxcclxuICAgICAgfSxcclxuICAgICAgZG9jdW1lbnQ6IHtcclxuICAgICAgICBkZXN0aW5hdGlvbjoga2V5RmFjdHMuZGVzdGluYXRpb24gPz8gbnVsbCxcclxuICAgICAgICBidWRnZXQ6IGtleUZhY3RzLmJ1ZGdldCA/PyBudWxsLFxyXG4gICAgICAgIGRhdGVzOiBrZXlGYWN0cy5kYXRlcyA/PyBudWxsLFxyXG4gICAgICAgIHRyYXZlbFBhcnR5Rmlyc3RTZW50ZW5jZToga2V5RmFjdHMudHJhdmVsUGFydHlGaXJzdFNlbnRlbmNlID8/IG51bGwsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIF07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkT3ZlcnZpZXdUZXh0KGtleUZhY3RzOiBLZXlGYWN0cyk6IHN0cmluZyB7XHJcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gIGlmIChrZXlGYWN0cy5kZXN0aW5hdGlvbikge1xyXG4gICAgbGluZXMucHVzaChgRGVzdGluYXRpb246ICR7a2V5RmFjdHMuZGVzdGluYXRpb259YCk7XHJcbiAgfVxyXG4gIGlmIChrZXlGYWN0cy5kYXRlcykge1xyXG4gICAgbGluZXMucHVzaChgRGF0ZXM6ICR7a2V5RmFjdHMuZGF0ZXN9YCk7XHJcbiAgfVxyXG4gIGlmIChrZXlGYWN0cy5idWRnZXQpIHtcclxuICAgIGxpbmVzLnB1c2goYEJ1ZGdldDogJHtrZXlGYWN0cy5idWRnZXR9YCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0cmF2ZWxQYXJ0eUxpbmUgPSBrZXlGYWN0cy50cmF2ZWxQYXJ0eUZpcnN0U2VudGVuY2UgPz8ga2V5RmFjdHMudHJhdmVsUGFydHk7XHJcbiAgaWYgKHRyYXZlbFBhcnR5TGluZSkge1xyXG4gICAgbGluZXMucHVzaChgVHJhdmVsIFBhcnR5OiAke3RyYXZlbFBhcnR5TGluZX1gKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZXh0cmFjdEtleUZhY3RzKGl0aW5lcmFyeTogdW5rbm93biwgZmFsbGJhY2tEZXN0aW5hdGlvbj86IHN0cmluZywgZm9ybURhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogS2V5RmFjdHMge1xyXG4gIGNvbnN0IGZhY3RzOiBLZXlGYWN0cyA9IHt9O1xyXG4gIGNvbnN0IGRhdGEgPSAodHlwZW9mIGl0aW5lcmFyeSA9PT0gJ29iamVjdCcgJiYgaXRpbmVyYXJ5ICE9PSBudWxsID8gaXRpbmVyYXJ5IDoge30pIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XHJcblxyXG4gIGNvbnN0IHRyaXBTdW1tYXJ5ID0gdHlwZW9mIGRhdGEudHJpcFN1bW1hcnkgPT09ICdvYmplY3QnICYmIGRhdGEudHJpcFN1bW1hcnkgIT09IG51bGwgPyAoZGF0YS50cmlwU3VtbWFyeSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA6IHt9O1xyXG4gIGNvbnN0IGtleURldGFpbHMgPSB0eXBlb2YgZGF0YS5rZXlEZXRhaWxzID09PSAnb2JqZWN0JyAmJiBkYXRhLmtleURldGFpbHMgIT09IG51bGwgPyAoZGF0YS5rZXlEZXRhaWxzIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pIDoge307XHJcbiAgY29uc3Qgc3VtbWFyeSA9IHR5cGVvZiBkYXRhLnN1bW1hcnkgPT09ICdvYmplY3QnICYmIGRhdGEuc3VtbWFyeSAhPT0gbnVsbCA/IChkYXRhLnN1bW1hcnkgYXMgUmVjb3JkPHN0cmluZywgYW55PikgOiB7fTtcclxuXHJcbiAgZmFjdHMuZGVzdGluYXRpb24gPVxyXG4gICAgc2FuaXRpemVTdHJpbmcoa2V5RGV0YWlscy5kZXN0aW5hdGlvbikgfHxcclxuICAgIHNhbml0aXplU3RyaW5nKHRyaXBTdW1tYXJ5LmRlc3RpbmF0aW9uKSB8fFxyXG4gICAgc2FuaXRpemVTdHJpbmcoZGF0YS5kZXN0aW5hdGlvbikgfHxcclxuICAgIHNhbml0aXplU3RyaW5nKGRhdGEubG9jYXRpb24pIHx8XHJcbiAgICBzYW5pdGl6ZVN0cmluZyhzdW1tYXJ5LmRlc3RpbmF0aW9uKSB8fFxyXG4gICAgc2FuaXRpemVTdHJpbmcoZmFsbGJhY2tEZXN0aW5hdGlvbikgfHxcclxuICAgIHNhbml0aXplU3RyaW5nKGZvcm1EYXRhPy5sb2NhdGlvbik7XHJcblxyXG4gIGZhY3RzLmJ1ZGdldCA9XHJcbiAgICBzYW5pdGl6ZVN0cmluZyhrZXlEZXRhaWxzLmJ1ZGdldCkgfHxcclxuICAgIHNhbml0aXplU3RyaW5nKHRyaXBTdW1tYXJ5LmJ1ZGdldERpc3BsYXkpIHx8XHJcbiAgICBzYW5pdGl6ZVN0cmluZyhkYXRhLmJ1ZGdldCkgfHxcclxuICAgIHNhbml0aXplU3RyaW5nKHN1bW1hcnkuYnVkZ2V0KSB8fFxyXG4gICAgZm9ybWF0QnVkZ2V0RnJvbUZvcm1EYXRhKGZvcm1EYXRhKTtcclxuXHJcbiAgY29uc3QgZGF0ZXMgPVxyXG4gICAgc2FuaXRpemVTdHJpbmcoa2V5RGV0YWlscy5kYXRlcykgfHxcclxuICAgIHNhbml0aXplU3RyaW5nKChrZXlEZXRhaWxzIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pLmRhdGVEaXNwbGF5KSB8fFxyXG4gICAgc2FuaXRpemVTdHJpbmcodHJpcFN1bW1hcnkuZGF0ZURpc3BsYXkpIHx8XHJcbiAgICBzYW5pdGl6ZVN0cmluZyhkYXRhLmRhdGVzKSB8fFxyXG4gICAgc2FuaXRpemVTdHJpbmcoc3VtbWFyeS5kYXRlcykgfHxcclxuICAgIGZvcm1hdERhdGVzRnJvbUZvcm1EYXRhKGZvcm1EYXRhKTtcclxuICBmYWN0cy5kYXRlcyA9IGRhdGVzIHx8IHVuZGVmaW5lZDtcclxuXHJcbiAgY29uc3QgdHJhdmVsUGFydHkgPVxyXG4gICAgc2FuaXRpemVTdHJpbmcoa2V5RGV0YWlscy50cmF2ZWxlcnMpIHx8XHJcbiAgICBzYW5pdGl6ZVN0cmluZygoa2V5RGV0YWlscyBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KS50cmF2ZWxQYXJ0eSkgfHxcclxuICAgIHNhbml0aXplU3RyaW5nKHRyaXBTdW1tYXJ5LnRyYXZlbGVyQ291bnQpIHx8XHJcbiAgICBzYW5pdGl6ZVN0cmluZyh0cmlwU3VtbWFyeS50cmF2ZWxlcnMpIHx8XHJcbiAgICBzYW5pdGl6ZVN0cmluZyhkYXRhLnRyYXZlbFBhcnR5KSB8fFxyXG4gICAgc2FuaXRpemVTdHJpbmcoc3VtbWFyeS50cmF2ZWxQYXJ0eSkgfHxcclxuICAgIGJ1aWxkVHJhdmVsUGFydHlGcm9tRm9ybURhdGEoZm9ybURhdGEpO1xyXG5cclxuICBmYWN0cy50cmF2ZWxQYXJ0eSA9IHRyYXZlbFBhcnR5O1xyXG4gIGZhY3RzLnRyYXZlbFBhcnR5Rmlyc3RTZW50ZW5jZSA9IHRyYXZlbFBhcnR5ID8gZmlyc3RTZW50ZW5jZSh0cmF2ZWxQYXJ0eSkgOiB1bmRlZmluZWQ7XHJcblxyXG4gIHJldHVybiBmYWN0cztcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0QnVkZ2V0RnJvbUZvcm1EYXRhKGZvcm1EYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgaWYgKCFmb3JtRGF0YSkge1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIGlmIChmb3JtRGF0YS5mbGV4aWJsZUJ1ZGdldCA9PT0gdHJ1ZSkge1xyXG4gICAgcmV0dXJuICdGbGV4aWJsZSBidWRnZXQnO1xyXG4gIH1cclxuXHJcbiAgaWYgKHR5cGVvZiBmb3JtRGF0YS5idWRnZXQgPT09ICdudW1iZXInICYmIE51bWJlci5pc0Zpbml0ZShmb3JtRGF0YS5idWRnZXQpKSB7XHJcbiAgICBjb25zdCBjdXJyZW5jeSA9IHNhbml0aXplU3RyaW5nKGZvcm1EYXRhLmN1cnJlbmN5KSA/PyAnVVNEJztcclxuICAgIHJldHVybiBgJHtjdXJyZW5jeX0gJHtmb3JtRGF0YS5idWRnZXR9YDtcclxuICB9XHJcblxyXG4gIHJldHVybiBzYW5pdGl6ZVN0cmluZyhmb3JtRGF0YS5idWRnZXREaXNwbGF5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZXNGcm9tRm9ybURhdGEoZm9ybURhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICBpZiAoIWZvcm1EYXRhKSB7XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZGVwYXJ0ID0gc2FuaXRpemVTdHJpbmcoZm9ybURhdGEuZGVwYXJ0RGF0ZSk7XHJcbiAgY29uc3QgcmV0ID0gc2FuaXRpemVTdHJpbmcoZm9ybURhdGEucmV0dXJuRGF0ZSk7XHJcbiAgY29uc3QgcGxhbm5lZERheXMgPSB0eXBlb2YgZm9ybURhdGEucGxhbm5lZERheXMgPT09ICdudW1iZXInICYmIE51bWJlci5pc0Zpbml0ZShmb3JtRGF0YS5wbGFubmVkRGF5cykgPyBmb3JtRGF0YS5wbGFubmVkRGF5cyA6IHVuZGVmaW5lZDtcclxuXHJcbiAgaWYgKGRlcGFydCAmJiByZXQpIHtcclxuICAgIHJldHVybiBgJHtkZXBhcnR9IOKAkyAke3JldH1gO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRlcGFydCAmJiBwbGFubmVkRGF5cykge1xyXG4gICAgcmV0dXJuIGAke2RlcGFydH0gZm9yICR7cGxhbm5lZERheXN9IGRheXNgO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRlcGFydCkge1xyXG4gICAgcmV0dXJuIGBEZXBhcnRpbmcgJHtkZXBhcnR9YDtcclxuICB9XHJcblxyXG4gIGlmIChwbGFubmVkRGF5cykge1xyXG4gICAgcmV0dXJuIGAke3BsYW5uZWREYXlzfSBkYXkgaXRpbmVyYXJ5IChmbGV4aWJsZSBkYXRlcylgO1xyXG4gIH1cclxuXHJcbiAgaWYgKGZvcm1EYXRhLmZsZXhpYmxlRGF0ZXMgPT09IHRydWUpIHtcclxuICAgIHJldHVybiAnRmxleGlibGUgZGF0ZXMnO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZnVuY3Rpb24gYnVpbGRUcmF2ZWxQYXJ0eUZyb21Gb3JtRGF0YShmb3JtRGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIGlmICghZm9ybURhdGEpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBjb25zdCBhZHVsdHMgPSB0eXBlb2YgZm9ybURhdGEuYWR1bHRzID09PSAnbnVtYmVyJyAmJiBmb3JtRGF0YS5hZHVsdHMgPj0gMCA/IGZvcm1EYXRhLmFkdWx0cyA6IHVuZGVmaW5lZDtcclxuICBjb25zdCBjaGlsZHJlbiA9IHR5cGVvZiBmb3JtRGF0YS5jaGlsZHJlbiA9PT0gJ251bWJlcicgJiYgZm9ybURhdGEuY2hpbGRyZW4gPj0gMCA/IGZvcm1EYXRhLmNoaWxkcmVuIDogdW5kZWZpbmVkO1xyXG5cclxuICBpZiAoYWR1bHRzID09IG51bGwgJiYgY2hpbGRyZW4gPT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICBpZiAodHlwZW9mIGFkdWx0cyA9PT0gJ251bWJlcicpIHtcclxuICAgIHBhcnRzLnB1c2goYCR7YWR1bHRzfSBhZHVsdCR7YWR1bHRzID09PSAxID8gJycgOiAncyd9YCk7XHJcbiAgfVxyXG5cclxuICBpZiAodHlwZW9mIGNoaWxkcmVuID09PSAnbnVtYmVyJyAmJiBjaGlsZHJlbiA+IDApIHtcclxuICAgIHBhcnRzLnB1c2goYCR7Y2hpbGRyZW59IGNoaWxkJHtjaGlsZHJlbiA9PT0gMSA/ICcnIDogJ3Jlbid9YCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcGFydHMuam9pbignLCAnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2FuaXRpemVTdHJpbmcodmFsdWU6IHVua25vd24pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICBjb25zdCB0cmltbWVkID0gdmFsdWUudHJpbSgpO1xyXG4gICAgcmV0dXJuIHRyaW1tZWQubGVuZ3RoID4gMCA/IHRyaW1tZWQgOiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiBOdW1iZXIuaXNGaW5pdGUodmFsdWUpKSB7XHJcbiAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpcnN0U2VudGVuY2UodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcclxuICBjb25zdCBwZXJpb2RJbmRleCA9IHRyaW1tZWQuaW5kZXhPZignLicpO1xyXG5cclxuICBpZiAocGVyaW9kSW5kZXggPT09IC0xKSB7XHJcbiAgICByZXR1cm4gdHJpbW1lZDtcclxuICB9XHJcblxyXG4gIHJldHVybiB0cmltbWVkLnNsaWNlKDAsIHBlcmlvZEluZGV4ICsgMSkudHJpbSgpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJnZW5lcmF0ZUppbmFFbWJlZGRpbmdzIiwibG9nZ2VyIiwiVkVDVE9SX0VORFBPSU5UIiwicHJvY2VzcyIsImVudiIsIlZFQ1RPUl9EQl9FTkRQT0lOVCIsIlZFQ1RPUl9EQl9XUklURV9VUkwiLCJWRUNUT1JfQVBJX0tFWSIsIlZFQ1RPUl9EQl9BUElfS0VZIiwiVkVDVE9SX0RCX1RPS0VOIiwic3RvcmVJdGluZXJhcnlWZWN0b3IiLCJwYXJhbXMiLCJ3b3JrZmxvd0lkIiwic2Vzc2lvbklkIiwiZGVzdGluYXRpb24iLCJpdGluZXJhcnkiLCJtb2RlbCIsImZvcm1EYXRhIiwid2FybiIsInN0b3JlZCIsInZlY3RvcklkcyIsIm1lc3NhZ2UiLCJrZXlGYWN0cyIsImV4dHJhY3RLZXlGYWN0cyIsImRlYnVnIiwiZW50cmllcyIsImJ1aWxkVmVjdG9yRW50cmllcyIsImxlbmd0aCIsImVtYmVkZGluZ01vZGVsIiwiZW1iZWRkaW5nVXNhZ2UiLCJlbWJlZGRpbmdzIiwiZW1iZWRkaW5nUmVzdWx0IiwibWFwIiwiZW50cnkiLCJ0ZXh0IiwidGFzayIsImlucHV0VHlwZSIsInVzYWdlIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJlcnJvciIsIlN0cmluZyIsInNoYXJlZE1ldGFkYXRhIiwiZ2VuZXJhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJidWRnZXQiLCJkYXRlcyIsInRyYXZlbFBhcnR5Rmlyc3RTZW50ZW5jZSIsInN1Y2Nlc3NlcyIsImZhaWx1cmVzIiwiaW5kZXgiLCJ2ZWN0b3IiLCJwdXNoIiwiaWQiLCJwYXlsb2FkIiwidmFsdWVzIiwibWV0YWRhdGEiLCJkb2N1bWVudCIsImVuZHBvaW50IiwiZW50cnlJZCIsImhhc0FwaUtleSIsIkJvb2xlYW4iLCJjYXRlZ29yeSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJlcnJvckJvZHkiLCJzdGF0dXMiLCJyZXN1bHQiLCJqc29uIiwiY2F0Y2giLCJzdG9yZWRJZCIsImxvZyIsInVuZGVmaW5lZCIsIm92ZXJ2aWV3VGV4dCIsImJ1aWxkT3ZlcnZpZXdUZXh0IiwibGluZXMiLCJ0cmF2ZWxQYXJ0eUxpbmUiLCJ0cmF2ZWxQYXJ0eSIsImpvaW4iLCJmYWxsYmFja0Rlc3RpbmF0aW9uIiwiZmFjdHMiLCJkYXRhIiwidHJpcFN1bW1hcnkiLCJrZXlEZXRhaWxzIiwic3VtbWFyeSIsInNhbml0aXplU3RyaW5nIiwibG9jYXRpb24iLCJidWRnZXREaXNwbGF5IiwiZm9ybWF0QnVkZ2V0RnJvbUZvcm1EYXRhIiwiZGF0ZURpc3BsYXkiLCJmb3JtYXREYXRlc0Zyb21Gb3JtRGF0YSIsInRyYXZlbGVycyIsInRyYXZlbGVyQ291bnQiLCJidWlsZFRyYXZlbFBhcnR5RnJvbUZvcm1EYXRhIiwiZmlyc3RTZW50ZW5jZSIsImZsZXhpYmxlQnVkZ2V0IiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJjdXJyZW5jeSIsImRlcGFydCIsImRlcGFydERhdGUiLCJyZXQiLCJyZXR1cm5EYXRlIiwicGxhbm5lZERheXMiLCJmbGV4aWJsZURhdGVzIiwiYWR1bHRzIiwiY2hpbGRyZW4iLCJwYXJ0cyIsInZhbHVlIiwidHJpbW1lZCIsInRyaW0iLCJwZXJpb2RJbmRleCIsImluZGV4T2YiLCJzbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/vector/vectorStore.ts\n");

/***/ }),

/***/ "(rsc)/./src/types/itinerary/enums.ts":
/*!**************************************!*\
  !*** ./src/types/itinerary/enums.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BudgetMode: () => (/* binding */ BudgetMode),\n/* harmony export */   Currency: () => (/* binding */ Currency),\n/* harmony export */   ItineraryStatus: () => (/* binding */ ItineraryStatus),\n/* harmony export */   LogStatus: () => (/* binding */ LogStatus),\n/* harmony export */   Priority: () => (/* binding */ Priority)\n/* harmony export */ });\nvar Currency;\n(function(Currency) {\n    Currency[\"USD\"] = \"USD\";\n    Currency[\"EUR\"] = \"EUR\";\n    Currency[\"GBP\"] = \"GBP\";\n    Currency[\"CAD\"] = \"CAD\";\n    Currency[\"AUD\"] = \"AUD\";\n})(Currency || (Currency = {}));\nvar BudgetMode;\n(function(BudgetMode) {\n    BudgetMode[\"TOTAL\"] = \"total\";\n    BudgetMode[\"PER_PERSON\"] = \"per-person\";\n})(BudgetMode || (BudgetMode = {}));\nvar ItineraryStatus;\n(function(ItineraryStatus) {\n    ItineraryStatus[\"PENDING\"] = \"pending\";\n    ItineraryStatus[\"PROCESSING\"] = \"processing\";\n    ItineraryStatus[\"COMPLETE\"] = \"complete\";\n    ItineraryStatus[\"ERROR\"] = \"error\";\n})(ItineraryStatus || (ItineraryStatus = {}));\nvar LogStatus;\n(function(LogStatus) {\n    LogStatus[\"SUCCESS\"] = \"Success\";\n    LogStatus[\"ERROR\"] = \"Error\";\n    LogStatus[\"WARNING\"] = \"Warning\";\n})(LogStatus || (LogStatus = {}));\nvar Priority;\n(function(Priority) {\n    Priority[\"HIGH\"] = \"High\";\n    Priority[\"MEDIUM\"] = \"Medium\";\n    Priority[\"LOW\"] = \"Low\";\n})(Priority || (Priority = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdHlwZXMvaXRpbmVyYXJ5L2VudW1zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztVQUFZQTs7Ozs7O0dBQUFBLGFBQUFBOztVQVFBQzs7O0dBQUFBLGVBQUFBOztVQUtBQzs7Ozs7R0FBQUEsb0JBQUFBOztVQU9BQzs7OztHQUFBQSxjQUFBQTs7VUFNQUM7Ozs7R0FBQUEsYUFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oeWxvMDAvLi9zcmMvdHlwZXMvaXRpbmVyYXJ5L2VudW1zLnRzPzA3ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gQ3VycmVuY3kge1xyXG4gIFVTRCA9ICdVU0QnLFxyXG4gIEVVUiA9ICdFVVInLFxyXG4gIEdCUCA9ICdHQlAnLFxyXG4gIENBRCA9ICdDQUQnLFxyXG4gIEFVRCA9ICdBVUQnXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEJ1ZGdldE1vZGUge1xyXG4gIFRPVEFMID0gJ3RvdGFsJyxcclxuICBQRVJfUEVSU09OID0gJ3Blci1wZXJzb24nXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEl0aW5lcmFyeVN0YXR1cyB7XHJcbiAgUEVORElORyA9ICdwZW5kaW5nJyxcclxuICBQUk9DRVNTSU5HID0gJ3Byb2Nlc3NpbmcnLFxyXG4gIENPTVBMRVRFID0gJ2NvbXBsZXRlJyxcclxuICBFUlJPUiA9ICdlcnJvcidcclxufVxyXG5cclxuZXhwb3J0IGVudW0gTG9nU3RhdHVzIHtcclxuICBTVUNDRVNTID0gJ1N1Y2Nlc3MnLFxyXG4gIEVSUk9SID0gJ0Vycm9yJyxcclxuICBXQVJOSU5HID0gJ1dhcm5pbmcnXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFByaW9yaXR5IHtcclxuICBISUdIID0gJ0hpZ2gnLFxyXG4gIE1FRElVTSA9ICdNZWRpdW0nLFxyXG4gIExPVyA9ICdMb3cnXHJcbn1cclxuIl0sIm5hbWVzIjpbIkN1cnJlbmN5IiwiQnVkZ2V0TW9kZSIsIkl0aW5lcmFyeVN0YXR1cyIsIkxvZ1N0YXR1cyIsIlByaW9yaXR5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/types/itinerary/enums.ts\n");

/***/ }),

/***/ "(rsc)/./src/utils/console-logger.ts":
/*!*************************************!*\
  !*** ./src/utils/console-logger.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/* harmony import */ var _types_itinerary_enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/types/itinerary/enums */ \"(rsc)/./src/types/itinerary/enums.ts\");\n\nclass ConsoleLogger {\n    static instance;\n    logLevel;\n    logs = [];\n    maxLogs = 1000;\n    constructor(){\n        this.logLevel = process.env.ITINERARY_LOG_LEVEL || \"info\";\n    }\n    static getInstance() {\n        if (!ConsoleLogger.instance) {\n            ConsoleLogger.instance = new ConsoleLogger();\n        }\n        return ConsoleLogger.instance;\n    }\n    shouldLog(level) {\n        const levels = [\n            \"silent\",\n            \"error\",\n            \"warn\",\n            \"info\",\n            \"debug\"\n        ];\n        const currentIndex = levels.indexOf(this.logLevel);\n        const messageIndex = levels.indexOf(level);\n        return messageIndex <= currentIndex;\n    }\n    log(stepNumber, action, fileName, functionName, data = {}, duration, status = _types_itinerary_enums__WEBPACK_IMPORTED_MODULE_0__.LogStatus.SUCCESS) {\n        if (!this.shouldLog(\"info\")) return;\n        const logData = {\n            stepNumber,\n            action,\n            fileName,\n            functionName,\n            timestamp: new Date().toISOString(),\n            data,\n            ...duration !== undefined && {\n                duration\n            },\n            status\n        };\n        // Store log\n        this.logs.push(logData);\n        if (this.logs.length > this.maxLogs) {\n            this.logs.shift(); // Remove oldest\n        }\n        try {\n            console.log(`Step ${stepNumber}: ${action} in ${fileName} - ${functionName}`, logData);\n        } catch (error) {\n            // Fallback logging if JSON serialization fails\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            console.error(`Step ${stepNumber}: Logging failed for ${action}`, {\n                error: errorMessage\n            });\n        }\n    }\n    error(stepNumber, action, fileName, functionName, error, data = {}) {\n        if (!this.shouldLog(\"error\")) return;\n        const errorMessage = error instanceof Error ? error.message : error;\n        this.log(stepNumber, action, fileName, functionName, {\n            ...data,\n            error: errorMessage\n        }, undefined, _types_itinerary_enums__WEBPACK_IMPORTED_MODULE_0__.LogStatus.ERROR);\n    }\n    warn(stepNumber, action, fileName, functionName, message, data = {}) {\n        if (!this.shouldLog(\"warn\")) return;\n        this.log(stepNumber, action, fileName, functionName, {\n            ...data,\n            warning: message\n        }, undefined, _types_itinerary_enums__WEBPACK_IMPORTED_MODULE_0__.LogStatus.WARNING);\n    }\n    debug(stepNumber, action, fileName, functionName, data = {}) {\n        if (!this.shouldLog(\"debug\")) return;\n        this.log(stepNumber, `DEBUG: ${action}`, fileName, functionName, data, undefined, _types_itinerary_enums__WEBPACK_IMPORTED_MODULE_0__.LogStatus.SUCCESS);\n    }\n    getLogs() {\n        return [\n            ...this.logs\n        ];\n    }\n    clearLogs() {\n        this.logs = [];\n    }\n}\nconst logger = ConsoleLogger.getInstance();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvY29uc29sZS1sb2dnZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0Q7QUFlcEQsTUFBTUM7SUFDSixPQUFlQyxTQUF3QjtJQUMvQkMsU0FBbUI7SUFDbkJDLE9BQW1CLEVBQUUsQ0FBQztJQUN0QkMsVUFBVSxLQUFLO0lBRXZCLGFBQXNCO1FBQ3BCLElBQUksQ0FBQ0YsUUFBUSxHQUFHLFFBQVNJLEdBQUcsQ0FBQ0MsbUJBQW1CLElBQWlCO0lBQ25FO0lBRUEsT0FBY0MsY0FBNkI7UUFDekMsSUFBSSxDQUFDUixjQUFjQyxRQUFRLEVBQUU7WUFDM0JELGNBQWNDLFFBQVEsR0FBRyxJQUFJRDtRQUMvQjtRQUNBLE9BQU9BLGNBQWNDLFFBQVE7SUFDL0I7SUFFUVEsVUFBVUMsS0FBZSxFQUFXO1FBQzFDLE1BQU1DLFNBQVM7WUFBQztZQUFVO1lBQVM7WUFBUTtZQUFRO1NBQVE7UUFDM0QsTUFBTUMsZUFBZUQsT0FBT0UsT0FBTyxDQUFDLElBQUksQ0FBQ1gsUUFBUTtRQUNqRCxNQUFNWSxlQUFlSCxPQUFPRSxPQUFPLENBQUNIO1FBQ3BDLE9BQU9JLGdCQUFnQkY7SUFDekI7SUFFT0csSUFDTEMsVUFBa0IsRUFDbEJDLE1BQWMsRUFDZEMsUUFBZ0IsRUFDaEJDLFlBQW9CLEVBQ3BCQyxPQUE0QixDQUFDLENBQUMsRUFDOUJDLFFBQWlCLEVBQ2pCQyxTQUFvQnZCLDZEQUFTQSxDQUFDd0IsT0FBTyxFQUMvQjtRQUNOLElBQUksQ0FBQyxJQUFJLENBQUNkLFNBQVMsQ0FBQyxTQUFTO1FBRTdCLE1BQU1lLFVBQW9CO1lBQ3hCUjtZQUNBQztZQUNBQztZQUNBQztZQUNBTSxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDakNQO1lBQ0EsR0FBSUMsYUFBYU8sYUFBYTtnQkFBRVA7WUFBUyxDQUFDO1lBQzFDQztRQUNGO1FBRUEsWUFBWTtRQUNaLElBQUksQ0FBQ25CLElBQUksQ0FBQzBCLElBQUksQ0FBQ0w7UUFDZixJQUFJLElBQUksQ0FBQ3JCLElBQUksQ0FBQzJCLE1BQU0sR0FBRyxJQUFJLENBQUMxQixPQUFPLEVBQUU7WUFDbkMsSUFBSSxDQUFDRCxJQUFJLENBQUM0QixLQUFLLElBQUksZ0JBQWdCO1FBQ3JDO1FBRUEsSUFBSTtZQUNGQyxRQUFRakIsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFQyxXQUFXLEVBQUUsRUFBRUMsT0FBTyxJQUFJLEVBQUVDLFNBQVMsR0FBRyxFQUFFQyxhQUFhLENBQUMsRUFBRUs7UUFDaEYsRUFBRSxPQUFPUyxPQUFPO1lBQ2QsK0NBQStDO1lBQy9DLE1BQU1DLGVBQWVELGlCQUFpQkUsUUFBUUYsTUFBTUcsT0FBTyxHQUFHQyxPQUFPSjtZQUNyRUQsUUFBUUMsS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFakIsV0FBVyxxQkFBcUIsRUFBRUMsT0FBTyxDQUFDLEVBQUU7Z0JBQUVnQixPQUFPQztZQUFhO1FBQzFGO0lBQ0Y7SUFFT0QsTUFDTGpCLFVBQWtCLEVBQ2xCQyxNQUFjLEVBQ2RDLFFBQWdCLEVBQ2hCQyxZQUFvQixFQUNwQmMsS0FBcUIsRUFDckJiLE9BQTRCLENBQUMsQ0FBQyxFQUN4QjtRQUNOLElBQUksQ0FBQyxJQUFJLENBQUNYLFNBQVMsQ0FBQyxVQUFVO1FBRTlCLE1BQU15QixlQUFlRCxpQkFBaUJFLFFBQVFGLE1BQU1HLE9BQU8sR0FBR0g7UUFDOUQsSUFBSSxDQUFDbEIsR0FBRyxDQUFDQyxZQUFZQyxRQUFRQyxVQUFVQyxjQUFjO1lBQUUsR0FBR0MsSUFBSTtZQUFFYSxPQUFPQztRQUFhLEdBQUdOLFdBQVc3Qiw2REFBU0EsQ0FBQ3VDLEtBQUs7SUFDbkg7SUFFT0MsS0FDTHZCLFVBQWtCLEVBQ2xCQyxNQUFjLEVBQ2RDLFFBQWdCLEVBQ2hCQyxZQUFvQixFQUNwQmlCLE9BQWUsRUFDZmhCLE9BQTRCLENBQUMsQ0FBQyxFQUN4QjtRQUNOLElBQUksQ0FBQyxJQUFJLENBQUNYLFNBQVMsQ0FBQyxTQUFTO1FBRTdCLElBQUksQ0FBQ00sR0FBRyxDQUFDQyxZQUFZQyxRQUFRQyxVQUFVQyxjQUFjO1lBQUUsR0FBR0MsSUFBSTtZQUFFb0IsU0FBU0o7UUFBUSxHQUFHUixXQUFXN0IsNkRBQVNBLENBQUMwQyxPQUFPO0lBQ2xIO0lBRU9DLE1BQ0wxQixVQUFrQixFQUNsQkMsTUFBYyxFQUNkQyxRQUFnQixFQUNoQkMsWUFBb0IsRUFDcEJDLE9BQTRCLENBQUMsQ0FBQyxFQUN4QjtRQUNOLElBQUksQ0FBQyxJQUFJLENBQUNYLFNBQVMsQ0FBQyxVQUFVO1FBRTlCLElBQUksQ0FBQ00sR0FBRyxDQUFDQyxZQUFZLENBQUMsT0FBTyxFQUFFQyxPQUFPLENBQUMsRUFBRUMsVUFBVUMsY0FBY0MsTUFBTVEsV0FBVzdCLDZEQUFTQSxDQUFDd0IsT0FBTztJQUNyRztJQUVPb0IsVUFBc0I7UUFDM0IsT0FBTztlQUFJLElBQUksQ0FBQ3hDLElBQUk7U0FBQztJQUN2QjtJQUVPeUMsWUFBa0I7UUFDdkIsSUFBSSxDQUFDekMsSUFBSSxHQUFHLEVBQUU7SUFDaEI7QUFDRjtBQUVPLE1BQU0wQyxTQUFTN0MsY0FBY1EsV0FBVyxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHlsbzAwLy4vc3JjL3V0aWxzL2NvbnNvbGUtbG9nZ2VyLnRzPzcxMmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTG9nU3RhdHVzIH0gZnJvbSAnQC90eXBlcy9pdGluZXJhcnkvZW51bXMnO1xyXG5cclxudHlwZSBMb2dMZXZlbCA9ICdzaWxlbnQnIHwgJ2Vycm9yJyB8ICd3YXJuJyB8ICdpbmZvJyB8ICdkZWJ1Zyc7XHJcblxyXG5pbnRlcmZhY2UgTG9nRW50cnkge1xyXG4gIHN0ZXBOdW1iZXI6IG51bWJlcjtcclxuICBhY3Rpb246IHN0cmluZztcclxuICBmaWxlTmFtZTogc3RyaW5nO1xyXG4gIGZ1bmN0aW9uTmFtZTogc3RyaW5nO1xyXG4gIHRpbWVzdGFtcDogc3RyaW5nO1xyXG4gIGRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT47XHJcbiAgZHVyYXRpb24/OiBudW1iZXI7XHJcbiAgc3RhdHVzOiBMb2dTdGF0dXM7XHJcbn1cclxuXHJcbmNsYXNzIENvbnNvbGVMb2dnZXIge1xyXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBDb25zb2xlTG9nZ2VyO1xyXG4gIHByaXZhdGUgbG9nTGV2ZWw6IExvZ0xldmVsO1xyXG4gIHByaXZhdGUgbG9nczogTG9nRW50cnlbXSA9IFtdO1xyXG4gIHByaXZhdGUgbWF4TG9ncyA9IDEwMDA7IC8vIEtlZXAgbGFzdCAxMDAwIGxvZ3NcclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMubG9nTGV2ZWwgPSAocHJvY2Vzcy5lbnYuSVRJTkVSQVJZX0xPR19MRVZFTCBhcyBMb2dMZXZlbCkgfHwgJ2luZm8nO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBDb25zb2xlTG9nZ2VyIHtcclxuICAgIGlmICghQ29uc29sZUxvZ2dlci5pbnN0YW5jZSkge1xyXG4gICAgICBDb25zb2xlTG9nZ2VyLmluc3RhbmNlID0gbmV3IENvbnNvbGVMb2dnZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBDb25zb2xlTG9nZ2VyLmluc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzaG91bGRMb2cobGV2ZWw6IExvZ0xldmVsKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBsZXZlbHMgPSBbJ3NpbGVudCcsICdlcnJvcicsICd3YXJuJywgJ2luZm8nLCAnZGVidWcnXTtcclxuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IGxldmVscy5pbmRleE9mKHRoaXMubG9nTGV2ZWwpO1xyXG4gICAgY29uc3QgbWVzc2FnZUluZGV4ID0gbGV2ZWxzLmluZGV4T2YobGV2ZWwpO1xyXG4gICAgcmV0dXJuIG1lc3NhZ2VJbmRleCA8PSBjdXJyZW50SW5kZXg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbG9nKFxyXG4gICAgc3RlcE51bWJlcjogbnVtYmVyLFxyXG4gICAgYWN0aW9uOiBzdHJpbmcsXHJcbiAgICBmaWxlTmFtZTogc3RyaW5nLFxyXG4gICAgZnVuY3Rpb25OYW1lOiBzdHJpbmcsXHJcbiAgICBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge30sXHJcbiAgICBkdXJhdGlvbj86IG51bWJlcixcclxuICAgIHN0YXR1czogTG9nU3RhdHVzID0gTG9nU3RhdHVzLlNVQ0NFU1NcclxuICApOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5zaG91bGRMb2coJ2luZm8nKSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGxvZ0RhdGE6IExvZ0VudHJ5ID0ge1xyXG4gICAgICBzdGVwTnVtYmVyLFxyXG4gICAgICBhY3Rpb24sXHJcbiAgICAgIGZpbGVOYW1lLFxyXG4gICAgICBmdW5jdGlvbk5hbWUsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBkYXRhLFxyXG4gICAgICAuLi4oZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiB7IGR1cmF0aW9uIH0pLFxyXG4gICAgICBzdGF0dXNcclxuICAgIH07XHJcblxyXG4gICAgLy8gU3RvcmUgbG9nXHJcbiAgICB0aGlzLmxvZ3MucHVzaChsb2dEYXRhKTtcclxuICAgIGlmICh0aGlzLmxvZ3MubGVuZ3RoID4gdGhpcy5tYXhMb2dzKSB7XHJcbiAgICAgIHRoaXMubG9ncy5zaGlmdCgpOyAvLyBSZW1vdmUgb2xkZXN0XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coYFN0ZXAgJHtzdGVwTnVtYmVyfTogJHthY3Rpb259IGluICR7ZmlsZU5hbWV9IC0gJHtmdW5jdGlvbk5hbWV9YCwgbG9nRGF0YSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBGYWxsYmFjayBsb2dnaW5nIGlmIEpTT04gc2VyaWFsaXphdGlvbiBmYWlsc1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFN0ZXAgJHtzdGVwTnVtYmVyfTogTG9nZ2luZyBmYWlsZWQgZm9yICR7YWN0aW9ufWAsIHsgZXJyb3I6IGVycm9yTWVzc2FnZSB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBlcnJvcihcclxuICAgIHN0ZXBOdW1iZXI6IG51bWJlcixcclxuICAgIGFjdGlvbjogc3RyaW5nLFxyXG4gICAgZmlsZU5hbWU6IHN0cmluZyxcclxuICAgIGZ1bmN0aW9uTmFtZTogc3RyaW5nLFxyXG4gICAgZXJyb3I6IEVycm9yIHwgc3RyaW5nLFxyXG4gICAgZGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9XHJcbiAgKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuc2hvdWxkTG9nKCdlcnJvcicpKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvcjtcclxuICAgIHRoaXMubG9nKHN0ZXBOdW1iZXIsIGFjdGlvbiwgZmlsZU5hbWUsIGZ1bmN0aW9uTmFtZSwgeyAuLi5kYXRhLCBlcnJvcjogZXJyb3JNZXNzYWdlIH0sIHVuZGVmaW5lZCwgTG9nU3RhdHVzLkVSUk9SKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB3YXJuKFxyXG4gICAgc3RlcE51bWJlcjogbnVtYmVyLFxyXG4gICAgYWN0aW9uOiBzdHJpbmcsXHJcbiAgICBmaWxlTmFtZTogc3RyaW5nLFxyXG4gICAgZnVuY3Rpb25OYW1lOiBzdHJpbmcsXHJcbiAgICBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgICBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cclxuICApOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5zaG91bGRMb2coJ3dhcm4nKSkgcmV0dXJuO1xyXG5cclxuICAgIHRoaXMubG9nKHN0ZXBOdW1iZXIsIGFjdGlvbiwgZmlsZU5hbWUsIGZ1bmN0aW9uTmFtZSwgeyAuLi5kYXRhLCB3YXJuaW5nOiBtZXNzYWdlIH0sIHVuZGVmaW5lZCwgTG9nU3RhdHVzLldBUk5JTkcpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRlYnVnKFxyXG4gICAgc3RlcE51bWJlcjogbnVtYmVyLFxyXG4gICAgYWN0aW9uOiBzdHJpbmcsXHJcbiAgICBmaWxlTmFtZTogc3RyaW5nLFxyXG4gICAgZnVuY3Rpb25OYW1lOiBzdHJpbmcsXHJcbiAgICBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cclxuICApOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5zaG91bGRMb2coJ2RlYnVnJykpIHJldHVybjtcclxuXHJcbiAgICB0aGlzLmxvZyhzdGVwTnVtYmVyLCBgREVCVUc6ICR7YWN0aW9ufWAsIGZpbGVOYW1lLCBmdW5jdGlvbk5hbWUsIGRhdGEsIHVuZGVmaW5lZCwgTG9nU3RhdHVzLlNVQ0NFU1MpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldExvZ3MoKTogTG9nRW50cnlbXSB7XHJcbiAgICByZXR1cm4gWy4uLnRoaXMubG9nc107XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2xlYXJMb2dzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5sb2dzID0gW107XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbG9nZ2VyID0gQ29uc29sZUxvZ2dlci5nZXRJbnN0YW5jZSgpO1xyXG4iXSwibmFtZXMiOlsiTG9nU3RhdHVzIiwiQ29uc29sZUxvZ2dlciIsImluc3RhbmNlIiwibG9nTGV2ZWwiLCJsb2dzIiwibWF4TG9ncyIsInByb2Nlc3MiLCJlbnYiLCJJVElORVJBUllfTE9HX0xFVkVMIiwiZ2V0SW5zdGFuY2UiLCJzaG91bGRMb2ciLCJsZXZlbCIsImxldmVscyIsImN1cnJlbnRJbmRleCIsImluZGV4T2YiLCJtZXNzYWdlSW5kZXgiLCJsb2ciLCJzdGVwTnVtYmVyIiwiYWN0aW9uIiwiZmlsZU5hbWUiLCJmdW5jdGlvbk5hbWUiLCJkYXRhIiwiZHVyYXRpb24iLCJzdGF0dXMiLCJTVUNDRVNTIiwibG9nRGF0YSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVuZGVmaW5lZCIsInB1c2giLCJsZW5ndGgiLCJzaGlmdCIsImNvbnNvbGUiLCJlcnJvciIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwibWVzc2FnZSIsIlN0cmluZyIsIkVSUk9SIiwid2FybiIsIndhcm5pbmciLCJXQVJOSU5HIiwiZGVidWciLCJnZXRMb2dzIiwiY2xlYXJMb2dzIiwibG9nZ2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/console-logger.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/inngest","vendor-chunks/@inngest","vendor-chunks/hash.js","vendor-chunks/debug","vendor-chunks/color-convert","vendor-chunks/chalk","vendor-chunks/@upstash","vendor-chunks/serialize-error-cjs","vendor-chunks/inherits","vendor-chunks/uncrypto","vendor-chunks/supports-color","vendor-chunks/ms","vendor-chunks/minimalistic-assert","vendor-chunks/json-stringify-safe","vendor-chunks/has-flag","vendor-chunks/color-name","vendor-chunks/canonicalize","vendor-chunks/ansi-styles"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finngest%2Froute&page=%2Fapi%2Finngest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finngest%2Froute.ts&appDir=C%3A%5CUsers%5Craze0%5CDocuments%5Chylo00%5Chylo00%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Craze0%5CDocuments%5Chylo00%5Chylo00&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();