"use strict";(()=>{var e={};e.id=536,e.ids=[536],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5407:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>d,patchFetch:()=>E,requestAsyncStorage:()=>m,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l});var r={};s.r(r),s.d(r,{GET:()=>p});var o=s(9303),a=s(8716),i=s(670),n=s(7070),c=s(1202);async function p(e){let t=Date.now();try{let s;c.k.log(1,"Static map request received","maps/static/route.ts","GET");let{searchParams:r}=new URL(e.url),o=r.get("location"),a=r.get("zoom")||"12",i=r.get("size")||"400x300",p=r.get("maptype")||"roadmap";if(c.k.log(2,"Request parameters parsed","maps/static/route.ts","GET",{location:o,zoom:a,size:i,maptype:p}),!o)return c.k.error(3,"Missing location parameter","maps/static/route.ts","GET","ValidationError: location is required"),n.NextResponse.json({error:"location parameter is required",success:!1},{status:400});let u=parseInt(a);if(isNaN(u)||u<1||u>20)return c.k.error(4,"Invalid zoom parameter","maps/static/route.ts","GET","ValidationError: zoom must be 1-20"),n.NextResponse.json({error:"zoom must be between 1 and 20",success:!1},{status:400});if(!/^\d+x\d+$/.test(i))return c.k.error(5,"Invalid size parameter format","maps/static/route.ts","GET","ValidationError: size must be in format WxH"),n.NextResponse.json({error:"size must be in format WIDTHxHEIGHT (e.g., 400x300)",success:!1},{status:400});let m=["roadmap","satellite","terrain","hybrid"];if(!m.includes(p))return c.k.error(6,"Invalid maptype parameter","maps/static/route.ts","GET",`ValidationError: maptype must be one of ${m.join(", ")}`),n.NextResponse.json({error:`maptype must be one of: ${m.join(", ")}`,success:!1},{status:400});let l=`map_${o}_${a}_${i}_${p}`;c.k.log(7,"Checking cache for existing map","maps/static/route.ts","GET",{cacheKey:l});let g=.3>Math.random();c.k.log(8,"Cache check completed","maps/static/route.ts","GET",{cached:g}),g?(s=`https://maps.googleapis.com/maps/api/staticmap?center=${encodeURIComponent(o)}&zoom=${a}&size=${i}&maptype=${p}&key=CACHED_MOCK_KEY`,c.k.log(9,"Using cached map image","maps/static/route.ts","GET",{imageUrl:s})):(c.k.log(10,"Generating new map image","maps/static/route.ts","GET"),s=`https://maps.googleapis.com/maps/api/staticmap?center=${encodeURIComponent(o)}&zoom=${a}&size=${i}&maptype=${p}&key=MOCK_API_KEY`,c.k.log(13,"Storing map in cache","maps/static/route.ts","GET",{cacheKey:l})),c.k.log(14,"Map image URL generated","maps/static/route.ts","GET",{imageUrl:s.substring(0,100)+"...",cached:g});let d=Date.now()-t;return c.k.log(15,"Static map request completed successfully","maps/static/route.ts","GET",{location:o,cached:g,processingTimeMs:d}),n.NextResponse.json({success:!0,imageUrl:s,cached:g})}catch(s){let e=Date.now()-t;return c.k.error(16,"Unexpected error in static map generation","maps/static/route.ts","GET",s instanceof Error?s:String(s),{processingTimeMs:e}),n.NextResponse.json({error:"Internal server error",success:!1,message:"An unexpected error occurred. Please try again."},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/maps/static/route",pathname:"/api/maps/static",filename:"route",bundlePath:"app/api/maps/static/route"},resolvedPagePath:"C:\\Users\\raze0\\Documents\\vercel_deploy\\hylo00_original\\src\\app\\api\\maps\\static\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:g}=u,d="/api/maps/static/route";function E(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}},1202:(e,t,s)=>{var r,o,a,i,n;s.d(t,{k:()=>p}),function(e){e.USD="USD",e.EUR="EUR",e.GBP="GBP",e.CAD="CAD",e.AUD="AUD"}(r||(r={})),function(e){e.TOTAL="total",e.PER_PERSON="per-person"}(o||(o={})),function(e){e.PENDING="pending",e.PROCESSING="processing",e.COMPLETE="complete",e.ERROR="error"}(a||(a={})),function(e){e.SUCCESS="Success",e.ERROR="Error",e.WARNING="Warning"}(i||(i={})),function(e){e.HIGH="High",e.MEDIUM="Medium",e.LOW="Low"}(n||(n={}));class c{static instance;logLevel;logs=[];maxLogs=1e3;constructor(){this.logLevel=process.env.ITINERARY_LOG_LEVEL||"info"}static getInstance(){return c.instance||(c.instance=new c),c.instance}shouldLog(e){let t=["silent","error","warn","info","debug"],s=t.indexOf(this.logLevel);return t.indexOf(e)<=s}log(e,t,s,r,o={},a,n=i.SUCCESS){if(!this.shouldLog("info"))return;let c={stepNumber:e,action:t,fileName:s,functionName:r,timestamp:new Date().toISOString(),data:o,...void 0!==a&&{duration:a},status:n};this.logs.push(c),this.logs.length>this.maxLogs&&this.logs.shift();try{console.log(`Step ${e}: ${t} in ${s} - ${r}`,c)}catch(s){console.error(`Step ${e}: Logging failed for ${t}`,{error:s instanceof Error?s.message:String(s)})}}error(e,t,s,r,o,a={}){if(!this.shouldLog("error"))return;let n=o instanceof Error?o.message:o;this.log(e,t,s,r,{...a,error:n},void 0,i.ERROR)}warn(e,t,s,r,o,a={}){this.shouldLog("warn")&&this.log(e,t,s,r,{...a,warning:o},void 0,i.WARNING)}debug(e,t,s,r,o={}){this.shouldLog("debug")&&this.log(e,`DEBUG: ${t}`,s,r,o,void 0,i.SUCCESS)}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}}let p=c.getInstance()}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,972],()=>s(5407));module.exports=r})();